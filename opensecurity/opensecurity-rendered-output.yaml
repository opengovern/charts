---
# Source: opensecurity/charts/postgresql/templates/primary/networkpolicy.yaml
kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: opensecurity-postgresql-primary
  namespace: "opensecurity"
  labels:
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: 16.4.0
    helm.sh/chart: postgresql-15.5.21
    app.kubernetes.io/component: primary
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/instance: opensecurity
      app.kubernetes.io/name: postgresql
      app.kubernetes.io/component: primary
  policyTypes:
    - Ingress
    - Egress
  egress:
    - {}
  ingress:
    - ports:
        - port: 5432
---
# Source: opensecurity/charts/postgresql/templates/read/networkpolicy.yaml
kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: opensecurity-postgresql-read
  namespace: "opensecurity"
  labels:
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: 16.4.0
    helm.sh/chart: postgresql-15.5.21
    app.kubernetes.io/component: read
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/instance: opensecurity
      app.kubernetes.io/name: postgresql
      app.kubernetes.io/component: read
  policyTypes:
    - Ingress
    - Egress
  egress:
    - {}
  ingress:
    - ports:
        - port: 5432
---
# Source: opensecurity/charts/nats/templates/pod-disruption-budget.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  labels:
    app: job-queue
    app.kubernetes.io/component: nats
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nats
    app.kubernetes.io/version: 2.10.18
    helm.sh/chart: nats-1.2.2
  name: opensecurity-nats
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/component: nats
      app.kubernetes.io/instance: opensecurity
      app.kubernetes.io/name: nats
---
# Source: opensecurity/charts/opensearch/templates/poddisruptionbudget.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: "opensearch-cluster-master-pdb"
  labels:
    helm.sh/chart: opensearch-2.22.0
    app.kubernetes.io/name: opensearch
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/version: "2.16.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: opensearch-cluster-master
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: opensearch
      app.kubernetes.io/instance: opensecurity
---
# Source: opensecurity/charts/postgresql/templates/primary/pdb.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: opensecurity-postgresql-primary
  namespace: "opensecurity"
  labels:
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: 16.4.0
    helm.sh/chart: postgresql-15.5.21
    app.kubernetes.io/component: primary
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/instance: opensecurity
      app.kubernetes.io/name: postgresql
      app.kubernetes.io/component: primary
---
# Source: opensecurity/charts/postgresql/templates/read/pdb.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: opensecurity-postgresql-read
  namespace: "opensecurity"
  labels:
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: 16.4.0
    helm.sh/chart: postgresql-15.5.21
    app.kubernetes.io/component: read
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/instance: opensecurity
      app.kubernetes.io/name: postgresql
      app.kubernetes.io/component: read
---
# Source: opensecurity/charts/dex/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: opensecurity-dex
  labels:
    helm.sh/chart: dex-0.19.1
    app.kubernetes.io/name: dex
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/version: "2.41.1"
    app.kubernetes.io/managed-by: Helm
---
# Source: opensecurity/charts/keda/templates/manager/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/name: keda-operator
    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  name: keda-operator
  namespace: opensecurity
automountServiceAccountToken: true
---
# Source: opensecurity/charts/keda/templates/metrics-server/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/name: keda-metrics-server
    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  annotations:
  name: keda-metrics-server
  namespace: opensecurity
automountServiceAccountToken: true
---
# Source: opensecurity/charts/keda/templates/webhooks/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/name: keda-webhook
    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  annotations:
  name: keda-webhook
  namespace: opensecurity
automountServiceAccountToken: true
---
# Source: opensecurity/charts/postgresql/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: opensecurity-postgresql
  namespace: "opensecurity"
  labels:
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: 16.4.0
    helm.sh/chart: postgresql-15.5.21
automountServiceAccountToken: false
---
# Source: opensecurity/charts/vault/templates/injector-serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: opensecurity-vault-agent-injector
  namespace: opensecurity
  labels:
    app.kubernetes.io/name: vault-agent-injector
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
---
# Source: opensecurity/charts/vault/templates/server-serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: opensecurity-vault
  namespace: opensecurity
  labels:
    helm.sh/chart: vault-0.28.1
    app.kubernetes.io/name: vault
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
---
# Source: opensecurity/templates/auth-service/auth-service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: auth-service
  namespace: opensecurity
---
# Source: opensecurity/templates/checkup-job/service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: checkup-worker
  namespace: opensecurity
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::xxx:role/kaytu-service-opensecurity-checkup-worker
---
# Source: opensecurity/templates/compliance-report-job/service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: compliance-report-worker
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::xxx:role/kaytu-service-opensecurity-compliance-report-worker
---
# Source: opensecurity/templates/compliance-service/service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: compliance
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::xxx:role/kaytu-service-opensecurity-compliance
---
# Source: opensecurity/templates/compliance-summarizer-job/service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: compliance-summarizer
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::xxx:role/kaytu-service-opensecurity-compliance-summarizer
---
# Source: opensecurity/templates/core/service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: core
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::xxx:role/kaytu-service-opensecurity-metadata
---
# Source: opensecurity/templates/describe-worker/service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: og-describer
---
# Source: opensecurity/templates/integration-service/service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: integration
  namespace: opensecurity
  annotations:
    eks.amazonaws.com/role-arn: "arn:aws:iam::xxx:role/xxx"
#    eks.amazonaws.com/role-arn: arn:aws:iam::xxx:role/kaytu-service-opensecurity-integration
---
# Source: opensecurity/templates/keda-wait-job/service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: wait-for-crd-sa
  namespace: "opensecurity"
---
# Source: opensecurity/templates/post-install-configuration/service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: configuration
---
# Source: opensecurity/templates/scheduler/service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: scheduler
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::xxx:role/kaytu-service-opensecurity-scheduler
---
# Source: opensecurity/templates/task-service/service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: task
  annotations:
    eks.amazonaws.com/role-arn: "arn:aws:iam::xxx:role/xxx"
#    eks.amazonaws.com/role-arn: arn:aws:iam::xxx:role/kaytu-service-opensecurity-integration
---
# Source: opensecurity/templates/auth-service/auth-service-deployment.yaml
apiVersion: v1
kind: Secret
metadata:
  name: auth-service-secret
  namespace: opensecurity
  annotations:
    kubernetes.io/service-account.name: auth-service
type: kubernetes.io/service-account-token
---
# Source: opensecurity/templates/checkup-job/service-account.yaml
apiVersion: v1
kind: Secret
metadata:
  name: checkup-worker-secret
  namespace: opensecurity

  annotations:
    kubernetes.io/service-account.name: checkup-worker
type: kubernetes.io/service-account-token
---
# Source: opensecurity/templates/compliance-report-job/service-account.yaml
apiVersion: v1
kind: Secret
metadata:
  name: compliance-report-worker-secret
  annotations:
    kubernetes.io/service-account.name: compliance-report-worker
type: kubernetes.io/service-account-token
---
# Source: opensecurity/templates/compliance-service/service-account.yaml
apiVersion: v1
kind: Secret
metadata:
  name: compliance-secret
  annotations:
    kubernetes.io/service-account.name: compliance
type: kubernetes.io/service-account-token
---
# Source: opensecurity/templates/compliance-summarizer-job/service-account.yaml
apiVersion: v1
kind: Secret
metadata:
  name: compliance-summarizer-secret
  annotations:
    kubernetes.io/service-account.name: compliance-summarizer
type: kubernetes.io/service-account-token
---
# Source: opensecurity/templates/core/service-account.yaml
apiVersion: v1
kind: Secret
metadata:
  name: core-secret
  annotations:
    kubernetes.io/service-account.name: core
type: kubernetes.io/service-account-token
---
# Source: opensecurity/templates/demo-import/job.yaml
apiVersion: v1
kind: Secret
metadata:
  name: import-demo-data-secret
  namespace: opensecurity
type: Opaque
data:
  openSslPassword: MDFaUlBGdU9OMFBNb25P
---
# Source: opensecurity/templates/initial-admin-password-secret.yaml
# opensecurity/templates/initial-admin-password-secret.yaml
apiVersion: v1
kind: Secret
metadata:
  # Use the chart's fullname helper for consistent naming
  name: opensecurity-initial-admin-password
  labels:
    # Include standard Helm labels from _helpers.tpl
    helm.sh/chart: opensecurity-2.76.20
    app.kubernetes.io/name: opensecurity
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/version: "2.76.20"
    app.kubernetes.io/managed-by: Helm
    # Add specific labels if needed for selection/identification
    app.kubernetes.io/component: initial-credentials
  # Add annotations if necessary (e.g., Helm hooks)
  # annotations:
  #   "helm.sh/hook": post-install # Consider if this should be created only on first install
  #   "helm.sh/hook-delete-policy": before-hook-creation
type: Opaque
stringData:
  # The key name your post-install-job expects for the admin password.
  # Common keys might be 'password', 'admin-password', or 'ADMIN_PASSWORD'. Adjust if needed.
  # Using a fixed default password. CHANGE THIS IN A PRODUCTION ENVIRONMENT.
  password: "password"
  # You could optionally include the default admin username if the job needs it
  # username: "admin"
---
# Source: opensecurity/templates/integration-service/service-account.yaml
apiVersion: v1
kind: Secret
metadata:
  name: integration-secret
  annotations:
    kubernetes.io/service-account.name: integration
type: kubernetes.io/service-account-token
---
# Source: opensecurity/templates/post-install-configuration/service-account.yaml
apiVersion: v1
kind: Secret
metadata:
  name: configuration-secret
  annotations:
    kubernetes.io/service-account.name: configuration
type: kubernetes.io/service-account-token
---
# Source: opensecurity/templates/scheduler/service-account.yaml
apiVersion: v1
kind: Secret
metadata:
  name: scheduler-secret
  annotations:
    kubernetes.io/service-account.name: scheduler
type: kubernetes.io/service-account-token
---
# Source: opensecurity/templates/subchart-extras/postgresql/postgres-secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: postgres-secret
  namespace: opensecurity
type: Opaque
data:
  postgres-password: "RkxJRWtMVkJmQ0lQVFZ2SA=="
  replication-password: "VG5ka3BESXhzRm1xWkJtbA=="
  workspaceServiceUserPassword: "eXB2YldVV0FDemh1aldnaw=="
  authServiceUserPassword: "bmZidEdYZ05zR1d6aEdseg=="
  subscriptionUserPassword: "d2hhQmJQa21NWW9OTnVQaw=="
  informationUserPassword: "VGV4Yml1THhEdUx1eXpZUQ=="
  schedulerUserPassword: "U3ZzR3FaaWJtYkxLdFVWUA=="
  policyServiceUserPassword: "b1hHQU9oYVNvVGlZdVVjVA=="
  complianceServiceUserPassword: "S2hVQ3hKdWR6TFVXV25pcQ=="
  coreServiceUserPassword: "RFNITFBRVmR6R3hXdGFzTQ=="
  migratorServiceUserPassword: "T0pRS0NOdkFJbmtuWEdhUA=="
  reporterServiceUserPassword: "b3RnR3l6QmlXRHF1SGxJaQ=="
  postgresExporterUserPassword: "S1RlZUJ6ZHpoblVaUEx3QQ=="
  steampipeUserPassword: "WFFDU1VsbmxrVmJ0R3hYag=="
  alertingServiceUserPassword: "TmdpempNbXV0RklsTWJkeA=="
  assistantServiceUserPassword: "TlR3amFhdWNiTlpwYVlLYw=="
  dexServiceUserPassword: "aGhTU3NQclBVRW5ucEJ0VA=="
  integrationServiceUserPassword: "akZxQW1OT3BLcGRqaG9VTg=="
  taskServiceUserPassword: "QWR6aW9hQWhaeEp6ZFlCQg=="
---
# Source: opensecurity/templates/subchart-extras/postgresql/postgres-secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: opensecurity-dex
type: Opaque
data:
  config.yaml: "Y29ubmVjdG9yczogW10KZW5hYmxlUGFzc3dvcmREQjogdHJ1ZQpleHBpcnk6CiAgZGV2aWNlUmVxdWVzdHM6IDVtCiAgaWRUb2tlbnM6IDI0aAogIHJlZnJlc2hUb2tlbnM6CiAgICBhYnNvbHV0ZUxpZmV0aW1lOiAzOTYwaAogICAgcmV1c2VJbnRlcnZhbDogM3MKICAgIHZhbGlkSWZOb3RVc2VkRm9yOiAyMTYwaAogIHNpZ25pbmdLZXlzOiA2aApncnBjOgogIGFkZHI6IGxvY2FsaG9zdDo1NTU3CiAgcmVmbGVjdGlvbjogdHJ1ZQppc3N1ZXI6IGh0dHA6Ly9vcGVuc2VjdXJpdHktZGV4Lm9wZW5zZWN1cml0eS5zdmMuY2x1c3Rlci5sb2NhbDo1NTU2L2RleApsb2dnZXI6CiAgZm9ybWF0OiB0ZXh0CiAgbGV2ZWw6IGRlYnVnCm9hdXRoMjoKICBhbHdheXNTaG93TG9naW5TY3JlZW46IGZhbHNlCiAgcGFzc3dvcmRDb25uZWN0b3I6IGxvY2FsCiAgc2tpcEFwcHJvdmFsU2NyZWVuOiB0cnVlCnN0b3JhZ2U6CiAgY29uZmlnOgogICAgZGF0YWJhc2U6IGRleAogICAgaG9zdDogb3BlbnNlY3VyaXR5LXBvc3RncmVzcWwtcHJpbWFyeS5vcGVuc2VjdXJpdHkuc3ZjLmNsdXN0ZXIubG9jYWwKICAgIHBhc3N3b3JkOiBoaFNTc1ByUFVFbm5wQnRUCiAgICBwb3J0OiA1NDMyCiAgICBzc2w6CiAgICAgIG1vZGU6IGRpc2FibGUKICAgIHVzZXI6IGRleF9zZXJ2aWNlCiAgdHlwZTogcG9zdGdyZXM="
---
# Source: opensecurity/templates/task-service/service-account.yaml
apiVersion: v1
kind: Secret
metadata:
  name: task-secret
  annotations:
    kubernetes.io/service-account.name: task
type: kubernetes.io/service-account-token
---
# Source: opensecurity/charts/nats/templates/config-map.yaml
apiVersion: v1
data:
  nats.conf: |
    {
      "http_port": 8222,
      "jetstream": {
        "max_file_store": 25Gi,
        "max_memory_store": 4Gi,
        "store_dir": "/data"
      },
      "lame_duck_duration": "30s",
      "lame_duck_grace_period": "10s",
      "pid_file": "/var/run/nats/nats.pid",
      "port": 4222,
      "server_name": $SERVER_NAME
    }
kind: ConfigMap
metadata:
  labels:
    app: job-queue
    app.kubernetes.io/component: nats
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nats
    app.kubernetes.io/version: 2.10.18
    helm.sh/chart: nats-1.2.2
  name: opensecurity-nats-config
---
# Source: opensecurity/charts/opensearch/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: opensearch-cluster-master-config
  labels:
    helm.sh/chart: opensearch-2.22.0
    app.kubernetes.io/name: opensearch
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/version: "2.16.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: opensearch-cluster-master
data:
  opensearch.yml: |
    cluster.name: opensearch-cluster
    network.host: 0.0.0.0
    indices.requests.cache.size: 10%
    plugins:
      security:
        ssl:
          transport:
            pemcert_filepath: esnode.pem
            pemkey_filepath: esnode-key.pem
            pemtrustedcas_filepath: root-ca.pem
            enforce_hostname_verification: false
          http:
            enabled: true
            pemcert_filepath: esnode.pem
            pemkey_filepath: esnode-key.pem
            pemtrustedcas_filepath: root-ca.pem
        allow_unsafe_democertificates: true
        allow_default_init_securityindex: true
        authcz:
          admin_dn:
            - CN=kirk,OU=client,O=client,L=test,C=de
        enable_snapshot_restore_privilege: true
        check_snapshot_restore_write_privileges: true
        restapi:
          roles_enabled: ["all_access", "security_rest_api_access"]
        system_indices:
          enabled: true
          indices:
            [
              ".opendistro-alerting-config",
              ".opendistro-alerting-alert*",
              ".opendistro-anomaly-results*",
              ".opendistro-anomaly-detector*",
              ".opendistro-anomaly-checkpoints",
              ".opendistro-anomaly-detection-state",
              ".opendistro-reports-*",
              ".opendistro-notifications-*",
              ".opendistro-notebooks",
              ".opendistro-asynchronous-search-response*",
            ]
---
# Source: opensecurity/charts/postgresql/templates/primary/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: opensecurity-postgresql-primary-configuration
  namespace: "opensecurity"
  labels:
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: 16.4.0
    helm.sh/chart: postgresql-15.5.21
    app.kubernetes.io/component: primary
data:
  postgresql.conf: |
    listen_addresses = '*'
    max_wal_senders = 10
    shared_preload_libraries = 'pg_stat_statements'
    
    max_connections = 100
    shared_buffers = 768MB
    effective_cache_size = 2304MB
    maintenance_work_mem = 384MB
    checkpoint_completion_target = 0.9
    wal_buffers = 16MB
    default_statistics_target = 500
    random_page_cost = 1.1
    effective_io_concurrency = 200
    work_mem = 4915kB
    huge_pages = off
    min_wal_size = 4GB
    max_wal_size = 16GB
---
# Source: opensecurity/charts/postgresql/templates/primary/initialization-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: opensecurity-postgresql-primary-init-scripts
  namespace: "opensecurity"
  labels:
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: 16.4.0
    helm.sh/chart: postgresql-15.5.21
data:
  primary_init_script.sh: |
    #!/bin/bash
    ./init.sh
---
# Source: opensecurity/charts/vault/templates/server-config-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: opensecurity-vault-config
  namespace: opensecurity
  labels:
    helm.sh/chart: vault-0.28.1
    app.kubernetes.io/name: vault
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
data:
  extraconfig-from-values.hcl: |-
    
    disable_mlock = true
    ui = true
    
    listener "tcp" {
      tls_disable = 1
      address = "[::]:8200"
      cluster_address = "[::]:8201"
      # Enable unauthenticated metrics access (necessary for Prometheus Operator)
      #telemetry {
      #  unauthenticated_metrics_access = "true"
      #}
    }
    storage "file" {
      path = "/vault/data"
    }
    
    # Example configuration for using auto-unseal, using Google Cloud KMS. The
    # GKMS keys must already exist, and the cluster must have a service account
    # that is authorized to access GCP KMS.
    #seal "gcpckms" {
    #   project     = "vault-helm-dev"
    #   region      = "global"
    #   key_ring    = "vault-helm-unseal-kr"
    #   crypto_key  = "vault-helm-unseal-key"
    #}
    
    # Example configuration for enabling Prometheus metrics in your config.
    #telemetry {
    #  prometheus_retention_time = "30s"
    #  disable_hostname = true
    #}
---
# Source: opensecurity/templates/compliance-report-job/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: compliance-worker-postgres-config
  namespace: opensecurity
data:
  optimization.conf: |
    max_connections = 200
    shared_buffers = 512MB
    effective_cache_size = 1536MB
    maintenance_work_mem = 128MB
    checkpoint_completion_target = 0.9
    wal_buffers = 16MB
    default_statistics_target = 100
    random_page_cost = 1.1
    effective_io_concurrency = 200
    work_mem = 1310kB
    huge_pages = off
    min_wal_size = 1GB
    max_wal_size = 4GB
---
# Source: opensecurity/templates/elasticsearch-index-config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: elasticsearch-index-config
  namespace: opensecurity
data:
  account_report_template.json: |-
    {
      "index_patterns": [
        "account_report"
      ],
      "priority": 1000,
      "template": {
        "settings": {
          "index": {
            "max_inner_result_window": 20000,
            "number_of_shards": 9,
            "mapping":{
              "total_fields": {
                "limit": "10000"
              }
            }
          }
        },
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": false,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "sourceID": {
              "type": "keyword"
            },
            "provider": {
              "type": "keyword"
            },
            "benchmarkID": {
              "type": "keyword"
            },
            "reportJobID": {
              "type": "long"
            },
            "summary": {
              "type": "object",
              "dynamic": true
            },
            "createdAt": {
              "type": "long"
            },
            "totalResources": {
              "type": "long"
            },
            "totalCompliant": {
              "type": "long"
            },
            "compliancePercentage": {
              "type": "double"
            },
            "accountReportType": {
              "type": "keyword"
            }
          }
        }
      },
      "_meta": {
        "description": "Account report index"
      }
    }
  analytics_connection_summary_template.json: |-
    {
      "index_patterns": [
        "analytics_connection_summary",
        "rc_analytics_connection_summary"
      ],
      "priority": 1000,
      "template": {
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": true,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "evaluated_at": {
              "type": "long"
            },
            "metric_id": {
              "type": "keyword"
            },
            "metric_name": {
              "type": "keyword"
            },
            "date": {
              "type": "keyword"
            },
            "month": {
              "type": "keyword"
            },
            "year": {
              "type": "keyword"
            },
  
            "integrations": {
              "type": "object",
              "enabled": false
            },
  
            "resource_collections": {
              "type": "object",
              "enabled": false
            }
          }
        },
        "settings": {
          "index":{
            "max_inner_result_window": 20000,
            "refresh_interval": "60s",
            "number_of_shards": 9,
            "mapping":{
              "total_fields": {
                "limit": "10000"
              }
            }
          }
        }
      },
      "_meta": {
        "description": "Analytics Connection Summary Index"
      }
    }
  analytics_integration_type_summary_template.json: |-
    {
      "index_patterns": [
        "analytics_integration_type_summary",
        "rc_analytics_integration_type_summary"
      ],
      "priority": 1000,
      "template": {
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": true,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "evaluated_at": {
              "type": "long"
            },
            "metric_id": {
              "type": "keyword"
            },
            "metric_name": {
              "type": "keyword"
            },
            "date": {
              "type": "keyword"
            },
            "month": {
              "type": "keyword"
            },
            "year": {
              "type": "keyword"
            },
  
            "integration_types": {
              "type": "object",
              "enabled": false
            },
  
            "resource_collections": {
              "type": "object",
              "enabled": false
            }
          }
        },
        "settings": {
          "index":{
            "max_inner_result_window": 20000,
            "refresh_interval": "60s",
            "number_of_shards": 9,
            "mapping":{
              "total_fields": {
                "limit": "10000"
              }
            }
          }
        }
      },
      "_meta": {
        "description": "Analytics Integration Type Summary Index"
      }
    }
  analytics_region_summary_template.json: |-
    {
      "index_patterns": [
        "analytics_region_summary"
      ],
      "priority": 1000,
      "template": {
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": true,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "region": {
              "type": "keyword"
            },
            "connection_id": {
              "type": "keyword"
            },
            "connector": {
              "type": "keyword"
            },
            "evaluated_at": {
              "type": "long"
            },
            "metric_id": {
              "type": "keyword"
            },
            "resource_count": {
              "type": "long"
            }
          }
        },
        "settings": {
          "index":{
            "max_inner_result_window": 20000,
            "refresh_interval": "60s",
            "number_of_shards": 9,
            "mapping":{
              "total_fields": {
                "limit": "10000"
              }
            }
          }
        }
      },
      "_meta": {
        "description": "Analytics Region Summary Index"
      }
    }
  analytics_spend_connection_summary_template.json: |-
    {
      "index_patterns": [
        "analytics_spend_connection_summary"
      ],
      "priority": 1000,
      "template": {
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": true,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "evaluated_at": {
              "type": "long"
            },
            "date": {
              "type": "keyword"
            },
            "date_epoch": {
              "type": "long"
            },
            "month": {
              "type": "keyword"
            },
            "year": {
              "type": "keyword"
            },
            "metric_id": {
              "type": "keyword"
            },
            "metric_name": {
              "type": "keyword"
            },
            "period_start": {
              "type": "long"
            },
            "period_end": {
              "type": "long"
            },
            "total_cost_value": {
              "type": "double"
            },
  
            "integrations": {
              "type": "object",
              "enabled": false
            }
          }
        },
        "settings": {
          "index":{
            "max_inner_result_window": 20000,
            "refresh_interval": "60s",
            "number_of_shards": 9,
            "mapping":{
              "total_fields": {
                "limit": "10000"
              }
            }
          }
        }
      },
      "_meta": {
        "description": "Analytics Spend Connection Summary Index"
      }
    }
  analytics_spend_connector_summary_template.json: |-
    {
      "index_patterns": [
        "analytics_spend_integration_type_summary"
      ],
      "priority": 1000,
      "template": {
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": true,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "evaluated_at": {
              "type": "long"
            },
            "date": {
              "type": "keyword"
            },
            "date_epoch": {
              "type": "long"
            },
            "month": {
              "type": "keyword"
            },
            "year": {
              "type": "keyword"
            },
            "metric_id": {
              "type": "keyword"
            },
            "metric_name": {
              "type": "keyword"
            },
            "period_start": {
              "type": "long"
            },
            "period_end": {
              "type": "long"
            },
            "total_cost_value": {
              "type": "double"
            },
  
            "integration_types": {
              "type": "object",
              "enabled": false
            }
          }
        },
        "settings": {
          "index":{
            "max_inner_result_window": 20000,
            "refresh_interval": "60s",
            "number_of_shards": 9,
            "mapping":{
              "total_fields": {
                "limit": "10000"
              }
            }
          }
        }
      },
      "_meta": {
        "description": "Analytics Spend Connector Summary Index"
      }
    }
  backups_template.json: |-
    {
      "index_patterns": [
        "backup_*"
      ],
      "priority": 1000,
      "template": {
        "settings": {
          "index": {
            "number_of_shards": 6,
            "max_inner_result_window": 10000
          }
        },
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": true,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "date_as_keyword": {
                "match_mapping_type": "date",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ]
        }
      },
      "_meta": {
        "description": "This file contains the base index template for all backup indices."
      }
    }
  baseline_resource_template.json.disabled: |-
    {
      "index_patterns": [
        "*"
      ],
      "template": {
        "settings": {
          "number_of_shards": 1,
          "index":{
            "mapping":{
              "total_fields": {
                "limit": "10000"
              }
            }
          }
        },
        "mappings": {
          "dynamic_templates": [
            {
              "properties_as_object": {
                "match_mapping_type": "*",
                "match": "properties",
                "mapping": {
                  "type": "object",
                  "enabled": false
                }
              }
            },
            {
              "tags_as_objects": {
                "match_mapping_type": "*",
                "match": "tags",
                "mapping": {
                  "type": "object",
                  "enabled": false
                }
              }
            }
          ]
        }
      },
      "priority": 1,
      "composed_of": [
        "resource_component_template"
      ],
      "version": 1,
      "_meta": {
        "description": "Baseline resources indices"
      }
    }
  benchmark_summary_template.json: |-
    {
      "index_patterns": [
        "benchmark_summary",
        "rc_benchmark_summary"
      ],
      "priority": 1000,
      "template": {
        "settings": {
          "index": {
            "max_inner_result_window": 20000,
            "number_of_shards": 9,
            "mapping":{
                "total_fields": {
                    "limit": "10000"
                }
            }
          }
        },
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": true,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "BenchmarkID":  {
              "type": "keyword"
            },
            "JobID": {
              "type": "long"
            },
            "EvaluatedAtEpoch":  {
              "type": "long"
            },
            "Integrations": {
              "type": "object",
              "properties": {
                "BenchmarkResult": {
                  "type": "object",
                  "enabled": true,
                  "properties": {
                    "Result": {
                      "type": "object",
                      "enabled": true,
                      "properties": {
                        "QueryResult": {
                          "type": "object",
                          "enabled": true
                        },
                        "SeverityResult": {
                          "type": "object",
                          "enabled": true
                        },
                        "SecurityScore": {
                          "type": "double"
                        },
                        "CostImpact": {
                          "type": "double"
                        }
                      }
                    },
                    "ResourceTypes": {
                      "type": "object",
                      "enabled": false
                    },
                    "Controls": {
                      "type": "object",
                      "enabled": false
                    }
                  }
                },
                "Integrations": {
                  "type": "object",
                  "enabled": false
                }
              }
            },
            "ResourceCollections": {
              "type": "object",
              "enabled": false
            }
          }
        }
      },
      "_meta": {
        "description": "Benchmark summary index"
      }
    }
  compliance_job_report_control_summary_template.json: |
    {
      "index_patterns": ["compliance_job_report_control_summary"],
      "priority": 1000,
      "template": {
        "settings": {
          "number_of_shards": 1,
          "number_of_replicas": 1
        },
        "mappings": {
          "properties": {
            "es_id": {
              "type": "keyword"
            },
            "es_index": {
              "type": "keyword"
            },
            "controls": {
              "type": "object",
              "dynamic": "false",
              "enabled": true
            },
            "control_score": {
              "enabled": false
            },
            "compliance_summary": {
              "type": "object",
              "dynamic": true
            },
            "job_summary": {
              "type": "object",
              "properties": {
                "job_id": {
                  "type": "long"
                },
                "framework_id": {
                  "type": "keyword"
                },
                "job_started_at": {
                  "type": "date"
                },
                "integration_ids": {
                  "type": "keyword"
                }
              }
            }
          }
        }
      }
    }
  compliance_job_report_control_view_template.json: |
    {
      "index_patterns": ["compliance_job_report_control_view"],
      "priority": 1000,
      "template": {
        "settings": {
          "number_of_shards": 1,
          "number_of_replicas": 1
        },
        "mappings": {
          "properties": {
            "es_id": {
              "type": "keyword"
            },
            "es_index": {
              "type": "keyword"
            },
            "controls": {
              "enabled": false
            },
            "compliance_summary": {
              "type": "object",
              "dynamic": true
            },
            "job_summary": {
              "type": "object",
              "properties": {
                "job_id": {
                  "type": "long"
                },
                "framework_id": {
                  "type": "keyword"
                },
                "job_started_at": {
                  "type": "date"
                },
                "integration_ids": {
                  "type": "keyword"
                }
              }
            }
          }
        }
      }
    }
  compliance_job_report_resource_view_template.json: |
    {
      "index_patterns": ["compliance_job_report_resource_view"],
      "priority": 1000,
      "template": {
        "settings": {
          "number_of_shards": 1,
          "number_of_replicas": 1
        },
        "mappings": {
          "properties": {
            "es_id": {
              "type": "keyword"
            },
            "es_index": {
              "type": "keyword"
            },
            "integrations": {
              "enabled": false
            },
            "compliance_summary": {
              "type": "object",
              "dynamic": true
            },
            "job_summary": {
              "type": "object",
              "properties": {
                "job_id": {
                  "type": "long"
                },
                "framework_id": {
                  "type": "keyword"
                },
                "job_started_at": {
                  "type": "date"
                },
                "integration_ids": {
                  "type": "keyword"
                }
              }
            }
          }
        }
      }
    }
  compliance_report_template.json: |-
    {
      "index_patterns": [
        "compliance_report"
      ],
      "priority": 1000,
      "template": {
        "settings": {
          "index": {
            "max_inner_result_window": 20000,
            "number_of_shards": 9,
            "mapping":{
                "total_fields": {
                    "limit": "10000"
                }
            }
          }
        },
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": false,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "type": {
              "type": "keyword"
            },
            "reportJobID": {
              "type": "long"
            },
            "describedAt": {
              "type": "long"
            },
            "integrationType": {
              "type": "keyword"
            },
            "integrationID": {
              "type": "keyword"
            },
            "group": {
              "type": "object",
              "dynamic": true
            },
            "result": {
              "type": "object",
              "dynamic": true
            }
          }
        }
      },
      "_meta": {
        "description": "Compliance report index"
      }
    }
  compliance_result_events_template.json: |-
    {
      "index_patterns": [
        "compliance_result_events"
      ],
      "priority": 1000,
      "template": {
        "settings": {
          "index": {
            "max_inner_result_window": 20000,
            "number_of_shards": 9,
            "max_terms_count": 4194304,
            "mapping":{
                "total_fields": {
                    "limit": "10000"
                }
            }
          }
        },
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": true,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "complianceResultEsID": {
                "type": "keyword"
            },
            "benchmarkID": {
              "type": "keyword"
            },
            "controlID":  {
              "type": "keyword"
            },
            "integrationID": {
              "type": "keyword"
            },
            "platformResourceID": {
              "type": "keyword"
            },
            "resourceID": {
              "type": "keyword"
            },
            "evaluatedAt":  {
              "type": "long"
            },
            "complianceStatus": {
              "type": "keyword"
            },
            "previousComplianceStatus": {
              "type": "keyword"
            },
            "stateActive": {
              "type": "boolean"
            },
            "previousStateActive": {
              "type": "boolean"
            },
            "severity": {
              "type": "keyword"
            },
            "integrationType": {
              "type": "keyword"
            },
            "resourceType": {
              "type": "keyword"
            },
            "reason": {
              "type": "keyword"
            },
            "parentComplianceJobID": {
              "type": "long"
            },
            "complianceJobID": {
              "type": "long"
            },
            "parentBenchmarkReferences": {
              "type": "keyword"
            }
          }
        }
      },
      "_meta": {
        "description": "ComplianceResultEvents index"
      }
    }
  compliance_results_template.json: |-
    {
      "index_patterns": [
        "compliance_results",
        "rc_compliance_results"
      ],
      "priority": 1000,
      "template": {
        "settings": {
          "index": {
            "max_inner_result_window": 20000,
            "number_of_shards": 9,
            "max_terms_count": 4194304,
            "mapping":{
                "total_fields": {
                    "limit": "10000"
                }
            }
          }
        },
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": true,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "benchmarkID": {
              "type": "keyword"
            },
            "controlID":  {
              "type": "keyword"
            },
            "integrationID": {
              "type": "keyword"
            },
            "evaluatedAt":  {
              "type": "long"
            },
            "complianceStatus": {
              "type": "keyword"
            },
            "stateActive": {
              "type": "boolean"
            },
            "severity": {
              "type": "keyword"
            },
            "evaluator": {
              "type": "keyword"
            },
            "integrationType": {
              "type": "keyword"
            },
            "resourceID": {
              "type": "keyword"
            },
            "platformResourceID": {
              "type": "keyword"
            },
            "resourceName":  {
              "type": "keyword"
            },
            "resourceType": {
              "type": "keyword"
            },
            "reason": {
              "type": "keyword"
            },
            "costImpact": {
              "type": "double"
            },
            "runnerID": {
              "type": "long"
            },
            "controlPath": {
              "type": "keyword"
            },
            "complianceJobID": {
              "type": "long"
            },
            "lastUpdatedAt": {
                "type": "long"
            },
            "history": {
              "type": "object",
              "enabled": false
            }
          }
        }
      },
      "_meta": {
        "description": "Compliance Results index"
      }
    }
  compliance_summary_template.json: |-
    {
      "index_patterns": [
        "compliance_summary"
      ],
      "priority": 1000,
      "template": {
        "settings": {
          "index": {
            "max_inner_result_window": 20000,
            "number_of_shards": 9,
            "mapping":{
                "total_fields": {
                    "limit": "10000"
                }
            }
          }
        },
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": false,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "serviceName": {
              "type": "keyword"
            },
            "integrationType": {
              "type": "keyword"
            },
            "reportJobID": {
              "type": "long"
            },
            "describedAt": {
              "type": "long"
            },
            "totalResources": {
              "type": "long"
            },
            "totalCompliant": {
              "type": "long"
            },
            "compliancePercentage": {
              "type": "double"
            },
            "compliancySummaryType": {
              "type": "keyword"
            }
          }
        }
      },
      "_meta": {
        "description": "Compliance summary index"
      }
    }
  configure-es.sh: |-
    #!/bin/sh
  
    set -x
  
    apk update
    apk add --no-cache jq curl
  
    HTTP_PROTOCOL="${HTTP_METHOD:-https}"
    ES_HOST="${ES_HOST:-localhost}"
    ES_PORT="${ES_PORT:-9200}"
    ES_USER="${ES_USER:-elastic}"
  
    escurl() {
      METHOD="$1"
      HTTP_PATH="$2"
      BODY="$3"
  
      curl -X ${METHOD} -u "${ES_USER}:${ES_PASSWORD}" -k "${HTTP_PROTOCOL}://${ES_HOST}:${ES_PORT}/${HTTP_PATH}" -H 'Content-Type: application/json' -d "${BODY}"
    }
  
    STATUS=$(escurl GET '_cluster/health?pretty' | jq -r '.status')
    COUNTER=0
    while [ "$STATUS" != "green"  ] && [ "$STATUS" != "yellow" ] && [ "$COUNTER" -lt 10 ];
    do
        echo "Waiting for status to be GREEN or YELLOW. Sleeping for 10 seconds..."
        sleep 10
        STATUS=$(escurl GET '_cluster/health?pretty' | jq -r '.status')
        COUNTER=$((COUNTER+1))
    done
    if [ "$STATUS" != "green"  ] && [ "$STATUS" != "yellow" ]; then
        echo "Status is still ${STATUS}. Exiting..."
        exit 1
    fi
  
    echo "Status is now ${STATUS}. Proceeding..."
    sleep 10
  
    escurl PUT '_component_template/resource_component_template' @resource_component_template.json
    escurl PUT '_index_template/azure_resource_index_template' @azure_resource_index_template.json
    escurl PUT '_index_template/aws_resource_index_template' @aws_resource_index_template.json
    escurl PUT '_index_template/aws_iam_policy_index_template' @aws_iam_policy_index_template.json
    escurl PUT '_index_template/aws_iam_credentialreport_index_template' @aws_iam_credentialreport_index_template.json
    escurl PUT '_index_template/aws_lambda_function_index_template' @aws_lambda_function_index_template.json
    escurl PUT '_index_template/aws_lambda_functionversion_index_template' @aws_lambda_functionversion_index_template.json
    escurl PUT '_index_template/aws_securityhub_finding_index_template' @aws_securityhub_finding_index_template.json
    escurl PUT '_index_template/aws_secretsmanager_secret_index_template' @aws_secretsmanager_secret_index_template.json
    escurl PUT '_index_template/aws_glue_catalogtable_index_template' @aws_glue_catalogtable_index_template.json
    escurl PUT '_index_template/aws_athena_queryexecution_index_template' @aws_athena_queryexecution_index_template.json
    escurl PUT '_index_template/aws_certificatemanager_certificate_index_template' @aws_certificatemanager_certificate_index_template.json
    escurl PUT '_index_template/aws_cloudformation_stack_index_template' @aws_cloudformation_stack_index_template.json
    escurl PUT '_index_template/aws_ecr_repository_index_template' @aws_ecr_repository_index_template.json
    escurl PUT '_index_template/aws_ecs_service_index_template' @aws_ecs_service_index_template.json
    escurl PUT '_index_template/aws_ec2_instance_index_template' @aws_ec2_instance_index_template.json
    escurl PUT '_index_template/aws_accessanalyzer_analyzer_index_template' @aws_accessanalyzer_analyzer_index_template.json
    escurl PUT '_index_template/aws_wafv2_ipset_index_template' @aws_wafv2_ipset_index_template.json
    escurl PUT '_index_template/aws_rds_dbclusterparametergroup_index_template' @aws_rds_dbclusterparametergroup_index_template.json
    escurl PUT '_index_template/aws_ec2_routetable_index_template' @aws_ec2_routetable_index_template.json
    escurl PUT '_index_template/aws_s3_bucket_index_template' @aws_s3_bucket_index_template.json
    escurl PUT '_index_template/aws_wafv2_rulegroup_index_template' @aws_wafv2_rulegroup_index_template.json
    escurl PUT '_index_template/aws_wafv2_webacl_index_template' @aws_wafv2_webacl_index_template.json
    escurl PUT '_index_template/azure_virtualmachine_index_template' @azure_virtualmachine_index_template.json
    escurl PUT '_index_template/azure_network_networksecuritygroups_index_template' @azure_network_networksecuritygroups_index_template.json
    escurl PUT '_index_template/azure_virtualnetworks_subnets_index_template' @azure_virtualnetworks_subnets_index_template.json
    escurl PUT '_index_template/azure_documentdb_sqldatabases_index_template' @azure_documentdb_sqldatabases_index_template.json
    escurl PUT '_index_template/azure_network_frontdoors_index_template' @azure_network_frontdoors_index_template.json
    escurl PUT '_index_template/azure_logic_workflows_index_template' @azure_logic_workflows_index_template.json
    escurl PUT '_index_template/azure_network_loadbalancers_index_template' @azure_network_loadbalancers_index_template.json
    escurl PUT '_index_template/azure_network_routetables_index_template' @azure_network_routetables_index_template.json
    escurl PUT '_index_template/azure_network_virtualnetworks_index_template' @azure_network_virtualnetworks_index_template.json
    escurl PUT '_index_template/azure_compute_virtualmachines_index_template' @azure_compute_virtualmachines_index_template.json
    escurl PUT '_index_template/azure_compute_virtualmachinescalesets_index_template' @azure_compute_virtualmachinescalesets_index_template.json
    escurl PUT '_index_template/azure_dbformysql_servers_index_template' @azure_dbformysql_servers_index_template.json
    escurl PUT '_index_template/azure_dbforpostgresql_servers_index_template' @azure_dbforpostgresql_servers_index_template.json
    escurl PUT '_index_template/azure_sql_servers_index_template' @azure_sql_servers_index_template.json
    escurl PUT '_index_template/azure_web_plan_index_template' @azure_web_plan_index_template.json
    escurl PUT '_index_template/azure_web_sites_index_template' @azure_web_sites_index_template.json
    escurl PUT '_index_template/compliance_report_template' @compliance_report_template.json
    escurl PUT '_index_template/compliance_summary_template' @compliance_summary_template.json
    escurl PUT '_index_template/account_report_template' @account_report_template.json
    escurl PUT '_index_template/source_resource_summary_template' @source_resource_summary_template.json
    escurl PUT '_index_template/inventory_summary_template' @inventory_summary_template.json
    escurl PUT '_index_template/insights_template' @insights_template.json
    escurl PUT '_index_template/stack_insights_template' @stack_insights_template.json
    escurl PUT '_index_template/connection_summary_template' @connection_summary_template.json
    escurl PUT '_index_template/provider_summary_template' @provider_summary_template.json
    escurl PUT '_index_template/compliance_result_template' @compliance_result_template.json
    escurl PUT '_index_template/compliance_result_event_template' @compliance_result_event_template.json
    escurl PUT '_index_template/resource_findings_template' @resource_findings_template.json
    escurl PUT '_index_template/stack_findings_template' @stack_findings_template.json
    escurl PUT '_index_template/benchmark_summary_template' @benchmark_summary_template.json
    escurl PUT '_index_template/cost_summary_template' @cost_summary_template.json
  connection_summary_template.json: |-
    {
      "index_patterns": [
        "connection_summary"
      ],
      "priority": 1000,
      "template": {
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": true,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "report_type": {
              "type": "keyword"
            },
            "summarizer_job_id": {
              "type": "long"
            },
            "integration_id": {
              "type": "keyword"
            },
            "integration_type": {
              "type": "keyword"
            },
            "source_job_id": {
              "type": "long"
            },
            "described_at": {
              "type": "long"
            },
            "resource_count": {
              "type": "long"
            },
            "last_day_count": {
              "type": "long"
            },
            "last_week_count": {
              "type": "long"
            },
            "last_quarter_count": {
              "type": "long"
            },
            "last_year_count": {
              "type": "long"
            }
          }
        },
        "settings": {
          "index":{
            "max_inner_result_window": 20000,
            "refresh_interval": "60s",
            "number_of_shards": 9,
            "mapping":{
              "total_fields": {
                  "limit": "10000"
              }
            }
          }
        }
      },
      "_meta": {
        "description": "Connection summary index"
      }
    }
  cost_summary_template.json: |-
    {
      "index_patterns": [
        "cost_summary"
      ],
      "priority": 1000,
      "template": {
        "settings": {
          "index": {
            "max_inner_result_window": "10000",
            "refresh_interval": "60s",
            "number_of_shards": 9,
            "mapping":{
                "total_fields": {
                    "limit": "10000"
                }
            }
          }
        },
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": true,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "service_name": {
              "type": "keyword"
            },
            "account_id": {
              "type": "keyword"
            },
            "report_type": {
              "type": "keyword"
            },
            "period_end": {
              "type": "long"
            },
            "period_start": {
              "type": "long"
            },
            "integration_id": {
              "type": "keyword"
            },
            "source_type": {
              "type": "keyword"
            },
            "source_job_id": {
              "type": "long"
            },
            "resource_type": {
              "type": "keyword"
            },
            "cost_value": {
              "type": "double"
            },
            "cost": {
              "type": "object"
            }
          }
        }
      },
      "_meta": {
        "description": "Cost summary index"
      }
    }
  inventory_summary_template.json: |-
    {
      "index_patterns": [
        "inventory_summary"
      ],
      "priority": 1000,
      "template": {
        "settings": {
          "index": {
            "max_inner_result_window": "10000",
            "refresh_interval": "60s",
            "number_of_shards": 18,
            "mapping":{
              "total_fields": {
                "limit": "10000"
              },
              "nested_fields": {
                "limit": "10000"
              }
            }
          }
        },
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": true,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "date": {
                "match_mapping_type": "date",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "resource_id": {
              "type": "keyword"
            },
            "resource_name": {
              "type": "keyword"
            },
            "integration_type": {
              "type": "keyword"
            },
            "resource_type": {
              "type": "keyword"
            },
            "platform_id": {
              "type": "keyword"
            },
            "integration_id": {
              "type": "keyword"
            },
            "described_by": {
              "type": "keyword"
            },
            "described_at": {
              "type": "long"
            },
            "is_common": {
              "type": "boolean"
            },
            "metadata": {
              "type": "nested",
              "properties": {
                "parameters": {
                  "type": "keyword"
                }
              }
            },
            "canonical_tags": {
              "type": "nested",
              "properties": {
                "key": {
                  "type": "keyword"
                },
                "value": {
                  "type": "keyword"
                }
              }
            }
          }
        }
      },
      "_meta": {
        "description": "Inventory summary index"
      }
    }
  provider_summary_template.json: |-
    {
      "index_patterns": [
        "provider_summary"
      ],
      "priority": 1000,
      "template": {
        "settings": {
          "index": {
            "max_inner_result_window": "10000",
            "refresh_interval": "60s",
            "number_of_shards": 9,
            "mapping":{
                "total_fields": {
                    "limit": "10000"
                }
            }
          }
        },
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": true,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "report_type": {
              "type": "keyword"
            },
            "summarizer_job_id": {
              "type": "long"
            },
            "integration_id": {
              "type": "keyword"
            },
            "source_type": {
              "type": "keyword"
            },
            "source_job_id": {
              "type": "long"
            },
            "described_at": {
              "type": "long"
            },
            "resource_count": {
              "type": "long"
            },
            "last_day_count": {
              "type": "long"
            },
            "last_week_count": {
              "type": "long"
            },
            "last_quarter_count": {
              "type": "long"
            },
            "last_year_count": {
              "type": "long"
            }
          }
        }
      },
      "_meta": {
        "description": "Provider summary index"
      }
    }
  rc_analytics_region_summary_template.json: |-
    {
      "index_patterns": [
        "rc_analytics_region_summary"
      ],
      "priority": 1000,
      "template": {
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": true,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "region": {
              "type": "keyword"
            },
            "connection_id": {
              "type": "keyword"
            },
            "connector": {
              "type": "keyword"
            },
            "evaluated_at": {
              "type": "long"
            },
            "metric_id": {
              "type": "keyword"
            },
            "resource_count": {
              "type": "long"
            },
            "resource_collection": {
              "type": "keyword"
            }
          }
        },
        "settings": {
          "index":{
            "max_inner_result_window": 20000,
            "refresh_interval": "60s",
            "number_of_shards": 9,
            "mapping":{
              "total_fields": {
                "limit": "10000"
              }
            }
          }
        }
      },
      "_meta": {
        "description": "Analytics Region Summary Index"
      }
    }
  rc_insights_template.json: |-
    {
      "index_patterns": [
        "rc_insights"
      ],
      "priority": 1000,
      "template": {
        "settings": {
          "index": {
            "max_inner_result_window": 20000,
            "number_of_shards": 9,
            "mapping":{
                "total_fields": {
                    "limit": "10000"
                }
            }
          }
        },
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": false,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "job_id": {
              "type": "long"
            },
            "insight_id": {
              "type": "long"
            },
            "integration_id": {
              "type": "keyword"
            },
            "integration_type": {
              "type": "keyword"
            },
            "provider_id": {
              "type": "keyword"
            },
            "query": {
              "type": "keyword"
            },
            "description": {
              "type": "keyword"
            },
            "schedule_uuid": {
              "type": "keyword"
            },
            "executed_at": {
              "type": "long"
            },
            "result": {
              "type": "long"
            },
            "resource_type": {
              "type": "keyword"
            },
            "resource_collection": {
              "type": "keyword"
            }
          }
        }
      },
      "_meta": {
        "description": "Insight index"
      }
    }
  resource_component_template.json: |-
    {
        "template": {
            "settings": {
                "index":{
                    "mapping":{
                        "total_fields": {
                            "limit": "10000"
                        },
                        "nested_fields": {
                            "limit": "10000"
                        }
                    }
                }
            },
            "mappings": {
                "_source": {
                    "enabled": true
                },
                "dynamic": true,
                "dynamic_templates": [
                    {
                        "strings_as_keyword": {
                            "match_mapping_type": "string",
                            "mapping": {
                                "type": "keyword"
                            }
                        }
                    },
                    {
                        "double": {
                            "match_mapping_type": "double",
                            "mapping": {
                                "type": "double",
                                "ignore_malformed": true
                            }
                        }
                    },
                    {
                        "long": {
                            "match_mapping_type": "long",
                            "mapping": {
                                "type": "long",
                                "ignore_malformed": true
                            }
                        }
                    }
                ],
                "properties": {
                    "id": {
                        "type": "keyword"
                    },
                    "resource_type": {
                        "type": "keyword"
                    },
                    "source_type": {
                        "type": "keyword"
                    },
                    "resource_job_id": {
                        "type": "long"
                    },
                    "source_job_id": {
                        "type": "long"
                    },
                    "description": {
                        "type": "object"
                    },
                    "metadata": {
                        "type": "object",
                        "dynamic": true
                    },
                    "canonical_tags": {
                        "type": "nested",
                        "properties": {
                            "key": {
                                "type": "keyword"
                            },
                            "value": {
                                "type": "keyword"
                            }
                        }
                    }
                }
            }
        }
    }
  resource_findings_template.json: |-
    {
      "index_patterns": [
        "resource_findings"
      ],
      "priority": 1000,
      "template": {
        "settings": {
          "index": {
            "max_inner_result_window": 100000,
            "number_of_shards": 9,
            "max_terms_count": 4194304,
            "mapping":{
                "total_fields": {
                    "limit": "30000"
                },
                "nested_fields": {
                    "limit": "1000"
                }
            }
          }
        },
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": true,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "es_id": {
              "type": "keyword"
            },
            "es_index":  {
              "type": "keyword"
            },
            "platformResourceID": {
              "type": "keyword"
            },
            "resourceType": {
              "type": "keyword"
            },
            "resourceName":  {
              "type": "keyword"
            },
            "resourceLocation":  {
              "type": "keyword"
            },
            "integrationType": {
                "type": "keyword"
            },
            "complianceResults": {
              "type": "nested",
              "include_in_parent": true,
              "properties": {
                "benchmarkID": {
                  "type": "keyword"
                },
                "controlID":  {
                  "type": "keyword"
                },
                "integrationID": {
                  "type": "keyword"
                },
                "platformResourceID": {
                  "type": "keyword"
                },
                "evaluatedAt":  {
                  "type": "long"
                },
                "complianceStatus": {
                  "type": "keyword"
                },
                "stateActive": {
                  "type": "boolean"
                },
                "severity": {
                  "type": "keyword"
                },
                "evaluator": {
                  "type": "keyword"
                },
                "integrationType": {
                  "type": "keyword"
                },
                "resourceID": {
                  "type": "keyword"
                },
                "resourceName":  {
                  "type": "keyword"
                },
                "resourceType": {
                  "type": "keyword"
                },
                "reason": {
                  "type": "keyword"
                },
                "complianceJobID": {
                  "type": "long"
                },
                "runnerID": {
                  "type": "long"
                },
                "controlPath": {
                  "type": "keyword"
                },
                "costImpact": {
                  "type": "double"
                },
                "lastUpdatedAt": {
                  "type": "long"
                }
              }
            },
            "resourceCollection": {
              "type": "keyword"
            },
  
            "jobId": {
              "type": "long"
            },
            "evaluatedAt":  {
              "type": "long"
            }
          }
        }
      },
      "_meta": {
        "description": "Resource Findings index"
      }
    }
  sbom_vulnerabilities_template.json: |-
    {
      "index_patterns": ["sbom_vulnerabilities"],
      "priority": 1000,
      "template": {
        "settings": {
          "number_of_shards": 1,
          "number_of_replicas": 1
        },
        "mappings": {
          "properties": {
            "platform_id": { "type": "keyword" },
            "resource_id": { "type": "keyword" },
            "resource_name": { "type": "text" },
            "result_type": { "type": "keyword" },
            "task_type": { "type": "keyword" },
            "described_at": { "type": "date", "format": "epoch_second" },
            "described_by": { "type": "keyword" },
            "es_id": { "type": "keyword" },
            "es_index": { "type": "keyword" },
            "metadata": {
              "type": "object",
              "enabled": false
            },
            "Description": {
              "properties": {
                "image_url": { "type": "keyword" },
                "artifact_id": { "type": "keyword" },
                "sbom_format": { "type": "keyword" },
                "scan_timestamp": { "type": "date" },
                "results": {
                  "type": "object",
                  "enabled": false
                },
                "summary": {
                  "type": "object",
                  "enabled": false
                }
              }
            }
          }
        }
      }
    }
  source_resource_summary_template.json: |-
    {
      "index_patterns": [
        "source_resources_summary"
      ],
      "priority": 1000,
      "template": {
        "settings": {
          "index":{
              "mapping":{
                  "total_fields": {
                      "limit": "10000"
                  }
              }
          }
        },
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": true,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "integration_id": {
              "type": "keyword"
            },
            "service_name": {
              "type": "keyword"
            },
            "source_type": {
              "type": "keyword"
            },
            "source_job_id": {
              "type": "long"
            },
            "compliance_job_id": {
              "type": "long"
            },
            "described_at": {
              "type": "long"
            },
            "location_distribution": {
              "type": "object",
              "dynamic": true
            },
            "resource_count": {
              "type": "long"
            },
            "compliant_resource_count": {
              "type": "long"
            },
            "non_compliant_resource_count": {
              "type": "long"
            },
            "report_type": {
              "type": "keyword"
            },
            "executed_at": {
              "type": "long"
            }
          }
        }
      },
      "_meta": {
        "description": "Source Resources Summary index"
      }
    }
  stack_findings_template.json: |-
    {
      "index_patterns": [
        "stacks-findings"
      ],
      "priority": 1000,
      "template": {
        "settings": {
          "index": {
            "max_inner_result_window": 20000,
            "number_of_shards": 9,
            "mapping":{
                "total_fields": {
                    "limit": "10000"
                }
            }
          }
        },
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": true,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "ID":  {
              "type": "keyword"
            },
            "complianceJobID": {
              "type": "long"
            },
            "scheduleJobID":  {
              "type": "long"
            },
            "resourceID": {
              "type": "keyword"
            },
            "resourceName":  {
              "type": "keyword"
            },
            "resourceType": {
              "type": "keyword"
            },
            "serviceName":  {
              "type": "keyword"
            },
            "category": {
              "type": "keyword"
            },
            "resourceLocation":  {
              "type": "keyword"
            },
            "reason": {
              "type": "keyword"
            },
            "status":  {
              "type": "keyword"
            },
            "describedAt": {
              "type": "long"
            },
            "evaluatedAt":  {
              "type": "long"
            },
            "sourceID": {
              "type": "keyword"
            },
            "connectionProviderID":  {
              "type": "keyword"
            },
            "connectionProviderName": {
              "type": "keyword"
            },
            "sourceType":  {
              "type": "keyword"
            },
            "benchmarkID": {
              "type": "keyword"
            },
            "policyID":  {
              "type": "keyword"
            },
            "severity": {
              "type": "keyword"
            },
            "result": {
              "type": "keyword"
            },
            "connector": {
              "type": "keyword"
            },
            "stateActive": {
              "type": "boolean"
            },
            "connectionID": {
              "type": "keyword"
            },
            "evaluator": {
              "type": "keyword"
            }
          }
        }
      },
      "_meta": {
        "description": "Findings index"
      }
    }
  stack_insights_template.json: |-
    {
      "index_patterns": [
        "stacks-insights"
      ],
      "priority": 1000,
      "template": {
        "settings": {
          "index": {
            "max_inner_result_window": 20000,
            "number_of_shards": 9,
            "mapping":{
                "total_fields": {
                    "limit": "10000"
                }
            }
          }
        },
        "mappings": {
          "_source": {
            "enabled": true
          },
          "dynamic": false,
          "dynamic_templates": [
            {
              "strings_as_keyword": {
                "match_mapping_type": "string",
                "mapping": {
                  "type": "keyword"
                }
              }
            },
            {
              "double": {
                "match_mapping_type": "double",
                "mapping": {
                  "type": "double",
                  "ignore_malformed": true
                }
              }
            },
            {
              "long": {
                "match_mapping_type": "long",
                "mapping": {
                  "type": "long",
                  "ignore_malformed": true
                }
              }
            }
          ],
          "properties": {
            "job_id": {
              "type": "long"
            },
            "insight_id": {
              "type": "long"
            },
            "integration_id": {
              "type": "keyword"
            },
            "provider": {
              "type": "keyword"
            },
            "account_id": {
              "type": "keyword"
            },
            "query": {
              "type": "keyword"
            },
            "description": {
              "type": "keyword"
            },
            "schedule_uuid": {
              "type": "keyword"
            },
            "executed_at": {
              "type": "long"
            },
            "result": {
              "type": "long"
            },
            "resource_type": {
              "type": "keyword"
            }
          }
        }
      },
      "_meta": {
        "description": "Insight index"
      }
    }
---
# Source: opensecurity/templates/nginx/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: proxy-pass-nginx-config
  namespace: opensecurity
data:
  nginx.conf: |
    events {}
    http {
      log_format main '$remote_addr - $remote_user [$time_local] "$request" "$X_Platform_WorkspaceID" "$X_Platform_WorkspaceName" "$X_Platform_UserId" "$X_Platform_UserRole" "$X_Platform_UserConnectionsScope" '
                '$status $body_bytes_sent "$http_referer" '
                '"$http_user_agent" "$http_x_forwarded_for"';

      server {
        listen 80;

        auth_request /auth/api/v1/check;
        auth_request_set $X_Platform_WorkspaceID $upstream_http_X_Platform_WorkspaceID;
        auth_request_set $X_Platform_WorkspaceName $upstream_http_X_Platform_WorkspaceName;
        auth_request_set $X_Platform_UserId $upstream_http_X_Platform_UserId;
        auth_request_set $X_Platform_UserRole $upstream_http_X_Platform_UserRole;
        auth_request_set $X_Platform_UserConnectionsScope $upstream_http_X_Platform_UserConnectionsScope;

        access_log /var/log/nginx/access.log main;


        location /main/integration {
          if ($request_method = 'OPTIONS') {
            add_header 'Access-Control-Allow-Origin' '*';
            add_header 'Access-Control-Allow-Credentials' 'true';
            add_header 'Access-Control-Allow-Methods' '*';
            add_header 'Access-Control-Allow-Headers' '*';
            add_header 'Access-Control-Max-Age' 86400;
            add_header 'Content-Type' 'text/plain charset=UTF-8';
            add_header 'Content-Length' 0;
            return 204; break;
          }
          rewrite ^/main/integration(.*) $1 break;

          proxy_pass http://integration-service.opensecurity.svc.cluster.local:8000;
          proxy_ssl_verify off;
          proxy_set_header X-Real-IP $remote_addr;
          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          proxy_set_header X-Forwarded-Proto $scheme;
          proxy_set_header X-Forwarded-Host $host;
          proxy_set_header X-Forwarded-Port $server_port;
          proxy_set_header X-Platform-WorkspaceID $X_Platform_WorkspaceID;
          proxy_set_header X-Platform-WorkspaceName $X_Platform_WorkspaceName;
          proxy_set_header X-Platform-UserId $X_Platform_UserId;
          proxy_set_header X-Platform-UserRole $X_Platform_UserRole;
          proxy_set_header X-Platform-UserConnectionsScope $X_Platform_UserConnectionsScope;

          proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
        }

        location /main/tasks {
          if ($request_method = 'OPTIONS') {
            add_header 'Access-Control-Allow-Origin' '*';
            add_header 'Access-Control-Allow-Credentials' 'true';
            add_header 'Access-Control-Allow-Methods' '*';
            add_header 'Access-Control-Allow-Headers' '*';
            add_header 'Access-Control-Max-Age' 86400;
            add_header 'Content-Type' 'text/plain charset=UTF-8';
            add_header 'Content-Length' 0;
            return 204; break;
          }
          rewrite ^/main/tasks(.*) $1 break;

          proxy_pass http://task-service.opensecurity.svc.cluster.local:8001;
          proxy_ssl_verify off;
          proxy_set_header X-Real-IP $remote_addr;
          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          proxy_set_header X-Forwarded-Proto $scheme;
          proxy_set_header X-Forwarded-Host $host;
          proxy_set_header X-Forwarded-Port $server_port;
          proxy_set_header X-Platform-WorkspaceID $X_Platform_WorkspaceID;
          proxy_set_header X-Platform-WorkspaceName $X_Platform_WorkspaceName;
          proxy_set_header X-Platform-UserId $X_Platform_UserId;
          proxy_set_header X-Platform-UserRole $X_Platform_UserRole;
          proxy_set_header X-Platform-UserConnectionsScope $X_Platform_UserConnectionsScope;

          proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
        }

        location /main/core {
          if ($request_method = 'OPTIONS') {
            add_header 'Access-Control-Allow-Origin' '*';
            add_header 'Access-Control-Allow-Credentials' 'true';
            add_header 'Access-Control-Allow-Methods' '*';
            add_header 'Access-Control-Allow-Headers' '*';
            add_header 'Access-Control-Max-Age' 86400;
            add_header 'Content-Type' 'text/plain charset=UTF-8';
            add_header 'Content-Length' 0;
            return 204; break;
          }

          rewrite ^/main/core(.*) $1 break;

          proxy_pass http://core-service.opensecurity.svc.cluster.local:6251;
          proxy_ssl_verify off;
          proxy_set_header X-Real-IP $remote_addr;
          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          proxy_set_header X-Forwarded-Proto $scheme;
          proxy_set_header X-Forwarded-Host $host;
          proxy_set_header X-Forwarded-Port $server_port;
          proxy_set_header X-Platform-WorkspaceID $X_Platform_WorkspaceID;
          proxy_set_header X-Platform-WorkspaceName $X_Platform_WorkspaceName;
          proxy_set_header X-Platform-UserId $X_Platform_UserId;
          proxy_set_header X-Platform-UserRole $X_Platform_UserRole;
          proxy_set_header X-Platform-UserConnectionsScope $X_Platform_UserConnectionsScope;

          proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
        }
        location /main/compliance {
          if ($request_method = 'OPTIONS') {
            add_header 'Access-Control-Allow-Origin' '*';
            add_header 'Access-Control-Allow-Credentials' 'true';
            add_header 'Access-Control-Allow-Methods' '*';
            add_header 'Access-Control-Allow-Headers' '*';
            add_header 'Access-Control-Max-Age' 86400;
            add_header 'Content-Type' 'text/plain charset=UTF-8';
            add_header 'Content-Length' 0;
            return 204; break;
          }

          rewrite ^/main/compliance(.*) $1 break;

          proxy_pass http://compliance-service.opensecurity.svc.cluster.local:7251;
          proxy_ssl_verify off;
          proxy_set_header X-Real-IP $remote_addr;
          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          proxy_set_header X-Forwarded-Proto $scheme;
          proxy_set_header X-Forwarded-Host $host;
          proxy_set_header X-Forwarded-Port $server_port;
          proxy_set_header X-Platform-WorkspaceID $X_Platform_WorkspaceID;
          proxy_set_header X-Platform-WorkspaceName $X_Platform_WorkspaceName;
          proxy_set_header X-Platform-UserId $X_Platform_UserId;
          proxy_set_header X-Platform-UserRole $X_Platform_UserRole;
          proxy_set_header X-Platform-UserConnectionsScope $X_Platform_UserConnectionsScope;

          proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
        }

        location /main/schedule {
          if ($request_method = 'OPTIONS') {
            add_header 'Access-Control-Allow-Origin' '*';
            add_header 'Access-Control-Allow-Credentials' 'true';
            add_header 'Access-Control-Allow-Methods' '*';
            add_header 'Access-Control-Allow-Headers' '*';
            add_header 'Access-Control-Max-Age' 86400;
            add_header 'Content-Type' 'text/plain charset=UTF-8';
            add_header 'Content-Length' 0;
            return 204; break;
          }

          rewrite ^/main/schedule(.*) $1 break;

          proxy_pass http://scheduler.opensecurity.svc.cluster.local:5251;
          proxy_ssl_verify off;
          proxy_set_header X-Real-IP $remote_addr;
          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          proxy_set_header X-Forwarded-Proto $scheme;
          proxy_set_header X-Forwarded-Host $host;
          proxy_set_header X-Forwarded-Port $server_port;
          proxy_set_header X-Platform-WorkspaceID $X_Platform_WorkspaceID;
          proxy_set_header X-Platform-WorkspaceName $X_Platform_WorkspaceName;
          proxy_set_header X-Platform-UserId $X_Platform_UserId;
          proxy_set_header X-Platform-UserRole $X_Platform_UserRole;
          proxy_set_header X-Platform-UserConnectionsScope $X_Platform_UserConnectionsScope;

          proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
        }

        location /main/auth {
          if ($request_method = 'OPTIONS') {
            add_header 'Access-Control-Allow-Origin' '*';
            add_header 'Access-Control-Allow-Credentials' 'true';
            add_header 'Access-Control-Allow-Methods' '*';
            add_header 'Access-Control-Allow-Headers' '*';
            add_header 'Access-Control-Max-Age' 86400;
            add_header 'Content-Type' 'text/plain charset=UTF-8';
            add_header 'Content-Length' 0;
            return 204; break;
          }

          rewrite ^/main/auth(.*) $1 break;

          proxy_pass http://auth-service.opensecurity.svc.cluster.local:8251;
          proxy_ssl_verify off;
          proxy_set_header X-Real-IP $remote_addr;
          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          proxy_set_header X-Forwarded-Proto $scheme;
          proxy_set_header X-Forwarded-Host $host;
          proxy_set_header X-Forwarded-Port $server_port;
          proxy_set_header X-Platform-WorkspaceID $X_Platform_WorkspaceID;
          proxy_set_header X-Platform-WorkspaceName $X_Platform_WorkspaceName;
          proxy_set_header X-Platform-UserId $X_Platform_UserId;
          proxy_set_header X-Platform-UserRole $X_Platform_UserRole;
          proxy_set_header X-Platform-UserConnectionsScope $X_Platform_UserConnectionsScope;

          proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
        }

        location /main/workspace/api/v3/configured/status {
          if ($request_method = 'OPTIONS') {
            add_header 'Access-Control-Allow-Origin' '*';
            add_header 'Access-Control-Allow-Credentials' 'true';
            add_header 'Access-Control-Allow-Methods' '*';
            add_header 'Access-Control-Allow-Headers' '*';
            add_header 'Access-Control-Max-Age' 86400;
            add_header 'Content-Type' 'text/plain charset=UTF-8';
            add_header 'Content-Length' 0;
            return 204; break;
          }

          auth_request off;
          proxy_set_header X-Platform-WorkspaceID "";
          proxy_set_header X-Platform-WorkspaceName "";
          proxy_set_header X-Platform-UserId "";
          proxy_set_header X-Platform-UserRole "";
          proxy_set_header X-Platform-UserConnectionsScope "";

          rewrite ^/main/workspace(.*) $1 break;

          proxy_pass http://auth-service.opensecurity.svc.cluster.local:8251;
          proxy_ssl_verify off;
          proxy_set_header X-Original-URI $request_uri;
          proxy_set_header X-Original-Method $request_method;
          proxy_set_header X-Real-IP $remote_addr;
          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          proxy_set_header X-Forwarded-Proto $scheme;
          proxy_set_header X-Forwarded-Host $host;
          proxy_set_header X-Forwarded-Port $server_port;

          proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
        }

        location /auth/api/v1/check {
            if ($request_method = 'OPTIONS') {
            add_header 'Access-Control-Allow-Origin' '*';
            add_header 'Access-Control-Allow-Credentials' 'true';
            add_header 'Access-Control-Allow-Methods' '*';
            add_header 'Access-Control-Allow-Headers' '*';
            add_header 'Access-Control-Max-Age' 86400;
            add_header 'Content-Type' 'text/plain charset=UTF-8';
            add_header 'Content-Length' 0;
            return 204; break;
          }

            internal;
            auth_request off;
            proxy_set_header X-Platform-WorkspaceID "";
            proxy_set_header X-Platform-WorkspaceName "";
            proxy_set_header X-Platform-UserId "";
            proxy_set_header X-Platform-UserRole "";
            proxy_set_header X-Platform-UserConnectionsScope "";

            rewrite ^/auth/api/v1/check$ /api/v1/check break;

            proxy_pass http://auth-service.opensecurity.svc.cluster.local:8251;
            proxy_pass_request_body off;
            proxy_set_header Content-Length "";
            proxy_set_header X-Original-URI $request_uri;
            proxy_set_header X-Original-Method $request_method;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header X-Forwarded-Host $host;
            proxy_set_header X-Forwarded-Port $server_port;

            proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
        }

         location /auth/api/v1/token {
          if ($request_method = 'OPTIONS') {
            add_header 'Access-Control-Allow-Origin' '*';
            add_header 'Access-Control-Allow-Credentials' 'true';
            add_header 'Access-Control-Allow-Methods' '*';
            add_header 'Access-Control-Allow-Headers' '*';
            add_header 'Access-Control-Max-Age' 86400;
            add_header 'Content-Type' 'text/plain charset=UTF-8';
            add_header 'Content-Length' 0;
            return 204; break;
          }
            auth_request off;
            proxy_set_header X-Platform-WorkspaceID "";
            proxy_set_header X-Platform-WorkspaceName "";
            proxy_set_header X-Platform-UserId "";
            proxy_set_header X-Platform-UserRole "";
            proxy_set_header X-Platform-UserConnectionsScope "";

            rewrite ^/auth/api/v1/token$ /api/v1/token break;

            proxy_pass http://auth-service.opensecurity.svc.cluster.local:8251;
            proxy_ssl_verify off;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header X-Forwarded-Host $host;
            proxy_set_header X-Forwarded-Port $server_port;

            proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
        }
        

        location /dex {
          if ($request_method = 'OPTIONS') {
            add_header 'Access-Control-Allow-Origin' '*';
            add_header 'Access-Control-Allow-Credentials' 'true';
            add_header 'Access-Control-Allow-Methods' '*';
            add_header 'Access-Control-Allow-Headers' '*';
            add_header 'Access-Control-Max-Age' 86400;
            add_header 'Content-Type' 'text/plain charset=UTF-8';
            add_header 'Content-Length' 0;
            return 204; break;
          }

          auth_request off;
          proxy_set_header X-Platform-WorkspaceID "";
          proxy_set_header X-Platform-WorkspaceName "";
          proxy_set_header X-Platform-UserId "";
          proxy_set_header X-Platform-UserRole "";
          proxy_set_header X-Platform-UserConnectionsScope "";


          proxy_pass http://opensecurity-dex.opensecurity.svc.cluster.local:5556;
          proxy_ssl_verify off;
          proxy_set_header X-Real-IP $remote_addr;
          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          proxy_set_header X-Forwarded-Proto $scheme;
          proxy_set_header X-Forwarded-Host $host;
          proxy_set_header X-Forwarded-Port $server_port;

          proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
        }

        location / {
          if ($request_method = 'OPTIONS') {
            add_header 'Access-Control-Allow-Origin' '*';
            add_header 'Access-Control-Allow-Credentials' 'true';
            add_header 'Access-Control-Allow-Methods' '*';
            add_header 'Access-Control-Allow-Headers' '*';
            add_header 'Access-Control-Max-Age' 86400;
            add_header 'Content-Type' 'text/plain charset=UTF-8';
            add_header 'Content-Length' 0;
            return 204; break;
          }

          auth_request off;
          proxy_set_header X-Platform-WorkspaceID "";
          proxy_set_header X-Platform-WorkspaceName "";
          proxy_set_header X-Platform-UserId "";
          proxy_set_header X-Platform-UserRole "";
          proxy_set_header X-Platform-UserConnectionsScope "";

          proxy_pass http://web-ui-svc.opensecurity.svc.cluster.local:7298;
          proxy_ssl_verify off;
          proxy_set_header X-Real-IP $remote_addr;
          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          proxy_set_header X-Forwarded-Proto $scheme;
          proxy_set_header X-Forwarded-Host $host;
          proxy_set_header X-Forwarded-Port $server_port;

          proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
        }
      }
    }
---
# Source: opensecurity/templates/post-install-configuration/job.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: migrator-config
  namespace: opensecurity
data:

  metadata.json: |
    [
      {"key": "workspace_date_time_format", "type": "string", "value": "1900-01-02"},
      {"key": "workspace_debug_mode", "type": "bool", "value": "FALSE"},
      {"key": "workspace_time_window", "type": "string", "value": "30d"},
      {"key": "asset_management_enabled", "type": "bool", "value": "TRUE"},
      {"key": "compliance_enabled", "type": "bool", "value": "TRUE"},
      {"key": "product_management_enabled", "type": "bool", "value": "TRUE"},
      {"key": "allow_invite", "type": "bool", "value": "TRUE"},
      {"key": "workspace_key_support", "type": "bool", "value": "TRUE"},
      {"key": "workspace_max_keys", "type": "int", "value": "3"},
      {"key": "allowed_email_domains", "type": "string", "value": ""},
      {"key": "auto_discovery_method", "type": "string", "value": "scheduled"},
      {"key": "full_discovery_job_interval", "type": "int", "value": "48"},
      {"key": "cost_discovery_job_interval", "type": "int", "value": "24"},
      {"key": "describe_job_interval", "type": "int", "value": "8"},
      {"key": "health_check_job_interval", "type": "int", "value": "60"},
      {"key": "insight_job_interval", "type": "int", "value": "2"},
      {"key": "metrics_job_interval", "type": "int", "value": "2"},
      {"key": "compliance_job_interval", "type": "int", "value": "24"},
      {"key": "data_retention_duration", "type": "int", "value": "366"},
      {"key": "connection_limit", "type": "int", "value": "1000"},
      {"key": "user_limit", "type": "int", "value": "1000"},
      {"key": "analytics_git_url", "type": "string", "value": "https://github.com/opengovern/platform-configuration"},
      {"key": "asset_discovery_aws_policy_arns", "type": "string", "value": "arn:aws:iam::aws:policy/SecurityAudit,arn:aws:iam::aws:policy/ReadOnlyAccess"},
      {"key": "spend_discovery_aws_policy_arns", "type": "string", "value": "arn:aws:iam::aws:policy/AWSBillingReadOnlyAccess"},
      {"key": "asset_discovery_azure_role_ids", "type": "string", "value": "/subscriptions/%s/providers/Microsoft.Authorization/roleDefinitions/acdd72a7-3385-48ef-bd42-f606fba81ae7"},
      {"key": "spend_discovery_azure_role_ids", "type": "string", "value": "/subscriptions/%s/providers/Microsoft.Authorization/roleDefinitions/fa23ad8b-c56e-40d8-ac0c-ce449e1d2c64"},
      {"key": "spend_discovery_azure_role_ids", "type": "string", "value": "/subscriptions/%s/providers/Microsoft.Authorization/roleDefinitions/fa23ad8b-c56e-40d8-ac0c-ce449e1d2c64"},
      {"key": "aws_discovery_required_only", "type": "bool", "value": "true"},
      {"key": "azure_discovery_required_only", "type": "bool", "value": "true"},
      {"key": "asset_discovery_enabled", "type": "bool", "value": "true"},
      {"key": "spend_discovery_enabled", "type": "bool", "value": "true"},
      {"key": "customization_enabled", "type": "bool", "value": "true"}
    ]

  chat_prompt.txt: |
    Prompt

  main_prompt.txt: |
    Prompt

  assets_chat_prompt.txt: |
    Prompt

  assets_main_prompt.txt: |
    Prompt

  score_chat_prompt.txt: |
    TODO
  score_main_prompt.txt: |
    Prompt

  compliance_chat_prompt.txt: |
    Prompt

  compliance_main_prompt.txt: |
    Prompt
---
# Source: opensecurity/templates/post-install-configuration/job.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: inventory-data-config
  namespace: opensecurity
data:
  {}
---
# Source: opensecurity/templates/version.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: platform-version
  namespace: opensecurity
data:
  version: "2.76.20"
---
# Source: opensecurity/templates/web-ui-service/web-ui-deployment.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: web-ui-env
  namespace: opensecurity
  labels:
    app: web-ui
data:
  env-config.js: |
    window.__RUNTIME_CONFIG__ = {
    NODE_ENV: "prod",
    REACT_APP_RUNTIME_ENVIRONMENT: "production",
    REACT_APP_BASE_URL: "https://og.app.domain",
    REACT_APP_AUTH_BASE_URL: "https://og.app.domain",
    REACT_APP_SHOW_COMPLIANCE: "true",
    };
---
# Source: opensecurity/charts/keda/templates/crds/crd-cloudeventsources.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.14.0
  labels:
    app.kubernetes.io/name: keda-operator    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
  name: cloudeventsources.eventing.keda.sh
spec:
  group: eventing.keda.sh
  names:
    kind: CloudEventSource
    listKind: CloudEventSourceList
    plural: cloudeventsources
    singular: cloudeventsource
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.conditions[?(@.type=="Active")].status
      name: Active
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: CloudEventSource defines how a KEDA event will be sent to event
          sink
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: CloudEventSourceSpec defines the spec of CloudEventSource
            properties:
              authenticationRef:
                description: |-
                  AuthenticationRef points to the TriggerAuthentication or ClusterTriggerAuthentication object that
                  is used to authenticate the scaler with the environment
                properties:
                  kind:
                    description: Kind of the resource being referred to. Defaults
                      to TriggerAuthentication.
                    type: string
                  name:
                    type: string
                required:
                - name
                type: object
              clusterName:
                type: string
              destination:
                description: Destination defines the various ways to emit events
                properties:
                  azureEventGridTopic:
                    properties:
                      endpoint:
                        type: string
                    required:
                    - endpoint
                    type: object
                  http:
                    properties:
                      uri:
                        type: string
                    required:
                    - uri
                    type: object
                type: object
              eventSubscription:
                description: EventSubscription defines filters for events
                properties:
                  excludedEventTypes:
                    items:
                      description: CloudEventType contains the list of cloudevent
                        types
                      enum:
                      - keda.scaledobject.ready.v1
                      - keda.scaledobject.failed.v1
                      type: string
                    type: array
                  includedEventTypes:
                    items:
                      description: CloudEventType contains the list of cloudevent
                        types
                      enum:
                      - keda.scaledobject.ready.v1
                      - keda.scaledobject.failed.v1
                      type: string
                    type: array
                type: object
            required:
            - destination
            type: object
          status:
            description: CloudEventSourceStatus defines the observed state of CloudEventSource
            properties:
              conditions:
                description: Conditions an array representation to store multiple
                  Conditions
                items:
                  description: Condition to store the condition state
                  properties:
                    message:
                      description: A human readable message indicating details about
                        the transition.
                      type: string
                    reason:
                      description: The reason for the condition's last transition.
                      type: string
                    status:
                      description: Status of the condition, one of True, False, Unknown.
                      type: string
                    type:
                      description: Type of condition
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: opensecurity/charts/keda/templates/crds/crd-clustertriggerauthentications.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.14.0
  labels:
    app.kubernetes.io/name: keda-operator    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
  name: clustertriggerauthentications.keda.sh
spec:
  group: keda.sh
  names:
    kind: ClusterTriggerAuthentication
    listKind: ClusterTriggerAuthenticationList
    plural: clustertriggerauthentications
    shortNames:
    - cta
    - clustertriggerauth
    singular: clustertriggerauthentication
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.podIdentity.provider
      name: PodIdentity
      type: string
    - jsonPath: .spec.secretTargetRef[*].name
      name: Secret
      type: string
    - jsonPath: .spec.env[*].name
      name: Env
      type: string
    - jsonPath: .spec.hashiCorpVault.address
      name: VaultAddress
      type: string
    - jsonPath: .status.scaledobjects
      name: ScaledObjects
      priority: 1
      type: string
    - jsonPath: .status.scaledjobs
      name: ScaledJobs
      priority: 1
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ClusterTriggerAuthentication defines how a trigger can authenticate
          globally
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: TriggerAuthenticationSpec defines the various ways to authenticate
            properties:
              awsSecretManager:
                description: AwsSecretManager is used to authenticate using AwsSecretManager
                properties:
                  credentials:
                    properties:
                      accessKey:
                        properties:
                          valueFrom:
                            properties:
                              secretKeyRef:
                                properties:
                                  key:
                                    type: string
                                  name:
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                            required:
                            - secretKeyRef
                            type: object
                        required:
                        - valueFrom
                        type: object
                      accessSecretKey:
                        properties:
                          valueFrom:
                            properties:
                              secretKeyRef:
                                properties:
                                  key:
                                    type: string
                                  name:
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                            required:
                            - secretKeyRef
                            type: object
                        required:
                        - valueFrom
                        type: object
                      accessToken:
                        properties:
                          valueFrom:
                            properties:
                              secretKeyRef:
                                properties:
                                  key:
                                    type: string
                                  name:
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                            required:
                            - secretKeyRef
                            type: object
                        required:
                        - valueFrom
                        type: object
                    required:
                    - accessKey
                    - accessSecretKey
                    type: object
                  podIdentity:
                    description: |-
                      AuthPodIdentity allows users to select the platform native identity
                      mechanism
                    properties:
                      identityAuthorityHost:
                        description: Set identityAuthorityHost to override the default
                          Azure authority host. If this is set, then the IdentityTenantID
                          must also be set
                        type: string
                      identityId:
                        type: string
                      identityOwner:
                        description: IdentityOwner configures which identity has to
                          be used during auto discovery, keda or the scaled workload.
                          Mutually exclusive with roleArn
                        enum:
                        - keda
                        - workload
                        type: string
                      identityTenantId:
                        description: Set identityTenantId to override the default
                          Azure tenant id. If this is set, then the IdentityID must
                          also be set
                        type: string
                      provider:
                        description: PodIdentityProvider contains the list of providers
                        enum:
                        - azure-workload
                        - gcp
                        - aws
                        - aws-eks
                        - none
                        type: string
                      roleArn:
                        description: RoleArn sets the AWS RoleArn to be used. Mutually
                          exclusive with IdentityOwner
                        type: string
                    required:
                    - provider
                    type: object
                  region:
                    type: string
                  secrets:
                    items:
                      properties:
                        name:
                          type: string
                        parameter:
                          type: string
                        versionId:
                          type: string
                        versionStage:
                          type: string
                      required:
                      - name
                      - parameter
                      type: object
                    type: array
                required:
                - secrets
                type: object
              azureKeyVault:
                description: AzureKeyVault is used to authenticate using Azure Key
                  Vault
                properties:
                  cloud:
                    properties:
                      activeDirectoryEndpoint:
                        type: string
                      keyVaultResourceURL:
                        type: string
                      type:
                        type: string
                    required:
                    - type
                    type: object
                  credentials:
                    properties:
                      clientId:
                        type: string
                      clientSecret:
                        properties:
                          valueFrom:
                            properties:
                              secretKeyRef:
                                properties:
                                  key:
                                    type: string
                                  name:
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                            required:
                            - secretKeyRef
                            type: object
                        required:
                        - valueFrom
                        type: object
                      tenantId:
                        type: string
                    required:
                    - clientId
                    - clientSecret
                    - tenantId
                    type: object
                  podIdentity:
                    description: |-
                      AuthPodIdentity allows users to select the platform native identity
                      mechanism
                    properties:
                      identityAuthorityHost:
                        description: Set identityAuthorityHost to override the default
                          Azure authority host. If this is set, then the IdentityTenantID
                          must also be set
                        type: string
                      identityId:
                        type: string
                      identityOwner:
                        description: IdentityOwner configures which identity has to
                          be used during auto discovery, keda or the scaled workload.
                          Mutually exclusive with roleArn
                        enum:
                        - keda
                        - workload
                        type: string
                      identityTenantId:
                        description: Set identityTenantId to override the default
                          Azure tenant id. If this is set, then the IdentityID must
                          also be set
                        type: string
                      provider:
                        description: PodIdentityProvider contains the list of providers
                        enum:
                        - azure-workload
                        - gcp
                        - aws
                        - aws-eks
                        - none
                        type: string
                      roleArn:
                        description: RoleArn sets the AWS RoleArn to be used. Mutually
                          exclusive with IdentityOwner
                        type: string
                    required:
                    - provider
                    type: object
                  secrets:
                    items:
                      properties:
                        name:
                          type: string
                        parameter:
                          type: string
                        version:
                          type: string
                      required:
                      - name
                      - parameter
                      type: object
                    type: array
                  vaultUri:
                    type: string
                required:
                - secrets
                - vaultUri
                type: object
              configMapTargetRef:
                items:
                  description: AuthConfigMapTargetRef is used to authenticate using
                    a reference to a config map
                  properties:
                    key:
                      type: string
                    name:
                      type: string
                    parameter:
                      type: string
                  required:
                  - key
                  - name
                  - parameter
                  type: object
                type: array
              env:
                items:
                  description: |-
                    AuthEnvironment is used to authenticate using environment variables
                    in the destination ScaleTarget spec
                  properties:
                    containerName:
                      type: string
                    name:
                      type: string
                    parameter:
                      type: string
                  required:
                  - name
                  - parameter
                  type: object
                type: array
              gcpSecretManager:
                properties:
                  credentials:
                    properties:
                      clientSecret:
                        properties:
                          valueFrom:
                            properties:
                              secretKeyRef:
                                properties:
                                  key:
                                    type: string
                                  name:
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                            required:
                            - secretKeyRef
                            type: object
                        required:
                        - valueFrom
                        type: object
                    required:
                    - clientSecret
                    type: object
                  podIdentity:
                    description: |-
                      AuthPodIdentity allows users to select the platform native identity
                      mechanism
                    properties:
                      identityAuthorityHost:
                        description: Set identityAuthorityHost to override the default
                          Azure authority host. If this is set, then the IdentityTenantID
                          must also be set
                        type: string
                      identityId:
                        type: string
                      identityOwner:
                        description: IdentityOwner configures which identity has to
                          be used during auto discovery, keda or the scaled workload.
                          Mutually exclusive with roleArn
                        enum:
                        - keda
                        - workload
                        type: string
                      identityTenantId:
                        description: Set identityTenantId to override the default
                          Azure tenant id. If this is set, then the IdentityID must
                          also be set
                        type: string
                      provider:
                        description: PodIdentityProvider contains the list of providers
                        enum:
                        - azure-workload
                        - gcp
                        - aws
                        - aws-eks
                        - none
                        type: string
                      roleArn:
                        description: RoleArn sets the AWS RoleArn to be used. Mutually
                          exclusive with IdentityOwner
                        type: string
                    required:
                    - provider
                    type: object
                  secrets:
                    items:
                      properties:
                        id:
                          type: string
                        parameter:
                          type: string
                        version:
                          type: string
                      required:
                      - id
                      - parameter
                      type: object
                    type: array
                required:
                - secrets
                type: object
              hashiCorpVault:
                description: HashiCorpVault is used to authenticate using Hashicorp
                  Vault
                properties:
                  address:
                    type: string
                  authentication:
                    description: VaultAuthentication contains the list of Hashicorp
                      Vault authentication methods
                    type: string
                  credential:
                    description: Credential defines the Hashicorp Vault credentials
                      depending on the authentication method
                    properties:
                      serviceAccount:
                        type: string
                      token:
                        type: string
                    type: object
                  mount:
                    type: string
                  namespace:
                    type: string
                  role:
                    type: string
                  secrets:
                    items:
                      description: VaultSecret defines the mapping between the path
                        of the secret in Vault to the parameter
                      properties:
                        key:
                          type: string
                        parameter:
                          type: string
                        path:
                          type: string
                        pkiData:
                          properties:
                            altNames:
                              type: string
                            commonName:
                              type: string
                            format:
                              type: string
                            ipSans:
                              type: string
                            otherSans:
                              type: string
                            ttl:
                              type: string
                            uriSans:
                              type: string
                          type: object
                        type:
                          description: VaultSecretType defines the type of vault secret
                          type: string
                      required:
                      - key
                      - parameter
                      - path
                      type: object
                    type: array
                required:
                - address
                - authentication
                - secrets
                type: object
              podIdentity:
                description: |-
                  AuthPodIdentity allows users to select the platform native identity
                  mechanism
                properties:
                  identityAuthorityHost:
                    description: Set identityAuthorityHost to override the default
                      Azure authority host. If this is set, then the IdentityTenantID
                      must also be set
                    type: string
                  identityId:
                    type: string
                  identityOwner:
                    description: IdentityOwner configures which identity has to be
                      used during auto discovery, keda or the scaled workload. Mutually
                      exclusive with roleArn
                    enum:
                    - keda
                    - workload
                    type: string
                  identityTenantId:
                    description: Set identityTenantId to override the default Azure
                      tenant id. If this is set, then the IdentityID must also be
                      set
                    type: string
                  provider:
                    description: PodIdentityProvider contains the list of providers
                    enum:
                    - azure-workload
                    - gcp
                    - aws
                    - aws-eks
                    - none
                    type: string
                  roleArn:
                    description: RoleArn sets the AWS RoleArn to be used. Mutually
                      exclusive with IdentityOwner
                    type: string
                required:
                - provider
                type: object
              secretTargetRef:
                items:
                  description: AuthSecretTargetRef is used to authenticate using a
                    reference to a secret
                  properties:
                    key:
                      type: string
                    name:
                      type: string
                    parameter:
                      type: string
                  required:
                  - key
                  - name
                  - parameter
                  type: object
                type: array
            type: object
          status:
            description: TriggerAuthenticationStatus defines the observed state of
              TriggerAuthentication
            properties:
              scaledjobs:
                type: string
              scaledobjects:
                type: string
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: opensecurity/charts/keda/templates/crds/crd-scaledjobs.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.14.0
  labels:
    app.kubernetes.io/name: keda-operator    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
  name: scaledjobs.keda.sh
spec:
  group: keda.sh
  names:
    kind: ScaledJob
    listKind: ScaledJobList
    plural: scaledjobs
    shortNames:
    - sj
    singular: scaledjob
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.minReplicaCount
      name: Min
      type: integer
    - jsonPath: .spec.maxReplicaCount
      name: Max
      type: integer
    - jsonPath: .spec.triggers[*].type
      name: Triggers
      type: string
    - jsonPath: .spec.triggers[*].authenticationRef.name
      name: Authentication
      type: string
    - jsonPath: .status.conditions[?(@.type=="Ready")].status
      name: Ready
      type: string
    - jsonPath: .status.conditions[?(@.type=="Active")].status
      name: Active
      type: string
    - jsonPath: .status.conditions[?(@.type=="Paused")].status
      name: Paused
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ScaledJob is the Schema for the scaledjobs API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ScaledJobSpec defines the desired state of ScaledJob
            properties:
              envSourceContainerName:
                type: string
              failedJobsHistoryLimit:
                format: int32
                type: integer
              jobTargetRef:
                description: JobSpec describes how the job execution will look like.
                properties:
                  activeDeadlineSeconds:
                    description: |-
                      Specifies the duration in seconds relative to the startTime that the job
                      may be continuously active before the system tries to terminate it; value
                      must be positive integer. If a Job is suspended (at creation or through an
                      update), this timer will effectively be stopped and reset when the Job is
                      resumed again.
                    format: int64
                    type: integer
                  backoffLimit:
                    description: |-
                      Specifies the number of retries before marking this job failed.
                      Defaults to 6
                    format: int32
                    type: integer
                  backoffLimitPerIndex:
                    description: |-
                      Specifies the limit for the number of retries within an
                      index before marking this index as failed. When enabled the number of
                      failures per index is kept in the pod's
                      batch.kubernetes.io/job-index-failure-count annotation. It can only
                      be set when Job's completionMode=Indexed, and the Pod's restart
                      policy is Never. The field is immutable.
                      This field is beta-level. It can be used when the `JobBackoffLimitPerIndex`
                      feature gate is enabled (enabled by default).
                    format: int32
                    type: integer
                  completionMode:
                    description: |-
                      completionMode specifies how Pod completions are tracked. It can be
                      `NonIndexed` (default) or `Indexed`.


                      `NonIndexed` means that the Job is considered complete when there have
                      been .spec.completions successfully completed Pods. Each Pod completion is
                      homologous to each other.


                      `Indexed` means that the Pods of a
                      Job get an associated completion index from 0 to (.spec.completions - 1),
                      available in the annotation batch.kubernetes.io/job-completion-index.
                      The Job is considered complete when there is one successfully completed Pod
                      for each index.
                      When value is `Indexed`, .spec.completions must be specified and
                      `.spec.parallelism` must be less than or equal to 10^5.
                      In addition, The Pod name takes the form
                      `$(job-name)-$(index)-$(random-string)`,
                      the Pod hostname takes the form `$(job-name)-$(index)`.


                      More completion modes can be added in the future.
                      If the Job controller observes a mode that it doesn't recognize, which
                      is possible during upgrades due to version skew, the controller
                      skips updates for the Job.
                    type: string
                  completions:
                    description: |-
                      Specifies the desired number of successfully finished pods the
                      job should be run with.  Setting to null means that the success of any
                      pod signals the success of all pods, and allows parallelism to have any positive
                      value.  Setting to 1 means that parallelism is limited to 1 and the success of that
                      pod signals the success of the job.
                      More info: https://kubernetes.io/docs/concepts/workloads/controllers/jobs-run-to-completion/
                    format: int32
                    type: integer
                  manualSelector:
                    description: |-
                      manualSelector controls generation of pod labels and pod selectors.
                      Leave `manualSelector` unset unless you are certain what you are doing.
                      When false or unset, the system pick labels unique to this job
                      and appends those labels to the pod template.  When true,
                      the user is responsible for picking unique labels and specifying
                      the selector.  Failure to pick a unique label may cause this
                      and other jobs to not function correctly.  However, You may see
                      `manualSelector=true` in jobs that were created with the old `extensions/v1beta1`
                      API.
                      More info: https://kubernetes.io/docs/concepts/workloads/controllers/jobs-run-to-completion/#specifying-your-own-pod-selector
                    type: boolean
                  maxFailedIndexes:
                    description: |-
                      Specifies the maximal number of failed indexes before marking the Job as
                      failed, when backoffLimitPerIndex is set. Once the number of failed
                      indexes exceeds this number the entire Job is marked as Failed and its
                      execution is terminated. When left as null the job continues execution of
                      all of its indexes and is marked with the `Complete` Job condition.
                      It can only be specified when backoffLimitPerIndex is set.
                      It can be null or up to completions. It is required and must be
                      less than or equal to 10^4 when is completions greater than 10^5.
                      This field is beta-level. It can be used when the `JobBackoffLimitPerIndex`
                      feature gate is enabled (enabled by default).
                    format: int32
                    type: integer
                  parallelism:
                    description: |-
                      Specifies the maximum desired number of pods the job should
                      run at any given time. The actual number of pods running in steady state will
                      be less than this number when ((.spec.completions - .status.successful) < .spec.parallelism),
                      i.e. when the work left to do is less than max parallelism.
                      More info: https://kubernetes.io/docs/concepts/workloads/controllers/jobs-run-to-completion/
                    format: int32
                    type: integer
                  podFailurePolicy:
                    description: |-
                      Specifies the policy of handling failed pods. In particular, it allows to
                      specify the set of actions and conditions which need to be
                      satisfied to take the associated action.
                      If empty, the default behaviour applies - the counter of failed pods,
                      represented by the jobs's .status.failed field, is incremented and it is
                      checked against the backoffLimit. This field cannot be used in combination
                      with restartPolicy=OnFailure.


                      This field is beta-level. It can be used when the `JobPodFailurePolicy`
                      feature gate is enabled (enabled by default).
                    properties:
                      rules:
                        description: |-
                          A list of pod failure policy rules. The rules are evaluated in order.
                          Once a rule matches a Pod failure, the remaining of the rules are ignored.
                          When no rule matches the Pod failure, the default handling applies - the
                          counter of pod failures is incremented and it is checked against
                          the backoffLimit. At most 20 elements are allowed.
                        items:
                          description: |-
                            PodFailurePolicyRule describes how a pod failure is handled when the requirements are met.
                            One of onExitCodes and onPodConditions, but not both, can be used in each rule.
                          properties:
                            action:
                              description: |-
                                Specifies the action taken on a pod failure when the requirements are satisfied.
                                Possible values are:


                                - FailJob: indicates that the pod's job is marked as Failed and all
                                  running pods are terminated.
                                - FailIndex: indicates that the pod's index is marked as Failed and will
                                  not be restarted.
                                  This value is beta-level. It can be used when the
                                  `JobBackoffLimitPerIndex` feature gate is enabled (enabled by default).
                                - Ignore: indicates that the counter towards the .backoffLimit is not
                                  incremented and a replacement pod is created.
                                - Count: indicates that the pod is handled in the default way - the
                                  counter towards the .backoffLimit is incremented.
                                Additional values are considered to be added in the future. Clients should
                                react to an unknown action by skipping the rule.
                              type: string
                            onExitCodes:
                              description: Represents the requirement on the container
                                exit codes.
                              properties:
                                containerName:
                                  description: |-
                                    Restricts the check for exit codes to the container with the
                                    specified name. When null, the rule applies to all containers.
                                    When specified, it should match one the container or initContainer
                                    names in the pod template.
                                  type: string
                                operator:
                                  description: |-
                                    Represents the relationship between the container exit code(s) and the
                                    specified values. Containers completed with success (exit code 0) are
                                    excluded from the requirement check. Possible values are:


                                    - In: the requirement is satisfied if at least one container exit code
                                      (might be multiple if there are multiple containers not restricted
                                      by the 'containerName' field) is in the set of specified values.
                                    - NotIn: the requirement is satisfied if at least one container exit code
                                      (might be multiple if there are multiple containers not restricted
                                      by the 'containerName' field) is not in the set of specified values.
                                    Additional values are considered to be added in the future. Clients should
                                    react to an unknown operator by assuming the requirement is not satisfied.
                                  type: string
                                values:
                                  description: |-
                                    Specifies the set of values. Each returned container exit code (might be
                                    multiple in case of multiple containers) is checked against this set of
                                    values with respect to the operator. The list of values must be ordered
                                    and must not contain duplicates. Value '0' cannot be used for the In operator.
                                    At least one element is required. At most 255 elements are allowed.
                                  items:
                                    format: int32
                                    type: integer
                                  type: array
                                  x-kubernetes-list-type: set
                              required:
                              - operator
                              - values
                              type: object
                            onPodConditions:
                              description: |-
                                Represents the requirement on the pod conditions. The requirement is represented
                                as a list of pod condition patterns. The requirement is satisfied if at
                                least one pattern matches an actual pod condition. At most 20 elements are allowed.
                              items:
                                description: |-
                                  PodFailurePolicyOnPodConditionsPattern describes a pattern for matching
                                  an actual pod condition type.
                                properties:
                                  status:
                                    description: |-
                                      Specifies the required Pod condition status. To match a pod condition
                                      it is required that the specified status equals the pod condition status.
                                      Defaults to True.
                                    type: string
                                  type:
                                    description: |-
                                      Specifies the required Pod condition type. To match a pod condition
                                      it is required that specified type equals the pod condition type.
                                    type: string
                                required:
                                - status
                                - type
                                type: object
                              type: array
                              x-kubernetes-list-type: atomic
                          required:
                          - action
                          type: object
                        type: array
                        x-kubernetes-list-type: atomic
                    required:
                    - rules
                    type: object
                  podReplacementPolicy:
                    description: |-
                      podReplacementPolicy specifies when to create replacement Pods.
                      Possible values are:
                      - TerminatingOrFailed means that we recreate pods
                        when they are terminating (has a metadata.deletionTimestamp) or failed.
                      - Failed means to wait until a previously created Pod is fully terminated (has phase
                        Failed or Succeeded) before creating a replacement Pod.


                      When using podFailurePolicy, Failed is the the only allowed value.
                      TerminatingOrFailed and Failed are allowed values when podFailurePolicy is not in use.
                      This is an beta field. To use this, enable the JobPodReplacementPolicy feature toggle.
                      This is on by default.
                    type: string
                  selector:
                    description: |-
                      A label query over pods that should match the pod count.
                      Normally, the system sets this field for you.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#label-selectors
                    properties:
                      matchExpressions:
                        description: matchExpressions is a list of label selector
                          requirements. The requirements are ANDed.
                        items:
                          description: |-
                            A label selector requirement is a selector that contains values, a key, and an operator that
                            relates the key and values.
                          properties:
                            key:
                              description: key is the label key that the selector
                                applies to.
                              type: string
                            operator:
                              description: |-
                                operator represents a key's relationship to a set of values.
                                Valid operators are In, NotIn, Exists and DoesNotExist.
                              type: string
                            values:
                              description: |-
                                values is an array of string values. If the operator is In or NotIn,
                                the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                the values array must be empty. This array is replaced during a strategic
                                merge patch.
                              items:
                                type: string
                              type: array
                          required:
                          - key
                          - operator
                          type: object
                        type: array
                      matchLabels:
                        additionalProperties:
                          type: string
                        description: |-
                          matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                          map is equivalent to an element of matchExpressions, whose key field is "key", the
                          operator is "In", and the values array contains only "value". The requirements are ANDed.
                        type: object
                    type: object
                    x-kubernetes-map-type: atomic
                  suspend:
                    description: |-
                      suspend specifies whether the Job controller should create Pods or not. If
                      a Job is created with suspend set to true, no Pods are created by the Job
                      controller. If a Job is suspended after creation (i.e. the flag goes from
                      false to true), the Job controller will delete all active Pods associated
                      with this Job. Users must design their workload to gracefully handle this.
                      Suspending a Job will reset the StartTime field of the Job, effectively
                      resetting the ActiveDeadlineSeconds timer too. Defaults to false.
                    type: boolean
                  template:
                    description: |-
                      Describes the pod that will be created when executing a job.
                      The only allowed template.spec.restartPolicy values are "Never" or "OnFailure".
                      More info: https://kubernetes.io/docs/concepts/workloads/controllers/jobs-run-to-completion/
                    properties:
                      metadata:
                        description: |-
                          Standard object's metadata.
                          More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata
                        type: object
                        x-kubernetes-preserve-unknown-fields: true
                      spec:
                        description: |-
                          Specification of the desired behavior of the pod.
                          More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status
                        properties:
                          activeDeadlineSeconds:
                            description: |-
                              Optional duration in seconds the pod may be active on the node relative to
                              StartTime before the system will actively try to mark it failed and kill associated containers.
                              Value must be a positive integer.
                            format: int64
                            type: integer
                          affinity:
                            description: If specified, the pod's scheduling constraints
                            properties:
                              nodeAffinity:
                                description: Describes node affinity scheduling rules
                                  for the pod.
                                properties:
                                  preferredDuringSchedulingIgnoredDuringExecution:
                                    description: |-
                                      The scheduler will prefer to schedule pods to nodes that satisfy
                                      the affinity expressions specified by this field, but it may choose
                                      a node that violates one or more of the expressions. The node that is
                                      most preferred is the one with the greatest sum of weights, i.e.
                                      for each node that meets all of the scheduling requirements (resource
                                      request, requiredDuringScheduling affinity expressions, etc.),
                                      compute a sum by iterating through the elements of this field and adding
                                      "weight" to the sum if the node matches the corresponding matchExpressions; the
                                      node(s) with the highest sum are the most preferred.
                                    items:
                                      description: |-
                                        An empty preferred scheduling term matches all objects with implicit weight 0
                                        (i.e. it's a no-op). A null preferred scheduling term matches no objects (i.e. is also a no-op).
                                      properties:
                                        preference:
                                          description: A node selector term, associated
                                            with the corresponding weight.
                                          properties:
                                            matchExpressions:
                                              description: A list of node selector
                                                requirements by node's labels.
                                              items:
                                                description: |-
                                                  A node selector requirement is a selector that contains values, a key, and an operator
                                                  that relates the key and values.
                                                properties:
                                                  key:
                                                    description: The label key that
                                                      the selector applies to.
                                                    type: string
                                                  operator:
                                                    description: |-
                                                      Represents a key's relationship to a set of values.
                                                      Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                    type: string
                                                  values:
                                                    description: |-
                                                      An array of string values. If the operator is In or NotIn,
                                                      the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                      the values array must be empty. If the operator is Gt or Lt, the values
                                                      array must have a single element, which will be interpreted as an integer.
                                                      This array is replaced during a strategic merge patch.
                                                    items:
                                                      type: string
                                                    type: array
                                                required:
                                                - key
                                                - operator
                                                type: object
                                              type: array
                                            matchFields:
                                              description: A list of node selector
                                                requirements by node's fields.
                                              items:
                                                description: |-
                                                  A node selector requirement is a selector that contains values, a key, and an operator
                                                  that relates the key and values.
                                                properties:
                                                  key:
                                                    description: The label key that
                                                      the selector applies to.
                                                    type: string
                                                  operator:
                                                    description: |-
                                                      Represents a key's relationship to a set of values.
                                                      Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                    type: string
                                                  values:
                                                    description: |-
                                                      An array of string values. If the operator is In or NotIn,
                                                      the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                      the values array must be empty. If the operator is Gt or Lt, the values
                                                      array must have a single element, which will be interpreted as an integer.
                                                      This array is replaced during a strategic merge patch.
                                                    items:
                                                      type: string
                                                    type: array
                                                required:
                                                - key
                                                - operator
                                                type: object
                                              type: array
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        weight:
                                          description: Weight associated with matching
                                            the corresponding nodeSelectorTerm, in
                                            the range 1-100.
                                          format: int32
                                          type: integer
                                      required:
                                      - preference
                                      - weight
                                      type: object
                                    type: array
                                  requiredDuringSchedulingIgnoredDuringExecution:
                                    description: |-
                                      If the affinity requirements specified by this field are not met at
                                      scheduling time, the pod will not be scheduled onto the node.
                                      If the affinity requirements specified by this field cease to be met
                                      at some point during pod execution (e.g. due to an update), the system
                                      may or may not try to eventually evict the pod from its node.
                                    properties:
                                      nodeSelectorTerms:
                                        description: Required. A list of node selector
                                          terms. The terms are ORed.
                                        items:
                                          description: |-
                                            A null or empty node selector term matches no objects. The requirements of
                                            them are ANDed.
                                            The TopologySelectorTerm type implements a subset of the NodeSelectorTerm.
                                          properties:
                                            matchExpressions:
                                              description: A list of node selector
                                                requirements by node's labels.
                                              items:
                                                description: |-
                                                  A node selector requirement is a selector that contains values, a key, and an operator
                                                  that relates the key and values.
                                                properties:
                                                  key:
                                                    description: The label key that
                                                      the selector applies to.
                                                    type: string
                                                  operator:
                                                    description: |-
                                                      Represents a key's relationship to a set of values.
                                                      Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                    type: string
                                                  values:
                                                    description: |-
                                                      An array of string values. If the operator is In or NotIn,
                                                      the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                      the values array must be empty. If the operator is Gt or Lt, the values
                                                      array must have a single element, which will be interpreted as an integer.
                                                      This array is replaced during a strategic merge patch.
                                                    items:
                                                      type: string
                                                    type: array
                                                required:
                                                - key
                                                - operator
                                                type: object
                                              type: array
                                            matchFields:
                                              description: A list of node selector
                                                requirements by node's fields.
                                              items:
                                                description: |-
                                                  A node selector requirement is a selector that contains values, a key, and an operator
                                                  that relates the key and values.
                                                properties:
                                                  key:
                                                    description: The label key that
                                                      the selector applies to.
                                                    type: string
                                                  operator:
                                                    description: |-
                                                      Represents a key's relationship to a set of values.
                                                      Valid operators are In, NotIn, Exists, DoesNotExist. Gt, and Lt.
                                                    type: string
                                                  values:
                                                    description: |-
                                                      An array of string values. If the operator is In or NotIn,
                                                      the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                      the values array must be empty. If the operator is Gt or Lt, the values
                                                      array must have a single element, which will be interpreted as an integer.
                                                      This array is replaced during a strategic merge patch.
                                                    items:
                                                      type: string
                                                    type: array
                                                required:
                                                - key
                                                - operator
                                                type: object
                                              type: array
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        type: array
                                    required:
                                    - nodeSelectorTerms
                                    type: object
                                    x-kubernetes-map-type: atomic
                                type: object
                              podAffinity:
                                description: Describes pod affinity scheduling rules
                                  (e.g. co-locate this pod in the same node, zone,
                                  etc. as some other pod(s)).
                                properties:
                                  preferredDuringSchedulingIgnoredDuringExecution:
                                    description: |-
                                      The scheduler will prefer to schedule pods to nodes that satisfy
                                      the affinity expressions specified by this field, but it may choose
                                      a node that violates one or more of the expressions. The node that is
                                      most preferred is the one with the greatest sum of weights, i.e.
                                      for each node that meets all of the scheduling requirements (resource
                                      request, requiredDuringScheduling affinity expressions, etc.),
                                      compute a sum by iterating through the elements of this field and adding
                                      "weight" to the sum if the node has pods which matches the corresponding podAffinityTerm; the
                                      node(s) with the highest sum are the most preferred.
                                    items:
                                      description: The weights of all of the matched
                                        WeightedPodAffinityTerm fields are added per-node
                                        to find the most preferred node(s)
                                      properties:
                                        podAffinityTerm:
                                          description: Required. A pod affinity term,
                                            associated with the corresponding weight.
                                          properties:
                                            labelSelector:
                                              description: |-
                                                A label query over a set of resources, in this case pods.
                                                If it's null, this PodAffinityTerm matches with no Pods.
                                              properties:
                                                matchExpressions:
                                                  description: matchExpressions is
                                                    a list of label selector requirements.
                                                    The requirements are ANDed.
                                                  items:
                                                    description: |-
                                                      A label selector requirement is a selector that contains values, a key, and an operator that
                                                      relates the key and values.
                                                    properties:
                                                      key:
                                                        description: key is the label
                                                          key that the selector applies
                                                          to.
                                                        type: string
                                                      operator:
                                                        description: |-
                                                          operator represents a key's relationship to a set of values.
                                                          Valid operators are In, NotIn, Exists and DoesNotExist.
                                                        type: string
                                                      values:
                                                        description: |-
                                                          values is an array of string values. If the operator is In or NotIn,
                                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                          the values array must be empty. This array is replaced during a strategic
                                                          merge patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                                matchLabels:
                                                  additionalProperties:
                                                    type: string
                                                  description: |-
                                                    matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                                    map is equivalent to an element of matchExpressions, whose key field is "key", the
                                                    operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                  type: object
                                              type: object
                                              x-kubernetes-map-type: atomic
                                            matchLabelKeys:
                                              description: |-
                                                MatchLabelKeys is a set of pod label keys to select which pods will
                                                be taken into consideration. The keys are used to lookup values from the
                                                incoming pod labels, those key-value labels are merged with `LabelSelector` as `key in (value)`
                                                to select the group of existing pods which pods will be taken into consideration
                                                for the incoming pod's pod (anti) affinity. Keys that don't exist in the incoming
                                                pod labels will be ignored. The default value is empty.
                                                The same key is forbidden to exist in both MatchLabelKeys and LabelSelector.
                                                Also, MatchLabelKeys cannot be set when LabelSelector isn't set.
                                                This is an alpha field and requires enabling MatchLabelKeysInPodAffinity feature gate.
                                              items:
                                                type: string
                                              type: array
                                              x-kubernetes-list-type: atomic
                                            mismatchLabelKeys:
                                              description: |-
                                                MismatchLabelKeys is a set of pod label keys to select which pods will
                                                be taken into consideration. The keys are used to lookup values from the
                                                incoming pod labels, those key-value labels are merged with `LabelSelector` as `key notin (value)`
                                                to select the group of existing pods which pods will be taken into consideration
                                                for the incoming pod's pod (anti) affinity. Keys that don't exist in the incoming
                                                pod labels will be ignored. The default value is empty.
                                                The same key is forbidden to exist in both MismatchLabelKeys and LabelSelector.
                                                Also, MismatchLabelKeys cannot be set when LabelSelector isn't set.
                                                This is an alpha field and requires enabling MatchLabelKeysInPodAffinity feature gate.
                                              items:
                                                type: string
                                              type: array
                                              x-kubernetes-list-type: atomic
                                            namespaceSelector:
                                              description: |-
                                                A label query over the set of namespaces that the term applies to.
                                                The term is applied to the union of the namespaces selected by this field
                                                and the ones listed in the namespaces field.
                                                null selector and null or empty namespaces list means "this pod's namespace".
                                                An empty selector ({}) matches all namespaces.
                                              properties:
                                                matchExpressions:
                                                  description: matchExpressions is
                                                    a list of label selector requirements.
                                                    The requirements are ANDed.
                                                  items:
                                                    description: |-
                                                      A label selector requirement is a selector that contains values, a key, and an operator that
                                                      relates the key and values.
                                                    properties:
                                                      key:
                                                        description: key is the label
                                                          key that the selector applies
                                                          to.
                                                        type: string
                                                      operator:
                                                        description: |-
                                                          operator represents a key's relationship to a set of values.
                                                          Valid operators are In, NotIn, Exists and DoesNotExist.
                                                        type: string
                                                      values:
                                                        description: |-
                                                          values is an array of string values. If the operator is In or NotIn,
                                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                          the values array must be empty. This array is replaced during a strategic
                                                          merge patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                                matchLabels:
                                                  additionalProperties:
                                                    type: string
                                                  description: |-
                                                    matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                                    map is equivalent to an element of matchExpressions, whose key field is "key", the
                                                    operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                  type: object
                                              type: object
                                              x-kubernetes-map-type: atomic
                                            namespaces:
                                              description: |-
                                                namespaces specifies a static list of namespace names that the term applies to.
                                                The term is applied to the union of the namespaces listed in this field
                                                and the ones selected by namespaceSelector.
                                                null or empty namespaces list and null namespaceSelector means "this pod's namespace".
                                              items:
                                                type: string
                                              type: array
                                            topologyKey:
                                              description: |-
                                                This pod should be co-located (affinity) or not co-located (anti-affinity) with the pods matching
                                                the labelSelector in the specified namespaces, where co-located is defined as running on a node
                                                whose value of the label with key topologyKey matches that of any node on which any of the
                                                selected pods is running.
                                                Empty topologyKey is not allowed.
                                              type: string
                                          required:
                                          - topologyKey
                                          type: object
                                        weight:
                                          description: |-
                                            weight associated with matching the corresponding podAffinityTerm,
                                            in the range 1-100.
                                          format: int32
                                          type: integer
                                      required:
                                      - podAffinityTerm
                                      - weight
                                      type: object
                                    type: array
                                  requiredDuringSchedulingIgnoredDuringExecution:
                                    description: |-
                                      If the affinity requirements specified by this field are not met at
                                      scheduling time, the pod will not be scheduled onto the node.
                                      If the affinity requirements specified by this field cease to be met
                                      at some point during pod execution (e.g. due to a pod label update), the
                                      system may or may not try to eventually evict the pod from its node.
                                      When there are multiple elements, the lists of nodes corresponding to each
                                      podAffinityTerm are intersected, i.e. all terms must be satisfied.
                                    items:
                                      description: |-
                                        Defines a set of pods (namely those matching the labelSelector
                                        relative to the given namespace(s)) that this pod should be
                                        co-located (affinity) or not co-located (anti-affinity) with,
                                        where co-located is defined as running on a node whose value of
                                        the label with key <topologyKey> matches that of any node on which
                                        a pod of the set of pods is running
                                      properties:
                                        labelSelector:
                                          description: |-
                                            A label query over a set of resources, in this case pods.
                                            If it's null, this PodAffinityTerm matches with no Pods.
                                          properties:
                                            matchExpressions:
                                              description: matchExpressions is a list
                                                of label selector requirements. The
                                                requirements are ANDed.
                                              items:
                                                description: |-
                                                  A label selector requirement is a selector that contains values, a key, and an operator that
                                                  relates the key and values.
                                                properties:
                                                  key:
                                                    description: key is the label
                                                      key that the selector applies
                                                      to.
                                                    type: string
                                                  operator:
                                                    description: |-
                                                      operator represents a key's relationship to a set of values.
                                                      Valid operators are In, NotIn, Exists and DoesNotExist.
                                                    type: string
                                                  values:
                                                    description: |-
                                                      values is an array of string values. If the operator is In or NotIn,
                                                      the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                      the values array must be empty. This array is replaced during a strategic
                                                      merge patch.
                                                    items:
                                                      type: string
                                                    type: array
                                                required:
                                                - key
                                                - operator
                                                type: object
                                              type: array
                                            matchLabels:
                                              additionalProperties:
                                                type: string
                                              description: |-
                                                matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                                map is equivalent to an element of matchExpressions, whose key field is "key", the
                                                operator is "In", and the values array contains only "value". The requirements are ANDed.
                                              type: object
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        matchLabelKeys:
                                          description: |-
                                            MatchLabelKeys is a set of pod label keys to select which pods will
                                            be taken into consideration. The keys are used to lookup values from the
                                            incoming pod labels, those key-value labels are merged with `LabelSelector` as `key in (value)`
                                            to select the group of existing pods which pods will be taken into consideration
                                            for the incoming pod's pod (anti) affinity. Keys that don't exist in the incoming
                                            pod labels will be ignored. The default value is empty.
                                            The same key is forbidden to exist in both MatchLabelKeys and LabelSelector.
                                            Also, MatchLabelKeys cannot be set when LabelSelector isn't set.
                                            This is an alpha field and requires enabling MatchLabelKeysInPodAffinity feature gate.
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        mismatchLabelKeys:
                                          description: |-
                                            MismatchLabelKeys is a set of pod label keys to select which pods will
                                            be taken into consideration. The keys are used to lookup values from the
                                            incoming pod labels, those key-value labels are merged with `LabelSelector` as `key notin (value)`
                                            to select the group of existing pods which pods will be taken into consideration
                                            for the incoming pod's pod (anti) affinity. Keys that don't exist in the incoming
                                            pod labels will be ignored. The default value is empty.
                                            The same key is forbidden to exist in both MismatchLabelKeys and LabelSelector.
                                            Also, MismatchLabelKeys cannot be set when LabelSelector isn't set.
                                            This is an alpha field and requires enabling MatchLabelKeysInPodAffinity feature gate.
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        namespaceSelector:
                                          description: |-
                                            A label query over the set of namespaces that the term applies to.
                                            The term is applied to the union of the namespaces selected by this field
                                            and the ones listed in the namespaces field.
                                            null selector and null or empty namespaces list means "this pod's namespace".
                                            An empty selector ({}) matches all namespaces.
                                          properties:
                                            matchExpressions:
                                              description: matchExpressions is a list
                                                of label selector requirements. The
                                                requirements are ANDed.
                                              items:
                                                description: |-
                                                  A label selector requirement is a selector that contains values, a key, and an operator that
                                                  relates the key and values.
                                                properties:
                                                  key:
                                                    description: key is the label
                                                      key that the selector applies
                                                      to.
                                                    type: string
                                                  operator:
                                                    description: |-
                                                      operator represents a key's relationship to a set of values.
                                                      Valid operators are In, NotIn, Exists and DoesNotExist.
                                                    type: string
                                                  values:
                                                    description: |-
                                                      values is an array of string values. If the operator is In or NotIn,
                                                      the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                      the values array must be empty. This array is replaced during a strategic
                                                      merge patch.
                                                    items:
                                                      type: string
                                                    type: array
                                                required:
                                                - key
                                                - operator
                                                type: object
                                              type: array
                                            matchLabels:
                                              additionalProperties:
                                                type: string
                                              description: |-
                                                matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                                map is equivalent to an element of matchExpressions, whose key field is "key", the
                                                operator is "In", and the values array contains only "value". The requirements are ANDed.
                                              type: object
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        namespaces:
                                          description: |-
                                            namespaces specifies a static list of namespace names that the term applies to.
                                            The term is applied to the union of the namespaces listed in this field
                                            and the ones selected by namespaceSelector.
                                            null or empty namespaces list and null namespaceSelector means "this pod's namespace".
                                          items:
                                            type: string
                                          type: array
                                        topologyKey:
                                          description: |-
                                            This pod should be co-located (affinity) or not co-located (anti-affinity) with the pods matching
                                            the labelSelector in the specified namespaces, where co-located is defined as running on a node
                                            whose value of the label with key topologyKey matches that of any node on which any of the
                                            selected pods is running.
                                            Empty topologyKey is not allowed.
                                          type: string
                                      required:
                                      - topologyKey
                                      type: object
                                    type: array
                                type: object
                              podAntiAffinity:
                                description: Describes pod anti-affinity scheduling
                                  rules (e.g. avoid putting this pod in the same node,
                                  zone, etc. as some other pod(s)).
                                properties:
                                  preferredDuringSchedulingIgnoredDuringExecution:
                                    description: |-
                                      The scheduler will prefer to schedule pods to nodes that satisfy
                                      the anti-affinity expressions specified by this field, but it may choose
                                      a node that violates one or more of the expressions. The node that is
                                      most preferred is the one with the greatest sum of weights, i.e.
                                      for each node that meets all of the scheduling requirements (resource
                                      request, requiredDuringScheduling anti-affinity expressions, etc.),
                                      compute a sum by iterating through the elements of this field and adding
                                      "weight" to the sum if the node has pods which matches the corresponding podAffinityTerm; the
                                      node(s) with the highest sum are the most preferred.
                                    items:
                                      description: The weights of all of the matched
                                        WeightedPodAffinityTerm fields are added per-node
                                        to find the most preferred node(s)
                                      properties:
                                        podAffinityTerm:
                                          description: Required. A pod affinity term,
                                            associated with the corresponding weight.
                                          properties:
                                            labelSelector:
                                              description: |-
                                                A label query over a set of resources, in this case pods.
                                                If it's null, this PodAffinityTerm matches with no Pods.
                                              properties:
                                                matchExpressions:
                                                  description: matchExpressions is
                                                    a list of label selector requirements.
                                                    The requirements are ANDed.
                                                  items:
                                                    description: |-
                                                      A label selector requirement is a selector that contains values, a key, and an operator that
                                                      relates the key and values.
                                                    properties:
                                                      key:
                                                        description: key is the label
                                                          key that the selector applies
                                                          to.
                                                        type: string
                                                      operator:
                                                        description: |-
                                                          operator represents a key's relationship to a set of values.
                                                          Valid operators are In, NotIn, Exists and DoesNotExist.
                                                        type: string
                                                      values:
                                                        description: |-
                                                          values is an array of string values. If the operator is In or NotIn,
                                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                          the values array must be empty. This array is replaced during a strategic
                                                          merge patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                                matchLabels:
                                                  additionalProperties:
                                                    type: string
                                                  description: |-
                                                    matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                                    map is equivalent to an element of matchExpressions, whose key field is "key", the
                                                    operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                  type: object
                                              type: object
                                              x-kubernetes-map-type: atomic
                                            matchLabelKeys:
                                              description: |-
                                                MatchLabelKeys is a set of pod label keys to select which pods will
                                                be taken into consideration. The keys are used to lookup values from the
                                                incoming pod labels, those key-value labels are merged with `LabelSelector` as `key in (value)`
                                                to select the group of existing pods which pods will be taken into consideration
                                                for the incoming pod's pod (anti) affinity. Keys that don't exist in the incoming
                                                pod labels will be ignored. The default value is empty.
                                                The same key is forbidden to exist in both MatchLabelKeys and LabelSelector.
                                                Also, MatchLabelKeys cannot be set when LabelSelector isn't set.
                                                This is an alpha field and requires enabling MatchLabelKeysInPodAffinity feature gate.
                                              items:
                                                type: string
                                              type: array
                                              x-kubernetes-list-type: atomic
                                            mismatchLabelKeys:
                                              description: |-
                                                MismatchLabelKeys is a set of pod label keys to select which pods will
                                                be taken into consideration. The keys are used to lookup values from the
                                                incoming pod labels, those key-value labels are merged with `LabelSelector` as `key notin (value)`
                                                to select the group of existing pods which pods will be taken into consideration
                                                for the incoming pod's pod (anti) affinity. Keys that don't exist in the incoming
                                                pod labels will be ignored. The default value is empty.
                                                The same key is forbidden to exist in both MismatchLabelKeys and LabelSelector.
                                                Also, MismatchLabelKeys cannot be set when LabelSelector isn't set.
                                                This is an alpha field and requires enabling MatchLabelKeysInPodAffinity feature gate.
                                              items:
                                                type: string
                                              type: array
                                              x-kubernetes-list-type: atomic
                                            namespaceSelector:
                                              description: |-
                                                A label query over the set of namespaces that the term applies to.
                                                The term is applied to the union of the namespaces selected by this field
                                                and the ones listed in the namespaces field.
                                                null selector and null or empty namespaces list means "this pod's namespace".
                                                An empty selector ({}) matches all namespaces.
                                              properties:
                                                matchExpressions:
                                                  description: matchExpressions is
                                                    a list of label selector requirements.
                                                    The requirements are ANDed.
                                                  items:
                                                    description: |-
                                                      A label selector requirement is a selector that contains values, a key, and an operator that
                                                      relates the key and values.
                                                    properties:
                                                      key:
                                                        description: key is the label
                                                          key that the selector applies
                                                          to.
                                                        type: string
                                                      operator:
                                                        description: |-
                                                          operator represents a key's relationship to a set of values.
                                                          Valid operators are In, NotIn, Exists and DoesNotExist.
                                                        type: string
                                                      values:
                                                        description: |-
                                                          values is an array of string values. If the operator is In or NotIn,
                                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                          the values array must be empty. This array is replaced during a strategic
                                                          merge patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                                matchLabels:
                                                  additionalProperties:
                                                    type: string
                                                  description: |-
                                                    matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                                    map is equivalent to an element of matchExpressions, whose key field is "key", the
                                                    operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                  type: object
                                              type: object
                                              x-kubernetes-map-type: atomic
                                            namespaces:
                                              description: |-
                                                namespaces specifies a static list of namespace names that the term applies to.
                                                The term is applied to the union of the namespaces listed in this field
                                                and the ones selected by namespaceSelector.
                                                null or empty namespaces list and null namespaceSelector means "this pod's namespace".
                                              items:
                                                type: string
                                              type: array
                                            topologyKey:
                                              description: |-
                                                This pod should be co-located (affinity) or not co-located (anti-affinity) with the pods matching
                                                the labelSelector in the specified namespaces, where co-located is defined as running on a node
                                                whose value of the label with key topologyKey matches that of any node on which any of the
                                                selected pods is running.
                                                Empty topologyKey is not allowed.
                                              type: string
                                          required:
                                          - topologyKey
                                          type: object
                                        weight:
                                          description: |-
                                            weight associated with matching the corresponding podAffinityTerm,
                                            in the range 1-100.
                                          format: int32
                                          type: integer
                                      required:
                                      - podAffinityTerm
                                      - weight
                                      type: object
                                    type: array
                                  requiredDuringSchedulingIgnoredDuringExecution:
                                    description: |-
                                      If the anti-affinity requirements specified by this field are not met at
                                      scheduling time, the pod will not be scheduled onto the node.
                                      If the anti-affinity requirements specified by this field cease to be met
                                      at some point during pod execution (e.g. due to a pod label update), the
                                      system may or may not try to eventually evict the pod from its node.
                                      When there are multiple elements, the lists of nodes corresponding to each
                                      podAffinityTerm are intersected, i.e. all terms must be satisfied.
                                    items:
                                      description: |-
                                        Defines a set of pods (namely those matching the labelSelector
                                        relative to the given namespace(s)) that this pod should be
                                        co-located (affinity) or not co-located (anti-affinity) with,
                                        where co-located is defined as running on a node whose value of
                                        the label with key <topologyKey> matches that of any node on which
                                        a pod of the set of pods is running
                                      properties:
                                        labelSelector:
                                          description: |-
                                            A label query over a set of resources, in this case pods.
                                            If it's null, this PodAffinityTerm matches with no Pods.
                                          properties:
                                            matchExpressions:
                                              description: matchExpressions is a list
                                                of label selector requirements. The
                                                requirements are ANDed.
                                              items:
                                                description: |-
                                                  A label selector requirement is a selector that contains values, a key, and an operator that
                                                  relates the key and values.
                                                properties:
                                                  key:
                                                    description: key is the label
                                                      key that the selector applies
                                                      to.
                                                    type: string
                                                  operator:
                                                    description: |-
                                                      operator represents a key's relationship to a set of values.
                                                      Valid operators are In, NotIn, Exists and DoesNotExist.
                                                    type: string
                                                  values:
                                                    description: |-
                                                      values is an array of string values. If the operator is In or NotIn,
                                                      the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                      the values array must be empty. This array is replaced during a strategic
                                                      merge patch.
                                                    items:
                                                      type: string
                                                    type: array
                                                required:
                                                - key
                                                - operator
                                                type: object
                                              type: array
                                            matchLabels:
                                              additionalProperties:
                                                type: string
                                              description: |-
                                                matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                                map is equivalent to an element of matchExpressions, whose key field is "key", the
                                                operator is "In", and the values array contains only "value". The requirements are ANDed.
                                              type: object
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        matchLabelKeys:
                                          description: |-
                                            MatchLabelKeys is a set of pod label keys to select which pods will
                                            be taken into consideration. The keys are used to lookup values from the
                                            incoming pod labels, those key-value labels are merged with `LabelSelector` as `key in (value)`
                                            to select the group of existing pods which pods will be taken into consideration
                                            for the incoming pod's pod (anti) affinity. Keys that don't exist in the incoming
                                            pod labels will be ignored. The default value is empty.
                                            The same key is forbidden to exist in both MatchLabelKeys and LabelSelector.
                                            Also, MatchLabelKeys cannot be set when LabelSelector isn't set.
                                            This is an alpha field and requires enabling MatchLabelKeysInPodAffinity feature gate.
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        mismatchLabelKeys:
                                          description: |-
                                            MismatchLabelKeys is a set of pod label keys to select which pods will
                                            be taken into consideration. The keys are used to lookup values from the
                                            incoming pod labels, those key-value labels are merged with `LabelSelector` as `key notin (value)`
                                            to select the group of existing pods which pods will be taken into consideration
                                            for the incoming pod's pod (anti) affinity. Keys that don't exist in the incoming
                                            pod labels will be ignored. The default value is empty.
                                            The same key is forbidden to exist in both MismatchLabelKeys and LabelSelector.
                                            Also, MismatchLabelKeys cannot be set when LabelSelector isn't set.
                                            This is an alpha field and requires enabling MatchLabelKeysInPodAffinity feature gate.
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                        namespaceSelector:
                                          description: |-
                                            A label query over the set of namespaces that the term applies to.
                                            The term is applied to the union of the namespaces selected by this field
                                            and the ones listed in the namespaces field.
                                            null selector and null or empty namespaces list means "this pod's namespace".
                                            An empty selector ({}) matches all namespaces.
                                          properties:
                                            matchExpressions:
                                              description: matchExpressions is a list
                                                of label selector requirements. The
                                                requirements are ANDed.
                                              items:
                                                description: |-
                                                  A label selector requirement is a selector that contains values, a key, and an operator that
                                                  relates the key and values.
                                                properties:
                                                  key:
                                                    description: key is the label
                                                      key that the selector applies
                                                      to.
                                                    type: string
                                                  operator:
                                                    description: |-
                                                      operator represents a key's relationship to a set of values.
                                                      Valid operators are In, NotIn, Exists and DoesNotExist.
                                                    type: string
                                                  values:
                                                    description: |-
                                                      values is an array of string values. If the operator is In or NotIn,
                                                      the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                      the values array must be empty. This array is replaced during a strategic
                                                      merge patch.
                                                    items:
                                                      type: string
                                                    type: array
                                                required:
                                                - key
                                                - operator
                                                type: object
                                              type: array
                                            matchLabels:
                                              additionalProperties:
                                                type: string
                                              description: |-
                                                matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                                map is equivalent to an element of matchExpressions, whose key field is "key", the
                                                operator is "In", and the values array contains only "value". The requirements are ANDed.
                                              type: object
                                          type: object
                                          x-kubernetes-map-type: atomic
                                        namespaces:
                                          description: |-
                                            namespaces specifies a static list of namespace names that the term applies to.
                                            The term is applied to the union of the namespaces listed in this field
                                            and the ones selected by namespaceSelector.
                                            null or empty namespaces list and null namespaceSelector means "this pod's namespace".
                                          items:
                                            type: string
                                          type: array
                                        topologyKey:
                                          description: |-
                                            This pod should be co-located (affinity) or not co-located (anti-affinity) with the pods matching
                                            the labelSelector in the specified namespaces, where co-located is defined as running on a node
                                            whose value of the label with key topologyKey matches that of any node on which any of the
                                            selected pods is running.
                                            Empty topologyKey is not allowed.
                                          type: string
                                      required:
                                      - topologyKey
                                      type: object
                                    type: array
                                type: object
                            type: object
                          automountServiceAccountToken:
                            description: AutomountServiceAccountToken indicates whether
                              a service account token should be automatically mounted.
                            type: boolean
                          containers:
                            description: |-
                              List of containers belonging to the pod.
                              Containers cannot currently be added or removed.
                              There must be at least one container in a Pod.
                              Cannot be updated.
                            items:
                              description: A single application container that you
                                want to run within a pod.
                              properties:
                                args:
                                  description: |-
                                    Arguments to the entrypoint.
                                    The container image's CMD is used if this is not provided.
                                    Variable references $(VAR_NAME) are expanded using the container's environment. If a variable
                                    cannot be resolved, the reference in the input string will be unchanged. Double $$ are reduced
                                    to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e. "$$(VAR_NAME)" will
                                    produce the string literal "$(VAR_NAME)". Escaped references will never be expanded, regardless
                                    of whether the variable exists or not. Cannot be updated.
                                    More info: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#running-a-command-in-a-shell
                                  items:
                                    type: string
                                  type: array
                                command:
                                  description: |-
                                    Entrypoint array. Not executed within a shell.
                                    The container image's ENTRYPOINT is used if this is not provided.
                                    Variable references $(VAR_NAME) are expanded using the container's environment. If a variable
                                    cannot be resolved, the reference in the input string will be unchanged. Double $$ are reduced
                                    to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e. "$$(VAR_NAME)" will
                                    produce the string literal "$(VAR_NAME)". Escaped references will never be expanded, regardless
                                    of whether the variable exists or not. Cannot be updated.
                                    More info: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#running-a-command-in-a-shell
                                  items:
                                    type: string
                                  type: array
                                env:
                                  description: |-
                                    List of environment variables to set in the container.
                                    Cannot be updated.
                                  items:
                                    description: EnvVar represents an environment
                                      variable present in a Container.
                                    properties:
                                      name:
                                        description: Name of the environment variable.
                                          Must be a C_IDENTIFIER.
                                        type: string
                                      value:
                                        description: |-
                                          Variable references $(VAR_NAME) are expanded
                                          using the previously defined environment variables in the container and
                                          any service environment variables. If a variable cannot be resolved,
                                          the reference in the input string will be unchanged. Double $$ are reduced
                                          to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e.
                                          "$$(VAR_NAME)" will produce the string literal "$(VAR_NAME)".
                                          Escaped references will never be expanded, regardless of whether the variable
                                          exists or not.
                                          Defaults to "".
                                        type: string
                                      valueFrom:
                                        description: Source for the environment variable's
                                          value. Cannot be used if value is not empty.
                                        properties:
                                          configMapKeyRef:
                                            description: Selects a key of a ConfigMap.
                                            properties:
                                              key:
                                                description: The key to select.
                                                type: string
                                              name:
                                                description: |-
                                                  Name of the referent.
                                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                  TODO: Add other useful fields. apiVersion, kind, uid?
                                                type: string
                                              optional:
                                                description: Specify whether the ConfigMap
                                                  or its key must be defined
                                                type: boolean
                                            required:
                                            - key
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          fieldRef:
                                            description: |-
                                              Selects a field of the pod: supports metadata.name, metadata.namespace, `metadata.labels['<KEY>']`, `metadata.annotations['<KEY>']`,
                                              spec.nodeName, spec.serviceAccountName, status.hostIP, status.podIP, status.podIPs.
                                            properties:
                                              apiVersion:
                                                description: Version of the schema
                                                  the FieldPath is written in terms
                                                  of, defaults to "v1".
                                                type: string
                                              fieldPath:
                                                description: Path of the field to
                                                  select in the specified API version.
                                                type: string
                                            required:
                                            - fieldPath
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          resourceFieldRef:
                                            description: |-
                                              Selects a resource of the container: only resources limits and requests
                                              (limits.cpu, limits.memory, limits.ephemeral-storage, requests.cpu, requests.memory and requests.ephemeral-storage) are currently supported.
                                            properties:
                                              containerName:
                                                description: 'Container name: required
                                                  for volumes, optional for env vars'
                                                type: string
                                              divisor:
                                                anyOf:
                                                - type: integer
                                                - type: string
                                                description: Specifies the output
                                                  format of the exposed resources,
                                                  defaults to "1"
                                                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                                x-kubernetes-int-or-string: true
                                              resource:
                                                description: 'Required: resource to
                                                  select'
                                                type: string
                                            required:
                                            - resource
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          secretKeyRef:
                                            description: Selects a key of a secret
                                              in the pod's namespace
                                            properties:
                                              key:
                                                description: The key of the secret
                                                  to select from.  Must be a valid
                                                  secret key.
                                                type: string
                                              name:
                                                description: |-
                                                  Name of the referent.
                                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                  TODO: Add other useful fields. apiVersion, kind, uid?
                                                type: string
                                              optional:
                                                description: Specify whether the Secret
                                                  or its key must be defined
                                                type: boolean
                                            required:
                                            - key
                                            type: object
                                            x-kubernetes-map-type: atomic
                                        type: object
                                    required:
                                    - name
                                    type: object
                                  type: array
                                envFrom:
                                  description: |-
                                    List of sources to populate environment variables in the container.
                                    The keys defined within a source must be a C_IDENTIFIER. All invalid keys
                                    will be reported as an event when the container is starting. When a key exists in multiple
                                    sources, the value associated with the last source will take precedence.
                                    Values defined by an Env with a duplicate key will take precedence.
                                    Cannot be updated.
                                  items:
                                    description: EnvFromSource represents the source
                                      of a set of ConfigMaps
                                    properties:
                                      configMapRef:
                                        description: The ConfigMap to select from
                                        properties:
                                          name:
                                            description: |-
                                              Name of the referent.
                                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                              TODO: Add other useful fields. apiVersion, kind, uid?
                                            type: string
                                          optional:
                                            description: Specify whether the ConfigMap
                                              must be defined
                                            type: boolean
                                        type: object
                                        x-kubernetes-map-type: atomic
                                      prefix:
                                        description: An optional identifier to prepend
                                          to each key in the ConfigMap. Must be a
                                          C_IDENTIFIER.
                                        type: string
                                      secretRef:
                                        description: The Secret to select from
                                        properties:
                                          name:
                                            description: |-
                                              Name of the referent.
                                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                              TODO: Add other useful fields. apiVersion, kind, uid?
                                            type: string
                                          optional:
                                            description: Specify whether the Secret
                                              must be defined
                                            type: boolean
                                        type: object
                                        x-kubernetes-map-type: atomic
                                    type: object
                                  type: array
                                image:
                                  description: |-
                                    Container image name.
                                    More info: https://kubernetes.io/docs/concepts/containers/images
                                    This field is optional to allow higher level config management to default or override
                                    container images in workload controllers like Deployments and StatefulSets.
                                  type: string
                                imagePullPolicy:
                                  description: |-
                                    Image pull policy.
                                    One of Always, Never, IfNotPresent.
                                    Defaults to Always if :latest tag is specified, or IfNotPresent otherwise.
                                    Cannot be updated.
                                    More info: https://kubernetes.io/docs/concepts/containers/images#updating-images
                                  type: string
                                lifecycle:
                                  description: |-
                                    Actions that the management system should take in response to container lifecycle events.
                                    Cannot be updated.
                                  properties:
                                    postStart:
                                      description: |-
                                        PostStart is called immediately after a container is created. If the handler fails,
                                        the container is terminated and restarted according to its restart policy.
                                        Other management of the container blocks until the hook completes.
                                        More info: https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#container-hooks
                                      properties:
                                        exec:
                                          description: Exec specifies the action to
                                            take.
                                          properties:
                                            command:
                                              description: |-
                                                Command is the command line to execute inside the container, the working directory for the
                                                command  is root ('/') in the container's filesystem. The command is simply exec'd, it is
                                                not run inside a shell, so traditional shell instructions ('|', etc) won't work. To use
                                                a shell, you need to explicitly call out to that shell.
                                                Exit status of 0 is treated as live/healthy and non-zero is unhealthy.
                                              items:
                                                type: string
                                              type: array
                                          type: object
                                        httpGet:
                                          description: HTTPGet specifies the http
                                            request to perform.
                                          properties:
                                            host:
                                              description: |-
                                                Host name to connect to, defaults to the pod IP. You probably want to set
                                                "Host" in httpHeaders instead.
                                              type: string
                                            httpHeaders:
                                              description: Custom headers to set in
                                                the request. HTTP allows repeated
                                                headers.
                                              items:
                                                description: HTTPHeader describes
                                                  a custom header to be used in HTTP
                                                  probes
                                                properties:
                                                  name:
                                                    description: |-
                                                      The header field name.
                                                      This will be canonicalized upon output, so case-variant names will be understood as the same header.
                                                    type: string
                                                  value:
                                                    description: The header field
                                                      value
                                                    type: string
                                                required:
                                                - name
                                                - value
                                                type: object
                                              type: array
                                            path:
                                              description: Path to access on the HTTP
                                                server.
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: |-
                                                Name or number of the port to access on the container.
                                                Number must be in the range 1 to 65535.
                                                Name must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                            scheme:
                                              description: |-
                                                Scheme to use for connecting to the host.
                                                Defaults to HTTP.
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        sleep:
                                          description: Sleep represents the duration
                                            that the container should sleep before
                                            being terminated.
                                          properties:
                                            seconds:
                                              description: Seconds is the number of
                                                seconds to sleep.
                                              format: int64
                                              type: integer
                                          required:
                                          - seconds
                                          type: object
                                        tcpSocket:
                                          description: |-
                                            Deprecated. TCPSocket is NOT supported as a LifecycleHandler and kept
                                            for the backward compatibility. There are no validation of this field and
                                            lifecycle hooks will fail in runtime when tcp handler is specified.
                                          properties:
                                            host:
                                              description: 'Optional: Host name to
                                                connect to, defaults to the pod IP.'
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: |-
                                                Number or name of the port to access on the container.
                                                Number must be in the range 1 to 65535.
                                                Name must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                          required:
                                          - port
                                          type: object
                                      type: object
                                    preStop:
                                      description: |-
                                        PreStop is called immediately before a container is terminated due to an
                                        API request or management event such as liveness/startup probe failure,
                                        preemption, resource contention, etc. The handler is not called if the
                                        container crashes or exits. The Pod's termination grace period countdown begins before the
                                        PreStop hook is executed. Regardless of the outcome of the handler, the
                                        container will eventually terminate within the Pod's termination grace
                                        period (unless delayed by finalizers). Other management of the container blocks until the hook completes
                                        or until the termination grace period is reached.
                                        More info: https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#container-hooks
                                      properties:
                                        exec:
                                          description: Exec specifies the action to
                                            take.
                                          properties:
                                            command:
                                              description: |-
                                                Command is the command line to execute inside the container, the working directory for the
                                                command  is root ('/') in the container's filesystem. The command is simply exec'd, it is
                                                not run inside a shell, so traditional shell instructions ('|', etc) won't work. To use
                                                a shell, you need to explicitly call out to that shell.
                                                Exit status of 0 is treated as live/healthy and non-zero is unhealthy.
                                              items:
                                                type: string
                                              type: array
                                          type: object
                                        httpGet:
                                          description: HTTPGet specifies the http
                                            request to perform.
                                          properties:
                                            host:
                                              description: |-
                                                Host name to connect to, defaults to the pod IP. You probably want to set
                                                "Host" in httpHeaders instead.
                                              type: string
                                            httpHeaders:
                                              description: Custom headers to set in
                                                the request. HTTP allows repeated
                                                headers.
                                              items:
                                                description: HTTPHeader describes
                                                  a custom header to be used in HTTP
                                                  probes
                                                properties:
                                                  name:
                                                    description: |-
                                                      The header field name.
                                                      This will be canonicalized upon output, so case-variant names will be understood as the same header.
                                                    type: string
                                                  value:
                                                    description: The header field
                                                      value
                                                    type: string
                                                required:
                                                - name
                                                - value
                                                type: object
                                              type: array
                                            path:
                                              description: Path to access on the HTTP
                                                server.
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: |-
                                                Name or number of the port to access on the container.
                                                Number must be in the range 1 to 65535.
                                                Name must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                            scheme:
                                              description: |-
                                                Scheme to use for connecting to the host.
                                                Defaults to HTTP.
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        sleep:
                                          description: Sleep represents the duration
                                            that the container should sleep before
                                            being terminated.
                                          properties:
                                            seconds:
                                              description: Seconds is the number of
                                                seconds to sleep.
                                              format: int64
                                              type: integer
                                          required:
                                          - seconds
                                          type: object
                                        tcpSocket:
                                          description: |-
                                            Deprecated. TCPSocket is NOT supported as a LifecycleHandler and kept
                                            for the backward compatibility. There are no validation of this field and
                                            lifecycle hooks will fail in runtime when tcp handler is specified.
                                          properties:
                                            host:
                                              description: 'Optional: Host name to
                                                connect to, defaults to the pod IP.'
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: |-
                                                Number or name of the port to access on the container.
                                                Number must be in the range 1 to 65535.
                                                Name must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                          required:
                                          - port
                                          type: object
                                      type: object
                                  type: object
                                livenessProbe:
                                  description: |-
                                    Periodic probe of container liveness.
                                    Container will be restarted if the probe fails.
                                    Cannot be updated.
                                    More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                  properties:
                                    exec:
                                      description: Exec specifies the action to take.
                                      properties:
                                        command:
                                          description: |-
                                            Command is the command line to execute inside the container, the working directory for the
                                            command  is root ('/') in the container's filesystem. The command is simply exec'd, it is
                                            not run inside a shell, so traditional shell instructions ('|', etc) won't work. To use
                                            a shell, you need to explicitly call out to that shell.
                                            Exit status of 0 is treated as live/healthy and non-zero is unhealthy.
                                          items:
                                            type: string
                                          type: array
                                      type: object
                                    failureThreshold:
                                      description: |-
                                        Minimum consecutive failures for the probe to be considered failed after having succeeded.
                                        Defaults to 3. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    grpc:
                                      description: GRPC specifies an action involving
                                        a GRPC port.
                                      properties:
                                        port:
                                          description: Port number of the gRPC service.
                                            Number must be in the range 1 to 65535.
                                          format: int32
                                          type: integer
                                        service:
                                          description: |-
                                            Service is the name of the service to place in the gRPC HealthCheckRequest
                                            (see https://github.com/grpc/grpc/blob/master/doc/health-checking.md).


                                            If this is not specified, the default behavior is defined by gRPC.
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    httpGet:
                                      description: HTTPGet specifies the http request
                                        to perform.
                                      properties:
                                        host:
                                          description: |-
                                            Host name to connect to, defaults to the pod IP. You probably want to set
                                            "Host" in httpHeaders instead.
                                          type: string
                                        httpHeaders:
                                          description: Custom headers to set in the
                                            request. HTTP allows repeated headers.
                                          items:
                                            description: HTTPHeader describes a custom
                                              header to be used in HTTP probes
                                            properties:
                                              name:
                                                description: |-
                                                  The header field name.
                                                  This will be canonicalized upon output, so case-variant names will be understood as the same header.
                                                type: string
                                              value:
                                                description: The header field value
                                                type: string
                                            required:
                                            - name
                                            - value
                                            type: object
                                          type: array
                                        path:
                                          description: Path to access on the HTTP
                                            server.
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: |-
                                            Name or number of the port to access on the container.
                                            Number must be in the range 1 to 65535.
                                            Name must be an IANA_SVC_NAME.
                                          x-kubernetes-int-or-string: true
                                        scheme:
                                          description: |-
                                            Scheme to use for connecting to the host.
                                            Defaults to HTTP.
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    initialDelaySeconds:
                                      description: |-
                                        Number of seconds after the container has started before liveness probes are initiated.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                      format: int32
                                      type: integer
                                    periodSeconds:
                                      description: |-
                                        How often (in seconds) to perform the probe.
                                        Default to 10 seconds. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    successThreshold:
                                      description: |-
                                        Minimum consecutive successes for the probe to be considered successful after having failed.
                                        Defaults to 1. Must be 1 for liveness and startup. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    tcpSocket:
                                      description: TCPSocket specifies an action involving
                                        a TCP port.
                                      properties:
                                        host:
                                          description: 'Optional: Host name to connect
                                            to, defaults to the pod IP.'
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: |-
                                            Number or name of the port to access on the container.
                                            Number must be in the range 1 to 65535.
                                            Name must be an IANA_SVC_NAME.
                                          x-kubernetes-int-or-string: true
                                      required:
                                      - port
                                      type: object
                                    terminationGracePeriodSeconds:
                                      description: |-
                                        Optional duration in seconds the pod needs to terminate gracefully upon probe failure.
                                        The grace period is the duration in seconds after the processes running in the pod are sent
                                        a termination signal and the time when the processes are forcibly halted with a kill signal.
                                        Set this value longer than the expected cleanup time for your process.
                                        If this value is nil, the pod's terminationGracePeriodSeconds will be used. Otherwise, this
                                        value overrides the value provided by the pod spec.
                                        Value must be non-negative integer. The value zero indicates stop immediately via
                                        the kill signal (no opportunity to shut down).
                                        This is a beta field and requires enabling ProbeTerminationGracePeriod feature gate.
                                        Minimum value is 1. spec.terminationGracePeriodSeconds is used if unset.
                                      format: int64
                                      type: integer
                                    timeoutSeconds:
                                      description: |-
                                        Number of seconds after which the probe times out.
                                        Defaults to 1 second. Minimum value is 1.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                      format: int32
                                      type: integer
                                  type: object
                                name:
                                  description: |-
                                    Name of the container specified as a DNS_LABEL.
                                    Each container in a pod must have a unique name (DNS_LABEL).
                                    Cannot be updated.
                                  type: string
                                ports:
                                  description: |-
                                    List of ports to expose from the container. Not specifying a port here
                                    DOES NOT prevent that port from being exposed. Any port which is
                                    listening on the default "0.0.0.0" address inside a container will be
                                    accessible from the network.
                                    Modifying this array with strategic merge patch may corrupt the data.
                                    For more information See https://github.com/kubernetes/kubernetes/issues/108255.
                                    Cannot be updated.
                                  items:
                                    description: ContainerPort represents a network
                                      port in a single container.
                                    properties:
                                      containerPort:
                                        description: |-
                                          Number of port to expose on the pod's IP address.
                                          This must be a valid port number, 0 < x < 65536.
                                        format: int32
                                        type: integer
                                      hostIP:
                                        description: What host IP to bind the external
                                          port to.
                                        type: string
                                      hostPort:
                                        description: |-
                                          Number of port to expose on the host.
                                          If specified, this must be a valid port number, 0 < x < 65536.
                                          If HostNetwork is specified, this must match ContainerPort.
                                          Most containers do not need this.
                                        format: int32
                                        type: integer
                                      name:
                                        description: |-
                                          If specified, this must be an IANA_SVC_NAME and unique within the pod. Each
                                          named port in a pod must have a unique name. Name for the port that can be
                                          referred to by services.
                                        type: string
                                      protocol:
                                        default: TCP
                                        description: |-
                                          Protocol for port. Must be UDP, TCP, or SCTP.
                                          Defaults to "TCP".
                                        type: string
                                    required:
                                    - containerPort
                                    - protocol
                                    type: object
                                  type: array
                                  x-kubernetes-list-map-keys:
                                  - containerPort
                                  - protocol
                                  x-kubernetes-list-type: map
                                readinessProbe:
                                  description: |-
                                    Periodic probe of container service readiness.
                                    Container will be removed from service endpoints if the probe fails.
                                    Cannot be updated.
                                    More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                  properties:
                                    exec:
                                      description: Exec specifies the action to take.
                                      properties:
                                        command:
                                          description: |-
                                            Command is the command line to execute inside the container, the working directory for the
                                            command  is root ('/') in the container's filesystem. The command is simply exec'd, it is
                                            not run inside a shell, so traditional shell instructions ('|', etc) won't work. To use
                                            a shell, you need to explicitly call out to that shell.
                                            Exit status of 0 is treated as live/healthy and non-zero is unhealthy.
                                          items:
                                            type: string
                                          type: array
                                      type: object
                                    failureThreshold:
                                      description: |-
                                        Minimum consecutive failures for the probe to be considered failed after having succeeded.
                                        Defaults to 3. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    grpc:
                                      description: GRPC specifies an action involving
                                        a GRPC port.
                                      properties:
                                        port:
                                          description: Port number of the gRPC service.
                                            Number must be in the range 1 to 65535.
                                          format: int32
                                          type: integer
                                        service:
                                          description: |-
                                            Service is the name of the service to place in the gRPC HealthCheckRequest
                                            (see https://github.com/grpc/grpc/blob/master/doc/health-checking.md).


                                            If this is not specified, the default behavior is defined by gRPC.
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    httpGet:
                                      description: HTTPGet specifies the http request
                                        to perform.
                                      properties:
                                        host:
                                          description: |-
                                            Host name to connect to, defaults to the pod IP. You probably want to set
                                            "Host" in httpHeaders instead.
                                          type: string
                                        httpHeaders:
                                          description: Custom headers to set in the
                                            request. HTTP allows repeated headers.
                                          items:
                                            description: HTTPHeader describes a custom
                                              header to be used in HTTP probes
                                            properties:
                                              name:
                                                description: |-
                                                  The header field name.
                                                  This will be canonicalized upon output, so case-variant names will be understood as the same header.
                                                type: string
                                              value:
                                                description: The header field value
                                                type: string
                                            required:
                                            - name
                                            - value
                                            type: object
                                          type: array
                                        path:
                                          description: Path to access on the HTTP
                                            server.
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: |-
                                            Name or number of the port to access on the container.
                                            Number must be in the range 1 to 65535.
                                            Name must be an IANA_SVC_NAME.
                                          x-kubernetes-int-or-string: true
                                        scheme:
                                          description: |-
                                            Scheme to use for connecting to the host.
                                            Defaults to HTTP.
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    initialDelaySeconds:
                                      description: |-
                                        Number of seconds after the container has started before liveness probes are initiated.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                      format: int32
                                      type: integer
                                    periodSeconds:
                                      description: |-
                                        How often (in seconds) to perform the probe.
                                        Default to 10 seconds. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    successThreshold:
                                      description: |-
                                        Minimum consecutive successes for the probe to be considered successful after having failed.
                                        Defaults to 1. Must be 1 for liveness and startup. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    tcpSocket:
                                      description: TCPSocket specifies an action involving
                                        a TCP port.
                                      properties:
                                        host:
                                          description: 'Optional: Host name to connect
                                            to, defaults to the pod IP.'
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: |-
                                            Number or name of the port to access on the container.
                                            Number must be in the range 1 to 65535.
                                            Name must be an IANA_SVC_NAME.
                                          x-kubernetes-int-or-string: true
                                      required:
                                      - port
                                      type: object
                                    terminationGracePeriodSeconds:
                                      description: |-
                                        Optional duration in seconds the pod needs to terminate gracefully upon probe failure.
                                        The grace period is the duration in seconds after the processes running in the pod are sent
                                        a termination signal and the time when the processes are forcibly halted with a kill signal.
                                        Set this value longer than the expected cleanup time for your process.
                                        If this value is nil, the pod's terminationGracePeriodSeconds will be used. Otherwise, this
                                        value overrides the value provided by the pod spec.
                                        Value must be non-negative integer. The value zero indicates stop immediately via
                                        the kill signal (no opportunity to shut down).
                                        This is a beta field and requires enabling ProbeTerminationGracePeriod feature gate.
                                        Minimum value is 1. spec.terminationGracePeriodSeconds is used if unset.
                                      format: int64
                                      type: integer
                                    timeoutSeconds:
                                      description: |-
                                        Number of seconds after which the probe times out.
                                        Defaults to 1 second. Minimum value is 1.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                      format: int32
                                      type: integer
                                  type: object
                                resizePolicy:
                                  description: Resources resize policy for the container.
                                  items:
                                    description: ContainerResizePolicy represents
                                      resource resize policy for the container.
                                    properties:
                                      resourceName:
                                        description: |-
                                          Name of the resource to which this resource resize policy applies.
                                          Supported values: cpu, memory.
                                        type: string
                                      restartPolicy:
                                        description: |-
                                          Restart policy to apply when specified resource is resized.
                                          If not specified, it defaults to NotRequired.
                                        type: string
                                    required:
                                    - resourceName
                                    - restartPolicy
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                                resources:
                                  description: |-
                                    Compute Resources required by this container.
                                    Cannot be updated.
                                    More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                                  properties:
                                    claims:
                                      description: |-
                                        Claims lists the names of resources, defined in spec.resourceClaims,
                                        that are used by this container.


                                        This is an alpha field and requires enabling the
                                        DynamicResourceAllocation feature gate.


                                        This field is immutable. It can only be set for containers.
                                      items:
                                        description: ResourceClaim references one
                                          entry in PodSpec.ResourceClaims.
                                        properties:
                                          name:
                                            description: |-
                                              Name must match the name of one entry in pod.spec.resourceClaims of
                                              the Pod where this field is used. It makes that resource available
                                              inside a container.
                                            type: string
                                        required:
                                        - name
                                        type: object
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                    limits:
                                      additionalProperties:
                                        anyOf:
                                        - type: integer
                                        - type: string
                                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                        x-kubernetes-int-or-string: true
                                      description: |-
                                        Limits describes the maximum amount of compute resources allowed.
                                        More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                                      type: object
                                    requests:
                                      additionalProperties:
                                        anyOf:
                                        - type: integer
                                        - type: string
                                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                        x-kubernetes-int-or-string: true
                                      description: |-
                                        Requests describes the minimum amount of compute resources required.
                                        If Requests is omitted for a container, it defaults to Limits if that is explicitly specified,
                                        otherwise to an implementation-defined value. Requests cannot exceed Limits.
                                        More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                                      type: object
                                  type: object
                                restartPolicy:
                                  description: |-
                                    RestartPolicy defines the restart behavior of individual containers in a pod.
                                    This field may only be set for init containers, and the only allowed value is "Always".
                                    For non-init containers or when this field is not specified,
                                    the restart behavior is defined by the Pod's restart policy and the container type.
                                    Setting the RestartPolicy as "Always" for the init container will have the following effect:
                                    this init container will be continually restarted on
                                    exit until all regular containers have terminated. Once all regular
                                    containers have completed, all init containers with restartPolicy "Always"
                                    will be shut down. This lifecycle differs from normal init containers and
                                    is often referred to as a "sidecar" container. Although this init
                                    container still starts in the init container sequence, it does not wait
                                    for the container to complete before proceeding to the next init
                                    container. Instead, the next init container starts immediately after this
                                    init container is started, or after any startupProbe has successfully
                                    completed.
                                  type: string
                                securityContext:
                                  description: |-
                                    SecurityContext defines the security options the container should be run with.
                                    If set, the fields of SecurityContext override the equivalent fields of PodSecurityContext.
                                    More info: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
                                  properties:
                                    allowPrivilegeEscalation:
                                      description: |-
                                        AllowPrivilegeEscalation controls whether a process can gain more
                                        privileges than its parent process. This bool directly controls if
                                        the no_new_privs flag will be set on the container process.
                                        AllowPrivilegeEscalation is true always when the container is:
                                        1) run as Privileged
                                        2) has CAP_SYS_ADMIN
                                        Note that this field cannot be set when spec.os.name is windows.
                                      type: boolean
                                    capabilities:
                                      description: |-
                                        The capabilities to add/drop when running containers.
                                        Defaults to the default set of capabilities granted by the container runtime.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      properties:
                                        add:
                                          description: Added capabilities
                                          items:
                                            description: Capability represent POSIX
                                              capabilities type
                                            type: string
                                          type: array
                                        drop:
                                          description: Removed capabilities
                                          items:
                                            description: Capability represent POSIX
                                              capabilities type
                                            type: string
                                          type: array
                                      type: object
                                    privileged:
                                      description: |-
                                        Run container in privileged mode.
                                        Processes in privileged containers are essentially equivalent to root on the host.
                                        Defaults to false.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      type: boolean
                                    procMount:
                                      description: |-
                                        procMount denotes the type of proc mount to use for the containers.
                                        The default is DefaultProcMount which uses the container runtime defaults for
                                        readonly paths and masked paths.
                                        This requires the ProcMountType feature flag to be enabled.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      type: string
                                    readOnlyRootFilesystem:
                                      description: |-
                                        Whether this container has a read-only root filesystem.
                                        Default is false.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      type: boolean
                                    runAsGroup:
                                      description: |-
                                        The GID to run the entrypoint of the container process.
                                        Uses runtime default if unset.
                                        May also be set in PodSecurityContext.  If set in both SecurityContext and
                                        PodSecurityContext, the value specified in SecurityContext takes precedence.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      format: int64
                                      type: integer
                                    runAsNonRoot:
                                      description: |-
                                        Indicates that the container must run as a non-root user.
                                        If true, the Kubelet will validate the image at runtime to ensure that it
                                        does not run as UID 0 (root) and fail to start the container if it does.
                                        If unset or false, no such validation will be performed.
                                        May also be set in PodSecurityContext.  If set in both SecurityContext and
                                        PodSecurityContext, the value specified in SecurityContext takes precedence.
                                      type: boolean
                                    runAsUser:
                                      description: |-
                                        The UID to run the entrypoint of the container process.
                                        Defaults to user specified in image metadata if unspecified.
                                        May also be set in PodSecurityContext.  If set in both SecurityContext and
                                        PodSecurityContext, the value specified in SecurityContext takes precedence.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      format: int64
                                      type: integer
                                    seLinuxOptions:
                                      description: |-
                                        The SELinux context to be applied to the container.
                                        If unspecified, the container runtime will allocate a random SELinux context for each
                                        container.  May also be set in PodSecurityContext.  If set in both SecurityContext and
                                        PodSecurityContext, the value specified in SecurityContext takes precedence.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      properties:
                                        level:
                                          description: Level is SELinux level label
                                            that applies to the container.
                                          type: string
                                        role:
                                          description: Role is a SELinux role label
                                            that applies to the container.
                                          type: string
                                        type:
                                          description: Type is a SELinux type label
                                            that applies to the container.
                                          type: string
                                        user:
                                          description: User is a SELinux user label
                                            that applies to the container.
                                          type: string
                                      type: object
                                    seccompProfile:
                                      description: |-
                                        The seccomp options to use by this container. If seccomp options are
                                        provided at both the pod & container level, the container options
                                        override the pod options.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      properties:
                                        localhostProfile:
                                          description: |-
                                            localhostProfile indicates a profile defined in a file on the node should be used.
                                            The profile must be preconfigured on the node to work.
                                            Must be a descending path, relative to the kubelet's configured seccomp profile location.
                                            Must be set if type is "Localhost". Must NOT be set for any other type.
                                          type: string
                                        type:
                                          description: |-
                                            type indicates which kind of seccomp profile will be applied.
                                            Valid options are:


                                            Localhost - a profile defined in a file on the node should be used.
                                            RuntimeDefault - the container runtime default profile should be used.
                                            Unconfined - no profile should be applied.
                                          type: string
                                      required:
                                      - type
                                      type: object
                                    windowsOptions:
                                      description: |-
                                        The Windows specific settings applied to all containers.
                                        If unspecified, the options from the PodSecurityContext will be used.
                                        If set in both SecurityContext and PodSecurityContext, the value specified in SecurityContext takes precedence.
                                        Note that this field cannot be set when spec.os.name is linux.
                                      properties:
                                        gmsaCredentialSpec:
                                          description: |-
                                            GMSACredentialSpec is where the GMSA admission webhook
                                            (https://github.com/kubernetes-sigs/windows-gmsa) inlines the contents of the
                                            GMSA credential spec named by the GMSACredentialSpecName field.
                                          type: string
                                        gmsaCredentialSpecName:
                                          description: GMSACredentialSpecName is the
                                            name of the GMSA credential spec to use.
                                          type: string
                                        hostProcess:
                                          description: |-
                                            HostProcess determines if a container should be run as a 'Host Process' container.
                                            All of a Pod's containers must have the same effective HostProcess value
                                            (it is not allowed to have a mix of HostProcess containers and non-HostProcess containers).
                                            In addition, if HostProcess is true then HostNetwork must also be set to true.
                                          type: boolean
                                        runAsUserName:
                                          description: |-
                                            The UserName in Windows to run the entrypoint of the container process.
                                            Defaults to the user specified in image metadata if unspecified.
                                            May also be set in PodSecurityContext. If set in both SecurityContext and
                                            PodSecurityContext, the value specified in SecurityContext takes precedence.
                                          type: string
                                      type: object
                                  type: object
                                startupProbe:
                                  description: |-
                                    StartupProbe indicates that the Pod has successfully initialized.
                                    If specified, no other probes are executed until this completes successfully.
                                    If this probe fails, the Pod will be restarted, just as if the livenessProbe failed.
                                    This can be used to provide different probe parameters at the beginning of a Pod's lifecycle,
                                    when it might take a long time to load data or warm a cache, than during steady-state operation.
                                    This cannot be updated.
                                    More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                  properties:
                                    exec:
                                      description: Exec specifies the action to take.
                                      properties:
                                        command:
                                          description: |-
                                            Command is the command line to execute inside the container, the working directory for the
                                            command  is root ('/') in the container's filesystem. The command is simply exec'd, it is
                                            not run inside a shell, so traditional shell instructions ('|', etc) won't work. To use
                                            a shell, you need to explicitly call out to that shell.
                                            Exit status of 0 is treated as live/healthy and non-zero is unhealthy.
                                          items:
                                            type: string
                                          type: array
                                      type: object
                                    failureThreshold:
                                      description: |-
                                        Minimum consecutive failures for the probe to be considered failed after having succeeded.
                                        Defaults to 3. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    grpc:
                                      description: GRPC specifies an action involving
                                        a GRPC port.
                                      properties:
                                        port:
                                          description: Port number of the gRPC service.
                                            Number must be in the range 1 to 65535.
                                          format: int32
                                          type: integer
                                        service:
                                          description: |-
                                            Service is the name of the service to place in the gRPC HealthCheckRequest
                                            (see https://github.com/grpc/grpc/blob/master/doc/health-checking.md).


                                            If this is not specified, the default behavior is defined by gRPC.
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    httpGet:
                                      description: HTTPGet specifies the http request
                                        to perform.
                                      properties:
                                        host:
                                          description: |-
                                            Host name to connect to, defaults to the pod IP. You probably want to set
                                            "Host" in httpHeaders instead.
                                          type: string
                                        httpHeaders:
                                          description: Custom headers to set in the
                                            request. HTTP allows repeated headers.
                                          items:
                                            description: HTTPHeader describes a custom
                                              header to be used in HTTP probes
                                            properties:
                                              name:
                                                description: |-
                                                  The header field name.
                                                  This will be canonicalized upon output, so case-variant names will be understood as the same header.
                                                type: string
                                              value:
                                                description: The header field value
                                                type: string
                                            required:
                                            - name
                                            - value
                                            type: object
                                          type: array
                                        path:
                                          description: Path to access on the HTTP
                                            server.
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: |-
                                            Name or number of the port to access on the container.
                                            Number must be in the range 1 to 65535.
                                            Name must be an IANA_SVC_NAME.
                                          x-kubernetes-int-or-string: true
                                        scheme:
                                          description: |-
                                            Scheme to use for connecting to the host.
                                            Defaults to HTTP.
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    initialDelaySeconds:
                                      description: |-
                                        Number of seconds after the container has started before liveness probes are initiated.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                      format: int32
                                      type: integer
                                    periodSeconds:
                                      description: |-
                                        How often (in seconds) to perform the probe.
                                        Default to 10 seconds. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    successThreshold:
                                      description: |-
                                        Minimum consecutive successes for the probe to be considered successful after having failed.
                                        Defaults to 1. Must be 1 for liveness and startup. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    tcpSocket:
                                      description: TCPSocket specifies an action involving
                                        a TCP port.
                                      properties:
                                        host:
                                          description: 'Optional: Host name to connect
                                            to, defaults to the pod IP.'
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: |-
                                            Number or name of the port to access on the container.
                                            Number must be in the range 1 to 65535.
                                            Name must be an IANA_SVC_NAME.
                                          x-kubernetes-int-or-string: true
                                      required:
                                      - port
                                      type: object
                                    terminationGracePeriodSeconds:
                                      description: |-
                                        Optional duration in seconds the pod needs to terminate gracefully upon probe failure.
                                        The grace period is the duration in seconds after the processes running in the pod are sent
                                        a termination signal and the time when the processes are forcibly halted with a kill signal.
                                        Set this value longer than the expected cleanup time for your process.
                                        If this value is nil, the pod's terminationGracePeriodSeconds will be used. Otherwise, this
                                        value overrides the value provided by the pod spec.
                                        Value must be non-negative integer. The value zero indicates stop immediately via
                                        the kill signal (no opportunity to shut down).
                                        This is a beta field and requires enabling ProbeTerminationGracePeriod feature gate.
                                        Minimum value is 1. spec.terminationGracePeriodSeconds is used if unset.
                                      format: int64
                                      type: integer
                                    timeoutSeconds:
                                      description: |-
                                        Number of seconds after which the probe times out.
                                        Defaults to 1 second. Minimum value is 1.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                      format: int32
                                      type: integer
                                  type: object
                                stdin:
                                  description: |-
                                    Whether this container should allocate a buffer for stdin in the container runtime. If this
                                    is not set, reads from stdin in the container will always result in EOF.
                                    Default is false.
                                  type: boolean
                                stdinOnce:
                                  description: |-
                                    Whether the container runtime should close the stdin channel after it has been opened by
                                    a single attach. When stdin is true the stdin stream will remain open across multiple attach
                                    sessions. If stdinOnce is set to true, stdin is opened on container start, is empty until the
                                    first client attaches to stdin, and then remains open and accepts data until the client disconnects,
                                    at which time stdin is closed and remains closed until the container is restarted. If this
                                    flag is false, a container processes that reads from stdin will never receive an EOF.
                                    Default is false
                                  type: boolean
                                terminationMessagePath:
                                  description: |-
                                    Optional: Path at which the file to which the container's termination message
                                    will be written is mounted into the container's filesystem.
                                    Message written is intended to be brief final status, such as an assertion failure message.
                                    Will be truncated by the node if greater than 4096 bytes. The total message length across
                                    all containers will be limited to 12kb.
                                    Defaults to /dev/termination-log.
                                    Cannot be updated.
                                  type: string
                                terminationMessagePolicy:
                                  description: |-
                                    Indicate how the termination message should be populated. File will use the contents of
                                    terminationMessagePath to populate the container status message on both success and failure.
                                    FallbackToLogsOnError will use the last chunk of container log output if the termination
                                    message file is empty and the container exited with an error.
                                    The log output is limited to 2048 bytes or 80 lines, whichever is smaller.
                                    Defaults to File.
                                    Cannot be updated.
                                  type: string
                                tty:
                                  description: |-
                                    Whether this container should allocate a TTY for itself, also requires 'stdin' to be true.
                                    Default is false.
                                  type: boolean
                                volumeDevices:
                                  description: volumeDevices is the list of block
                                    devices to be used by the container.
                                  items:
                                    description: volumeDevice describes a mapping
                                      of a raw block device within a container.
                                    properties:
                                      devicePath:
                                        description: devicePath is the path inside
                                          of the container that the device will be
                                          mapped to.
                                        type: string
                                      name:
                                        description: name must match the name of a
                                          persistentVolumeClaim in the pod
                                        type: string
                                    required:
                                    - devicePath
                                    - name
                                    type: object
                                  type: array
                                volumeMounts:
                                  description: |-
                                    Pod volumes to mount into the container's filesystem.
                                    Cannot be updated.
                                  items:
                                    description: VolumeMount describes a mounting
                                      of a Volume within a container.
                                    properties:
                                      mountPath:
                                        description: |-
                                          Path within the container at which the volume should be mounted.  Must
                                          not contain ':'.
                                        type: string
                                      mountPropagation:
                                        description: |-
                                          mountPropagation determines how mounts are propagated from the host
                                          to container and the other way around.
                                          When not set, MountPropagationNone is used.
                                          This field is beta in 1.10.
                                        type: string
                                      name:
                                        description: This must match the Name of a
                                          Volume.
                                        type: string
                                      readOnly:
                                        description: |-
                                          Mounted read-only if true, read-write otherwise (false or unspecified).
                                          Defaults to false.
                                        type: boolean
                                      subPath:
                                        description: |-
                                          Path within the volume from which the container's volume should be mounted.
                                          Defaults to "" (volume's root).
                                        type: string
                                      subPathExpr:
                                        description: |-
                                          Expanded path within the volume from which the container's volume should be mounted.
                                          Behaves similarly to SubPath but environment variable references $(VAR_NAME) are expanded using the container's environment.
                                          Defaults to "" (volume's root).
                                          SubPathExpr and SubPath are mutually exclusive.
                                        type: string
                                    required:
                                    - mountPath
                                    - name
                                    type: object
                                  type: array
                                workingDir:
                                  description: |-
                                    Container's working directory.
                                    If not specified, the container runtime's default will be used, which
                                    might be configured in the container image.
                                    Cannot be updated.
                                  type: string
                              required:
                              - name
                              type: object
                            type: array
                          dnsConfig:
                            description: |-
                              Specifies the DNS parameters of a pod.
                              Parameters specified here will be merged to the generated DNS
                              configuration based on DNSPolicy.
                            properties:
                              nameservers:
                                description: |-
                                  A list of DNS name server IP addresses.
                                  This will be appended to the base nameservers generated from DNSPolicy.
                                  Duplicated nameservers will be removed.
                                items:
                                  type: string
                                type: array
                              options:
                                description: |-
                                  A list of DNS resolver options.
                                  This will be merged with the base options generated from DNSPolicy.
                                  Duplicated entries will be removed. Resolution options given in Options
                                  will override those that appear in the base DNSPolicy.
                                items:
                                  description: PodDNSConfigOption defines DNS resolver
                                    options of a pod.
                                  properties:
                                    name:
                                      description: Required.
                                      type: string
                                    value:
                                      type: string
                                  type: object
                                type: array
                              searches:
                                description: |-
                                  A list of DNS search domains for host-name lookup.
                                  This will be appended to the base search paths generated from DNSPolicy.
                                  Duplicated search paths will be removed.
                                items:
                                  type: string
                                type: array
                            type: object
                          dnsPolicy:
                            description: |-
                              Set DNS policy for the pod.
                              Defaults to "ClusterFirst".
                              Valid values are 'ClusterFirstWithHostNet', 'ClusterFirst', 'Default' or 'None'.
                              DNS parameters given in DNSConfig will be merged with the policy selected with DNSPolicy.
                              To have DNS options set along with hostNetwork, you have to specify DNS policy
                              explicitly to 'ClusterFirstWithHostNet'.
                            type: string
                          enableServiceLinks:
                            description: |-
                              EnableServiceLinks indicates whether information about services should be injected into pod's
                              environment variables, matching the syntax of Docker links.
                              Optional: Defaults to true.
                            type: boolean
                          ephemeralContainers:
                            description: |-
                              List of ephemeral containers run in this pod. Ephemeral containers may be run in an existing
                              pod to perform user-initiated actions such as debugging. This list cannot be specified when
                              creating a pod, and it cannot be modified by updating the pod spec. In order to add an
                              ephemeral container to an existing pod, use the pod's ephemeralcontainers subresource.
                            items:
                              description: |-
                                An EphemeralContainer is a temporary container that you may add to an existing Pod for
                                user-initiated activities such as debugging. Ephemeral containers have no resource or
                                scheduling guarantees, and they will not be restarted when they exit or when a Pod is
                                removed or restarted. The kubelet may evict a Pod if an ephemeral container causes the
                                Pod to exceed its resource allocation.


                                To add an ephemeral container, use the ephemeralcontainers subresource of an existing
                                Pod. Ephemeral containers may not be removed or restarted.
                              properties:
                                args:
                                  description: |-
                                    Arguments to the entrypoint.
                                    The image's CMD is used if this is not provided.
                                    Variable references $(VAR_NAME) are expanded using the container's environment. If a variable
                                    cannot be resolved, the reference in the input string will be unchanged. Double $$ are reduced
                                    to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e. "$$(VAR_NAME)" will
                                    produce the string literal "$(VAR_NAME)". Escaped references will never be expanded, regardless
                                    of whether the variable exists or not. Cannot be updated.
                                    More info: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#running-a-command-in-a-shell
                                  items:
                                    type: string
                                  type: array
                                command:
                                  description: |-
                                    Entrypoint array. Not executed within a shell.
                                    The image's ENTRYPOINT is used if this is not provided.
                                    Variable references $(VAR_NAME) are expanded using the container's environment. If a variable
                                    cannot be resolved, the reference in the input string will be unchanged. Double $$ are reduced
                                    to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e. "$$(VAR_NAME)" will
                                    produce the string literal "$(VAR_NAME)". Escaped references will never be expanded, regardless
                                    of whether the variable exists or not. Cannot be updated.
                                    More info: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#running-a-command-in-a-shell
                                  items:
                                    type: string
                                  type: array
                                env:
                                  description: |-
                                    List of environment variables to set in the container.
                                    Cannot be updated.
                                  items:
                                    description: EnvVar represents an environment
                                      variable present in a Container.
                                    properties:
                                      name:
                                        description: Name of the environment variable.
                                          Must be a C_IDENTIFIER.
                                        type: string
                                      value:
                                        description: |-
                                          Variable references $(VAR_NAME) are expanded
                                          using the previously defined environment variables in the container and
                                          any service environment variables. If a variable cannot be resolved,
                                          the reference in the input string will be unchanged. Double $$ are reduced
                                          to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e.
                                          "$$(VAR_NAME)" will produce the string literal "$(VAR_NAME)".
                                          Escaped references will never be expanded, regardless of whether the variable
                                          exists or not.
                                          Defaults to "".
                                        type: string
                                      valueFrom:
                                        description: Source for the environment variable's
                                          value. Cannot be used if value is not empty.
                                        properties:
                                          configMapKeyRef:
                                            description: Selects a key of a ConfigMap.
                                            properties:
                                              key:
                                                description: The key to select.
                                                type: string
                                              name:
                                                description: |-
                                                  Name of the referent.
                                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                  TODO: Add other useful fields. apiVersion, kind, uid?
                                                type: string
                                              optional:
                                                description: Specify whether the ConfigMap
                                                  or its key must be defined
                                                type: boolean
                                            required:
                                            - key
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          fieldRef:
                                            description: |-
                                              Selects a field of the pod: supports metadata.name, metadata.namespace, `metadata.labels['<KEY>']`, `metadata.annotations['<KEY>']`,
                                              spec.nodeName, spec.serviceAccountName, status.hostIP, status.podIP, status.podIPs.
                                            properties:
                                              apiVersion:
                                                description: Version of the schema
                                                  the FieldPath is written in terms
                                                  of, defaults to "v1".
                                                type: string
                                              fieldPath:
                                                description: Path of the field to
                                                  select in the specified API version.
                                                type: string
                                            required:
                                            - fieldPath
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          resourceFieldRef:
                                            description: |-
                                              Selects a resource of the container: only resources limits and requests
                                              (limits.cpu, limits.memory, limits.ephemeral-storage, requests.cpu, requests.memory and requests.ephemeral-storage) are currently supported.
                                            properties:
                                              containerName:
                                                description: 'Container name: required
                                                  for volumes, optional for env vars'
                                                type: string
                                              divisor:
                                                anyOf:
                                                - type: integer
                                                - type: string
                                                description: Specifies the output
                                                  format of the exposed resources,
                                                  defaults to "1"
                                                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                                x-kubernetes-int-or-string: true
                                              resource:
                                                description: 'Required: resource to
                                                  select'
                                                type: string
                                            required:
                                            - resource
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          secretKeyRef:
                                            description: Selects a key of a secret
                                              in the pod's namespace
                                            properties:
                                              key:
                                                description: The key of the secret
                                                  to select from.  Must be a valid
                                                  secret key.
                                                type: string
                                              name:
                                                description: |-
                                                  Name of the referent.
                                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                  TODO: Add other useful fields. apiVersion, kind, uid?
                                                type: string
                                              optional:
                                                description: Specify whether the Secret
                                                  or its key must be defined
                                                type: boolean
                                            required:
                                            - key
                                            type: object
                                            x-kubernetes-map-type: atomic
                                        type: object
                                    required:
                                    - name
                                    type: object
                                  type: array
                                envFrom:
                                  description: |-
                                    List of sources to populate environment variables in the container.
                                    The keys defined within a source must be a C_IDENTIFIER. All invalid keys
                                    will be reported as an event when the container is starting. When a key exists in multiple
                                    sources, the value associated with the last source will take precedence.
                                    Values defined by an Env with a duplicate key will take precedence.
                                    Cannot be updated.
                                  items:
                                    description: EnvFromSource represents the source
                                      of a set of ConfigMaps
                                    properties:
                                      configMapRef:
                                        description: The ConfigMap to select from
                                        properties:
                                          name:
                                            description: |-
                                              Name of the referent.
                                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                              TODO: Add other useful fields. apiVersion, kind, uid?
                                            type: string
                                          optional:
                                            description: Specify whether the ConfigMap
                                              must be defined
                                            type: boolean
                                        type: object
                                        x-kubernetes-map-type: atomic
                                      prefix:
                                        description: An optional identifier to prepend
                                          to each key in the ConfigMap. Must be a
                                          C_IDENTIFIER.
                                        type: string
                                      secretRef:
                                        description: The Secret to select from
                                        properties:
                                          name:
                                            description: |-
                                              Name of the referent.
                                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                              TODO: Add other useful fields. apiVersion, kind, uid?
                                            type: string
                                          optional:
                                            description: Specify whether the Secret
                                              must be defined
                                            type: boolean
                                        type: object
                                        x-kubernetes-map-type: atomic
                                    type: object
                                  type: array
                                image:
                                  description: |-
                                    Container image name.
                                    More info: https://kubernetes.io/docs/concepts/containers/images
                                  type: string
                                imagePullPolicy:
                                  description: |-
                                    Image pull policy.
                                    One of Always, Never, IfNotPresent.
                                    Defaults to Always if :latest tag is specified, or IfNotPresent otherwise.
                                    Cannot be updated.
                                    More info: https://kubernetes.io/docs/concepts/containers/images#updating-images
                                  type: string
                                lifecycle:
                                  description: Lifecycle is not allowed for ephemeral
                                    containers.
                                  properties:
                                    postStart:
                                      description: |-
                                        PostStart is called immediately after a container is created. If the handler fails,
                                        the container is terminated and restarted according to its restart policy.
                                        Other management of the container blocks until the hook completes.
                                        More info: https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#container-hooks
                                      properties:
                                        exec:
                                          description: Exec specifies the action to
                                            take.
                                          properties:
                                            command:
                                              description: |-
                                                Command is the command line to execute inside the container, the working directory for the
                                                command  is root ('/') in the container's filesystem. The command is simply exec'd, it is
                                                not run inside a shell, so traditional shell instructions ('|', etc) won't work. To use
                                                a shell, you need to explicitly call out to that shell.
                                                Exit status of 0 is treated as live/healthy and non-zero is unhealthy.
                                              items:
                                                type: string
                                              type: array
                                          type: object
                                        httpGet:
                                          description: HTTPGet specifies the http
                                            request to perform.
                                          properties:
                                            host:
                                              description: |-
                                                Host name to connect to, defaults to the pod IP. You probably want to set
                                                "Host" in httpHeaders instead.
                                              type: string
                                            httpHeaders:
                                              description: Custom headers to set in
                                                the request. HTTP allows repeated
                                                headers.
                                              items:
                                                description: HTTPHeader describes
                                                  a custom header to be used in HTTP
                                                  probes
                                                properties:
                                                  name:
                                                    description: |-
                                                      The header field name.
                                                      This will be canonicalized upon output, so case-variant names will be understood as the same header.
                                                    type: string
                                                  value:
                                                    description: The header field
                                                      value
                                                    type: string
                                                required:
                                                - name
                                                - value
                                                type: object
                                              type: array
                                            path:
                                              description: Path to access on the HTTP
                                                server.
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: |-
                                                Name or number of the port to access on the container.
                                                Number must be in the range 1 to 65535.
                                                Name must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                            scheme:
                                              description: |-
                                                Scheme to use for connecting to the host.
                                                Defaults to HTTP.
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        sleep:
                                          description: Sleep represents the duration
                                            that the container should sleep before
                                            being terminated.
                                          properties:
                                            seconds:
                                              description: Seconds is the number of
                                                seconds to sleep.
                                              format: int64
                                              type: integer
                                          required:
                                          - seconds
                                          type: object
                                        tcpSocket:
                                          description: |-
                                            Deprecated. TCPSocket is NOT supported as a LifecycleHandler and kept
                                            for the backward compatibility. There are no validation of this field and
                                            lifecycle hooks will fail in runtime when tcp handler is specified.
                                          properties:
                                            host:
                                              description: 'Optional: Host name to
                                                connect to, defaults to the pod IP.'
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: |-
                                                Number or name of the port to access on the container.
                                                Number must be in the range 1 to 65535.
                                                Name must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                          required:
                                          - port
                                          type: object
                                      type: object
                                    preStop:
                                      description: |-
                                        PreStop is called immediately before a container is terminated due to an
                                        API request or management event such as liveness/startup probe failure,
                                        preemption, resource contention, etc. The handler is not called if the
                                        container crashes or exits. The Pod's termination grace period countdown begins before the
                                        PreStop hook is executed. Regardless of the outcome of the handler, the
                                        container will eventually terminate within the Pod's termination grace
                                        period (unless delayed by finalizers). Other management of the container blocks until the hook completes
                                        or until the termination grace period is reached.
                                        More info: https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#container-hooks
                                      properties:
                                        exec:
                                          description: Exec specifies the action to
                                            take.
                                          properties:
                                            command:
                                              description: |-
                                                Command is the command line to execute inside the container, the working directory for the
                                                command  is root ('/') in the container's filesystem. The command is simply exec'd, it is
                                                not run inside a shell, so traditional shell instructions ('|', etc) won't work. To use
                                                a shell, you need to explicitly call out to that shell.
                                                Exit status of 0 is treated as live/healthy and non-zero is unhealthy.
                                              items:
                                                type: string
                                              type: array
                                          type: object
                                        httpGet:
                                          description: HTTPGet specifies the http
                                            request to perform.
                                          properties:
                                            host:
                                              description: |-
                                                Host name to connect to, defaults to the pod IP. You probably want to set
                                                "Host" in httpHeaders instead.
                                              type: string
                                            httpHeaders:
                                              description: Custom headers to set in
                                                the request. HTTP allows repeated
                                                headers.
                                              items:
                                                description: HTTPHeader describes
                                                  a custom header to be used in HTTP
                                                  probes
                                                properties:
                                                  name:
                                                    description: |-
                                                      The header field name.
                                                      This will be canonicalized upon output, so case-variant names will be understood as the same header.
                                                    type: string
                                                  value:
                                                    description: The header field
                                                      value
                                                    type: string
                                                required:
                                                - name
                                                - value
                                                type: object
                                              type: array
                                            path:
                                              description: Path to access on the HTTP
                                                server.
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: |-
                                                Name or number of the port to access on the container.
                                                Number must be in the range 1 to 65535.
                                                Name must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                            scheme:
                                              description: |-
                                                Scheme to use for connecting to the host.
                                                Defaults to HTTP.
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        sleep:
                                          description: Sleep represents the duration
                                            that the container should sleep before
                                            being terminated.
                                          properties:
                                            seconds:
                                              description: Seconds is the number of
                                                seconds to sleep.
                                              format: int64
                                              type: integer
                                          required:
                                          - seconds
                                          type: object
                                        tcpSocket:
                                          description: |-
                                            Deprecated. TCPSocket is NOT supported as a LifecycleHandler and kept
                                            for the backward compatibility. There are no validation of this field and
                                            lifecycle hooks will fail in runtime when tcp handler is specified.
                                          properties:
                                            host:
                                              description: 'Optional: Host name to
                                                connect to, defaults to the pod IP.'
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: |-
                                                Number or name of the port to access on the container.
                                                Number must be in the range 1 to 65535.
                                                Name must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                          required:
                                          - port
                                          type: object
                                      type: object
                                  type: object
                                livenessProbe:
                                  description: Probes are not allowed for ephemeral
                                    containers.
                                  properties:
                                    exec:
                                      description: Exec specifies the action to take.
                                      properties:
                                        command:
                                          description: |-
                                            Command is the command line to execute inside the container, the working directory for the
                                            command  is root ('/') in the container's filesystem. The command is simply exec'd, it is
                                            not run inside a shell, so traditional shell instructions ('|', etc) won't work. To use
                                            a shell, you need to explicitly call out to that shell.
                                            Exit status of 0 is treated as live/healthy and non-zero is unhealthy.
                                          items:
                                            type: string
                                          type: array
                                      type: object
                                    failureThreshold:
                                      description: |-
                                        Minimum consecutive failures for the probe to be considered failed after having succeeded.
                                        Defaults to 3. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    grpc:
                                      description: GRPC specifies an action involving
                                        a GRPC port.
                                      properties:
                                        port:
                                          description: Port number of the gRPC service.
                                            Number must be in the range 1 to 65535.
                                          format: int32
                                          type: integer
                                        service:
                                          description: |-
                                            Service is the name of the service to place in the gRPC HealthCheckRequest
                                            (see https://github.com/grpc/grpc/blob/master/doc/health-checking.md).


                                            If this is not specified, the default behavior is defined by gRPC.
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    httpGet:
                                      description: HTTPGet specifies the http request
                                        to perform.
                                      properties:
                                        host:
                                          description: |-
                                            Host name to connect to, defaults to the pod IP. You probably want to set
                                            "Host" in httpHeaders instead.
                                          type: string
                                        httpHeaders:
                                          description: Custom headers to set in the
                                            request. HTTP allows repeated headers.
                                          items:
                                            description: HTTPHeader describes a custom
                                              header to be used in HTTP probes
                                            properties:
                                              name:
                                                description: |-
                                                  The header field name.
                                                  This will be canonicalized upon output, so case-variant names will be understood as the same header.
                                                type: string
                                              value:
                                                description: The header field value
                                                type: string
                                            required:
                                            - name
                                            - value
                                            type: object
                                          type: array
                                        path:
                                          description: Path to access on the HTTP
                                            server.
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: |-
                                            Name or number of the port to access on the container.
                                            Number must be in the range 1 to 65535.
                                            Name must be an IANA_SVC_NAME.
                                          x-kubernetes-int-or-string: true
                                        scheme:
                                          description: |-
                                            Scheme to use for connecting to the host.
                                            Defaults to HTTP.
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    initialDelaySeconds:
                                      description: |-
                                        Number of seconds after the container has started before liveness probes are initiated.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                      format: int32
                                      type: integer
                                    periodSeconds:
                                      description: |-
                                        How often (in seconds) to perform the probe.
                                        Default to 10 seconds. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    successThreshold:
                                      description: |-
                                        Minimum consecutive successes for the probe to be considered successful after having failed.
                                        Defaults to 1. Must be 1 for liveness and startup. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    tcpSocket:
                                      description: TCPSocket specifies an action involving
                                        a TCP port.
                                      properties:
                                        host:
                                          description: 'Optional: Host name to connect
                                            to, defaults to the pod IP.'
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: |-
                                            Number or name of the port to access on the container.
                                            Number must be in the range 1 to 65535.
                                            Name must be an IANA_SVC_NAME.
                                          x-kubernetes-int-or-string: true
                                      required:
                                      - port
                                      type: object
                                    terminationGracePeriodSeconds:
                                      description: |-
                                        Optional duration in seconds the pod needs to terminate gracefully upon probe failure.
                                        The grace period is the duration in seconds after the processes running in the pod are sent
                                        a termination signal and the time when the processes are forcibly halted with a kill signal.
                                        Set this value longer than the expected cleanup time for your process.
                                        If this value is nil, the pod's terminationGracePeriodSeconds will be used. Otherwise, this
                                        value overrides the value provided by the pod spec.
                                        Value must be non-negative integer. The value zero indicates stop immediately via
                                        the kill signal (no opportunity to shut down).
                                        This is a beta field and requires enabling ProbeTerminationGracePeriod feature gate.
                                        Minimum value is 1. spec.terminationGracePeriodSeconds is used if unset.
                                      format: int64
                                      type: integer
                                    timeoutSeconds:
                                      description: |-
                                        Number of seconds after which the probe times out.
                                        Defaults to 1 second. Minimum value is 1.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                      format: int32
                                      type: integer
                                  type: object
                                name:
                                  description: |-
                                    Name of the ephemeral container specified as a DNS_LABEL.
                                    This name must be unique among all containers, init containers and ephemeral containers.
                                  type: string
                                ports:
                                  description: Ports are not allowed for ephemeral
                                    containers.
                                  items:
                                    description: ContainerPort represents a network
                                      port in a single container.
                                    properties:
                                      containerPort:
                                        description: |-
                                          Number of port to expose on the pod's IP address.
                                          This must be a valid port number, 0 < x < 65536.
                                        format: int32
                                        type: integer
                                      hostIP:
                                        description: What host IP to bind the external
                                          port to.
                                        type: string
                                      hostPort:
                                        description: |-
                                          Number of port to expose on the host.
                                          If specified, this must be a valid port number, 0 < x < 65536.
                                          If HostNetwork is specified, this must match ContainerPort.
                                          Most containers do not need this.
                                        format: int32
                                        type: integer
                                      name:
                                        description: |-
                                          If specified, this must be an IANA_SVC_NAME and unique within the pod. Each
                                          named port in a pod must have a unique name. Name for the port that can be
                                          referred to by services.
                                        type: string
                                      protocol:
                                        default: TCP
                                        description: |-
                                          Protocol for port. Must be UDP, TCP, or SCTP.
                                          Defaults to "TCP".
                                        type: string
                                    required:
                                    - containerPort
                                    - protocol
                                    type: object
                                  type: array
                                  x-kubernetes-list-map-keys:
                                  - containerPort
                                  - protocol
                                  x-kubernetes-list-type: map
                                readinessProbe:
                                  description: Probes are not allowed for ephemeral
                                    containers.
                                  properties:
                                    exec:
                                      description: Exec specifies the action to take.
                                      properties:
                                        command:
                                          description: |-
                                            Command is the command line to execute inside the container, the working directory for the
                                            command  is root ('/') in the container's filesystem. The command is simply exec'd, it is
                                            not run inside a shell, so traditional shell instructions ('|', etc) won't work. To use
                                            a shell, you need to explicitly call out to that shell.
                                            Exit status of 0 is treated as live/healthy and non-zero is unhealthy.
                                          items:
                                            type: string
                                          type: array
                                      type: object
                                    failureThreshold:
                                      description: |-
                                        Minimum consecutive failures for the probe to be considered failed after having succeeded.
                                        Defaults to 3. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    grpc:
                                      description: GRPC specifies an action involving
                                        a GRPC port.
                                      properties:
                                        port:
                                          description: Port number of the gRPC service.
                                            Number must be in the range 1 to 65535.
                                          format: int32
                                          type: integer
                                        service:
                                          description: |-
                                            Service is the name of the service to place in the gRPC HealthCheckRequest
                                            (see https://github.com/grpc/grpc/blob/master/doc/health-checking.md).


                                            If this is not specified, the default behavior is defined by gRPC.
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    httpGet:
                                      description: HTTPGet specifies the http request
                                        to perform.
                                      properties:
                                        host:
                                          description: |-
                                            Host name to connect to, defaults to the pod IP. You probably want to set
                                            "Host" in httpHeaders instead.
                                          type: string
                                        httpHeaders:
                                          description: Custom headers to set in the
                                            request. HTTP allows repeated headers.
                                          items:
                                            description: HTTPHeader describes a custom
                                              header to be used in HTTP probes
                                            properties:
                                              name:
                                                description: |-
                                                  The header field name.
                                                  This will be canonicalized upon output, so case-variant names will be understood as the same header.
                                                type: string
                                              value:
                                                description: The header field value
                                                type: string
                                            required:
                                            - name
                                            - value
                                            type: object
                                          type: array
                                        path:
                                          description: Path to access on the HTTP
                                            server.
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: |-
                                            Name or number of the port to access on the container.
                                            Number must be in the range 1 to 65535.
                                            Name must be an IANA_SVC_NAME.
                                          x-kubernetes-int-or-string: true
                                        scheme:
                                          description: |-
                                            Scheme to use for connecting to the host.
                                            Defaults to HTTP.
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    initialDelaySeconds:
                                      description: |-
                                        Number of seconds after the container has started before liveness probes are initiated.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                      format: int32
                                      type: integer
                                    periodSeconds:
                                      description: |-
                                        How often (in seconds) to perform the probe.
                                        Default to 10 seconds. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    successThreshold:
                                      description: |-
                                        Minimum consecutive successes for the probe to be considered successful after having failed.
                                        Defaults to 1. Must be 1 for liveness and startup. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    tcpSocket:
                                      description: TCPSocket specifies an action involving
                                        a TCP port.
                                      properties:
                                        host:
                                          description: 'Optional: Host name to connect
                                            to, defaults to the pod IP.'
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: |-
                                            Number or name of the port to access on the container.
                                            Number must be in the range 1 to 65535.
                                            Name must be an IANA_SVC_NAME.
                                          x-kubernetes-int-or-string: true
                                      required:
                                      - port
                                      type: object
                                    terminationGracePeriodSeconds:
                                      description: |-
                                        Optional duration in seconds the pod needs to terminate gracefully upon probe failure.
                                        The grace period is the duration in seconds after the processes running in the pod are sent
                                        a termination signal and the time when the processes are forcibly halted with a kill signal.
                                        Set this value longer than the expected cleanup time for your process.
                                        If this value is nil, the pod's terminationGracePeriodSeconds will be used. Otherwise, this
                                        value overrides the value provided by the pod spec.
                                        Value must be non-negative integer. The value zero indicates stop immediately via
                                        the kill signal (no opportunity to shut down).
                                        This is a beta field and requires enabling ProbeTerminationGracePeriod feature gate.
                                        Minimum value is 1. spec.terminationGracePeriodSeconds is used if unset.
                                      format: int64
                                      type: integer
                                    timeoutSeconds:
                                      description: |-
                                        Number of seconds after which the probe times out.
                                        Defaults to 1 second. Minimum value is 1.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                      format: int32
                                      type: integer
                                  type: object
                                resizePolicy:
                                  description: Resources resize policy for the container.
                                  items:
                                    description: ContainerResizePolicy represents
                                      resource resize policy for the container.
                                    properties:
                                      resourceName:
                                        description: |-
                                          Name of the resource to which this resource resize policy applies.
                                          Supported values: cpu, memory.
                                        type: string
                                      restartPolicy:
                                        description: |-
                                          Restart policy to apply when specified resource is resized.
                                          If not specified, it defaults to NotRequired.
                                        type: string
                                    required:
                                    - resourceName
                                    - restartPolicy
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                                resources:
                                  description: |-
                                    Resources are not allowed for ephemeral containers. Ephemeral containers use spare resources
                                    already allocated to the pod.
                                  properties:
                                    claims:
                                      description: |-
                                        Claims lists the names of resources, defined in spec.resourceClaims,
                                        that are used by this container.


                                        This is an alpha field and requires enabling the
                                        DynamicResourceAllocation feature gate.


                                        This field is immutable. It can only be set for containers.
                                      items:
                                        description: ResourceClaim references one
                                          entry in PodSpec.ResourceClaims.
                                        properties:
                                          name:
                                            description: |-
                                              Name must match the name of one entry in pod.spec.resourceClaims of
                                              the Pod where this field is used. It makes that resource available
                                              inside a container.
                                            type: string
                                        required:
                                        - name
                                        type: object
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                    limits:
                                      additionalProperties:
                                        anyOf:
                                        - type: integer
                                        - type: string
                                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                        x-kubernetes-int-or-string: true
                                      description: |-
                                        Limits describes the maximum amount of compute resources allowed.
                                        More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                                      type: object
                                    requests:
                                      additionalProperties:
                                        anyOf:
                                        - type: integer
                                        - type: string
                                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                        x-kubernetes-int-or-string: true
                                      description: |-
                                        Requests describes the minimum amount of compute resources required.
                                        If Requests is omitted for a container, it defaults to Limits if that is explicitly specified,
                                        otherwise to an implementation-defined value. Requests cannot exceed Limits.
                                        More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                                      type: object
                                  type: object
                                restartPolicy:
                                  description: |-
                                    Restart policy for the container to manage the restart behavior of each
                                    container within a pod.
                                    This may only be set for init containers. You cannot set this field on
                                    ephemeral containers.
                                  type: string
                                securityContext:
                                  description: |-
                                    Optional: SecurityContext defines the security options the ephemeral container should be run with.
                                    If set, the fields of SecurityContext override the equivalent fields of PodSecurityContext.
                                  properties:
                                    allowPrivilegeEscalation:
                                      description: |-
                                        AllowPrivilegeEscalation controls whether a process can gain more
                                        privileges than its parent process. This bool directly controls if
                                        the no_new_privs flag will be set on the container process.
                                        AllowPrivilegeEscalation is true always when the container is:
                                        1) run as Privileged
                                        2) has CAP_SYS_ADMIN
                                        Note that this field cannot be set when spec.os.name is windows.
                                      type: boolean
                                    capabilities:
                                      description: |-
                                        The capabilities to add/drop when running containers.
                                        Defaults to the default set of capabilities granted by the container runtime.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      properties:
                                        add:
                                          description: Added capabilities
                                          items:
                                            description: Capability represent POSIX
                                              capabilities type
                                            type: string
                                          type: array
                                        drop:
                                          description: Removed capabilities
                                          items:
                                            description: Capability represent POSIX
                                              capabilities type
                                            type: string
                                          type: array
                                      type: object
                                    privileged:
                                      description: |-
                                        Run container in privileged mode.
                                        Processes in privileged containers are essentially equivalent to root on the host.
                                        Defaults to false.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      type: boolean
                                    procMount:
                                      description: |-
                                        procMount denotes the type of proc mount to use for the containers.
                                        The default is DefaultProcMount which uses the container runtime defaults for
                                        readonly paths and masked paths.
                                        This requires the ProcMountType feature flag to be enabled.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      type: string
                                    readOnlyRootFilesystem:
                                      description: |-
                                        Whether this container has a read-only root filesystem.
                                        Default is false.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      type: boolean
                                    runAsGroup:
                                      description: |-
                                        The GID to run the entrypoint of the container process.
                                        Uses runtime default if unset.
                                        May also be set in PodSecurityContext.  If set in both SecurityContext and
                                        PodSecurityContext, the value specified in SecurityContext takes precedence.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      format: int64
                                      type: integer
                                    runAsNonRoot:
                                      description: |-
                                        Indicates that the container must run as a non-root user.
                                        If true, the Kubelet will validate the image at runtime to ensure that it
                                        does not run as UID 0 (root) and fail to start the container if it does.
                                        If unset or false, no such validation will be performed.
                                        May also be set in PodSecurityContext.  If set in both SecurityContext and
                                        PodSecurityContext, the value specified in SecurityContext takes precedence.
                                      type: boolean
                                    runAsUser:
                                      description: |-
                                        The UID to run the entrypoint of the container process.
                                        Defaults to user specified in image metadata if unspecified.
                                        May also be set in PodSecurityContext.  If set in both SecurityContext and
                                        PodSecurityContext, the value specified in SecurityContext takes precedence.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      format: int64
                                      type: integer
                                    seLinuxOptions:
                                      description: |-
                                        The SELinux context to be applied to the container.
                                        If unspecified, the container runtime will allocate a random SELinux context for each
                                        container.  May also be set in PodSecurityContext.  If set in both SecurityContext and
                                        PodSecurityContext, the value specified in SecurityContext takes precedence.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      properties:
                                        level:
                                          description: Level is SELinux level label
                                            that applies to the container.
                                          type: string
                                        role:
                                          description: Role is a SELinux role label
                                            that applies to the container.
                                          type: string
                                        type:
                                          description: Type is a SELinux type label
                                            that applies to the container.
                                          type: string
                                        user:
                                          description: User is a SELinux user label
                                            that applies to the container.
                                          type: string
                                      type: object
                                    seccompProfile:
                                      description: |-
                                        The seccomp options to use by this container. If seccomp options are
                                        provided at both the pod & container level, the container options
                                        override the pod options.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      properties:
                                        localhostProfile:
                                          description: |-
                                            localhostProfile indicates a profile defined in a file on the node should be used.
                                            The profile must be preconfigured on the node to work.
                                            Must be a descending path, relative to the kubelet's configured seccomp profile location.
                                            Must be set if type is "Localhost". Must NOT be set for any other type.
                                          type: string
                                        type:
                                          description: |-
                                            type indicates which kind of seccomp profile will be applied.
                                            Valid options are:


                                            Localhost - a profile defined in a file on the node should be used.
                                            RuntimeDefault - the container runtime default profile should be used.
                                            Unconfined - no profile should be applied.
                                          type: string
                                      required:
                                      - type
                                      type: object
                                    windowsOptions:
                                      description: |-
                                        The Windows specific settings applied to all containers.
                                        If unspecified, the options from the PodSecurityContext will be used.
                                        If set in both SecurityContext and PodSecurityContext, the value specified in SecurityContext takes precedence.
                                        Note that this field cannot be set when spec.os.name is linux.
                                      properties:
                                        gmsaCredentialSpec:
                                          description: |-
                                            GMSACredentialSpec is where the GMSA admission webhook
                                            (https://github.com/kubernetes-sigs/windows-gmsa) inlines the contents of the
                                            GMSA credential spec named by the GMSACredentialSpecName field.
                                          type: string
                                        gmsaCredentialSpecName:
                                          description: GMSACredentialSpecName is the
                                            name of the GMSA credential spec to use.
                                          type: string
                                        hostProcess:
                                          description: |-
                                            HostProcess determines if a container should be run as a 'Host Process' container.
                                            All of a Pod's containers must have the same effective HostProcess value
                                            (it is not allowed to have a mix of HostProcess containers and non-HostProcess containers).
                                            In addition, if HostProcess is true then HostNetwork must also be set to true.
                                          type: boolean
                                        runAsUserName:
                                          description: |-
                                            The UserName in Windows to run the entrypoint of the container process.
                                            Defaults to the user specified in image metadata if unspecified.
                                            May also be set in PodSecurityContext. If set in both SecurityContext and
                                            PodSecurityContext, the value specified in SecurityContext takes precedence.
                                          type: string
                                      type: object
                                  type: object
                                startupProbe:
                                  description: Probes are not allowed for ephemeral
                                    containers.
                                  properties:
                                    exec:
                                      description: Exec specifies the action to take.
                                      properties:
                                        command:
                                          description: |-
                                            Command is the command line to execute inside the container, the working directory for the
                                            command  is root ('/') in the container's filesystem. The command is simply exec'd, it is
                                            not run inside a shell, so traditional shell instructions ('|', etc) won't work. To use
                                            a shell, you need to explicitly call out to that shell.
                                            Exit status of 0 is treated as live/healthy and non-zero is unhealthy.
                                          items:
                                            type: string
                                          type: array
                                      type: object
                                    failureThreshold:
                                      description: |-
                                        Minimum consecutive failures for the probe to be considered failed after having succeeded.
                                        Defaults to 3. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    grpc:
                                      description: GRPC specifies an action involving
                                        a GRPC port.
                                      properties:
                                        port:
                                          description: Port number of the gRPC service.
                                            Number must be in the range 1 to 65535.
                                          format: int32
                                          type: integer
                                        service:
                                          description: |-
                                            Service is the name of the service to place in the gRPC HealthCheckRequest
                                            (see https://github.com/grpc/grpc/blob/master/doc/health-checking.md).


                                            If this is not specified, the default behavior is defined by gRPC.
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    httpGet:
                                      description: HTTPGet specifies the http request
                                        to perform.
                                      properties:
                                        host:
                                          description: |-
                                            Host name to connect to, defaults to the pod IP. You probably want to set
                                            "Host" in httpHeaders instead.
                                          type: string
                                        httpHeaders:
                                          description: Custom headers to set in the
                                            request. HTTP allows repeated headers.
                                          items:
                                            description: HTTPHeader describes a custom
                                              header to be used in HTTP probes
                                            properties:
                                              name:
                                                description: |-
                                                  The header field name.
                                                  This will be canonicalized upon output, so case-variant names will be understood as the same header.
                                                type: string
                                              value:
                                                description: The header field value
                                                type: string
                                            required:
                                            - name
                                            - value
                                            type: object
                                          type: array
                                        path:
                                          description: Path to access on the HTTP
                                            server.
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: |-
                                            Name or number of the port to access on the container.
                                            Number must be in the range 1 to 65535.
                                            Name must be an IANA_SVC_NAME.
                                          x-kubernetes-int-or-string: true
                                        scheme:
                                          description: |-
                                            Scheme to use for connecting to the host.
                                            Defaults to HTTP.
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    initialDelaySeconds:
                                      description: |-
                                        Number of seconds after the container has started before liveness probes are initiated.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                      format: int32
                                      type: integer
                                    periodSeconds:
                                      description: |-
                                        How often (in seconds) to perform the probe.
                                        Default to 10 seconds. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    successThreshold:
                                      description: |-
                                        Minimum consecutive successes for the probe to be considered successful after having failed.
                                        Defaults to 1. Must be 1 for liveness and startup. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    tcpSocket:
                                      description: TCPSocket specifies an action involving
                                        a TCP port.
                                      properties:
                                        host:
                                          description: 'Optional: Host name to connect
                                            to, defaults to the pod IP.'
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: |-
                                            Number or name of the port to access on the container.
                                            Number must be in the range 1 to 65535.
                                            Name must be an IANA_SVC_NAME.
                                          x-kubernetes-int-or-string: true
                                      required:
                                      - port
                                      type: object
                                    terminationGracePeriodSeconds:
                                      description: |-
                                        Optional duration in seconds the pod needs to terminate gracefully upon probe failure.
                                        The grace period is the duration in seconds after the processes running in the pod are sent
                                        a termination signal and the time when the processes are forcibly halted with a kill signal.
                                        Set this value longer than the expected cleanup time for your process.
                                        If this value is nil, the pod's terminationGracePeriodSeconds will be used. Otherwise, this
                                        value overrides the value provided by the pod spec.
                                        Value must be non-negative integer. The value zero indicates stop immediately via
                                        the kill signal (no opportunity to shut down).
                                        This is a beta field and requires enabling ProbeTerminationGracePeriod feature gate.
                                        Minimum value is 1. spec.terminationGracePeriodSeconds is used if unset.
                                      format: int64
                                      type: integer
                                    timeoutSeconds:
                                      description: |-
                                        Number of seconds after which the probe times out.
                                        Defaults to 1 second. Minimum value is 1.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                      format: int32
                                      type: integer
                                  type: object
                                stdin:
                                  description: |-
                                    Whether this container should allocate a buffer for stdin in the container runtime. If this
                                    is not set, reads from stdin in the container will always result in EOF.
                                    Default is false.
                                  type: boolean
                                stdinOnce:
                                  description: |-
                                    Whether the container runtime should close the stdin channel after it has been opened by
                                    a single attach. When stdin is true the stdin stream will remain open across multiple attach
                                    sessions. If stdinOnce is set to true, stdin is opened on container start, is empty until the
                                    first client attaches to stdin, and then remains open and accepts data until the client disconnects,
                                    at which time stdin is closed and remains closed until the container is restarted. If this
                                    flag is false, a container processes that reads from stdin will never receive an EOF.
                                    Default is false
                                  type: boolean
                                targetContainerName:
                                  description: |-
                                    If set, the name of the container from PodSpec that this ephemeral container targets.
                                    The ephemeral container will be run in the namespaces (IPC, PID, etc) of this container.
                                    If not set then the ephemeral container uses the namespaces configured in the Pod spec.


                                    The container runtime must implement support for this feature. If the runtime does not
                                    support namespace targeting then the result of setting this field is undefined.
                                  type: string
                                terminationMessagePath:
                                  description: |-
                                    Optional: Path at which the file to which the container's termination message
                                    will be written is mounted into the container's filesystem.
                                    Message written is intended to be brief final status, such as an assertion failure message.
                                    Will be truncated by the node if greater than 4096 bytes. The total message length across
                                    all containers will be limited to 12kb.
                                    Defaults to /dev/termination-log.
                                    Cannot be updated.
                                  type: string
                                terminationMessagePolicy:
                                  description: |-
                                    Indicate how the termination message should be populated. File will use the contents of
                                    terminationMessagePath to populate the container status message on both success and failure.
                                    FallbackToLogsOnError will use the last chunk of container log output if the termination
                                    message file is empty and the container exited with an error.
                                    The log output is limited to 2048 bytes or 80 lines, whichever is smaller.
                                    Defaults to File.
                                    Cannot be updated.
                                  type: string
                                tty:
                                  description: |-
                                    Whether this container should allocate a TTY for itself, also requires 'stdin' to be true.
                                    Default is false.
                                  type: boolean
                                volumeDevices:
                                  description: volumeDevices is the list of block
                                    devices to be used by the container.
                                  items:
                                    description: volumeDevice describes a mapping
                                      of a raw block device within a container.
                                    properties:
                                      devicePath:
                                        description: devicePath is the path inside
                                          of the container that the device will be
                                          mapped to.
                                        type: string
                                      name:
                                        description: name must match the name of a
                                          persistentVolumeClaim in the pod
                                        type: string
                                    required:
                                    - devicePath
                                    - name
                                    type: object
                                  type: array
                                volumeMounts:
                                  description: |-
                                    Pod volumes to mount into the container's filesystem. Subpath mounts are not allowed for ephemeral containers.
                                    Cannot be updated.
                                  items:
                                    description: VolumeMount describes a mounting
                                      of a Volume within a container.
                                    properties:
                                      mountPath:
                                        description: |-
                                          Path within the container at which the volume should be mounted.  Must
                                          not contain ':'.
                                        type: string
                                      mountPropagation:
                                        description: |-
                                          mountPropagation determines how mounts are propagated from the host
                                          to container and the other way around.
                                          When not set, MountPropagationNone is used.
                                          This field is beta in 1.10.
                                        type: string
                                      name:
                                        description: This must match the Name of a
                                          Volume.
                                        type: string
                                      readOnly:
                                        description: |-
                                          Mounted read-only if true, read-write otherwise (false or unspecified).
                                          Defaults to false.
                                        type: boolean
                                      subPath:
                                        description: |-
                                          Path within the volume from which the container's volume should be mounted.
                                          Defaults to "" (volume's root).
                                        type: string
                                      subPathExpr:
                                        description: |-
                                          Expanded path within the volume from which the container's volume should be mounted.
                                          Behaves similarly to SubPath but environment variable references $(VAR_NAME) are expanded using the container's environment.
                                          Defaults to "" (volume's root).
                                          SubPathExpr and SubPath are mutually exclusive.
                                        type: string
                                    required:
                                    - mountPath
                                    - name
                                    type: object
                                  type: array
                                workingDir:
                                  description: |-
                                    Container's working directory.
                                    If not specified, the container runtime's default will be used, which
                                    might be configured in the container image.
                                    Cannot be updated.
                                  type: string
                              required:
                              - name
                              type: object
                            type: array
                          hostAliases:
                            description: |-
                              HostAliases is an optional list of hosts and IPs that will be injected into the pod's hosts
                              file if specified. This is only valid for non-hostNetwork pods.
                            items:
                              description: |-
                                HostAlias holds the mapping between IP and hostnames that will be injected as an entry in the
                                pod's hosts file.
                              properties:
                                hostnames:
                                  description: Hostnames for the above IP address.
                                  items:
                                    type: string
                                  type: array
                                ip:
                                  description: IP address of the host file entry.
                                  type: string
                              type: object
                            type: array
                          hostIPC:
                            description: |-
                              Use the host's ipc namespace.
                              Optional: Default to false.
                            type: boolean
                          hostNetwork:
                            description: |-
                              Host networking requested for this pod. Use the host's network namespace.
                              If this option is set, the ports that will be used must be specified.
                              Default to false.
                            type: boolean
                          hostPID:
                            description: |-
                              Use the host's pid namespace.
                              Optional: Default to false.
                            type: boolean
                          hostUsers:
                            description: |-
                              Use the host's user namespace.
                              Optional: Default to true.
                              If set to true or not present, the pod will be run in the host user namespace, useful
                              for when the pod needs a feature only available to the host user namespace, such as
                              loading a kernel module with CAP_SYS_MODULE.
                              When set to false, a new userns is created for the pod. Setting false is useful for
                              mitigating container breakout vulnerabilities even allowing users to run their
                              containers as root without actually having root privileges on the host.
                              This field is alpha-level and is only honored by servers that enable the UserNamespacesSupport feature.
                            type: boolean
                          hostname:
                            description: |-
                              Specifies the hostname of the Pod
                              If not specified, the pod's hostname will be set to a system-defined value.
                            type: string
                          imagePullSecrets:
                            description: |-
                              ImagePullSecrets is an optional list of references to secrets in the same namespace to use for pulling any of the images used by this PodSpec.
                              If specified, these secrets will be passed to individual puller implementations for them to use.
                              More info: https://kubernetes.io/docs/concepts/containers/images#specifying-imagepullsecrets-on-a-pod
                            items:
                              description: |-
                                LocalObjectReference contains enough information to let you locate the
                                referenced object inside the same namespace.
                              properties:
                                name:
                                  description: |-
                                    Name of the referent.
                                    More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                    TODO: Add other useful fields. apiVersion, kind, uid?
                                  type: string
                              type: object
                              x-kubernetes-map-type: atomic
                            type: array
                          initContainers:
                            description: |-
                              List of initialization containers belonging to the pod.
                              Init containers are executed in order prior to containers being started. If any
                              init container fails, the pod is considered to have failed and is handled according
                              to its restartPolicy. The name for an init container or normal container must be
                              unique among all containers.
                              Init containers may not have Lifecycle actions, Readiness probes, Liveness probes, or Startup probes.
                              The resourceRequirements of an init container are taken into account during scheduling
                              by finding the highest request/limit for each resource type, and then using the max of
                              of that value or the sum of the normal containers. Limits are applied to init containers
                              in a similar fashion.
                              Init containers cannot currently be added or removed.
                              Cannot be updated.
                              More info: https://kubernetes.io/docs/concepts/workloads/pods/init-containers/
                            items:
                              description: A single application container that you
                                want to run within a pod.
                              properties:
                                args:
                                  description: |-
                                    Arguments to the entrypoint.
                                    The container image's CMD is used if this is not provided.
                                    Variable references $(VAR_NAME) are expanded using the container's environment. If a variable
                                    cannot be resolved, the reference in the input string will be unchanged. Double $$ are reduced
                                    to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e. "$$(VAR_NAME)" will
                                    produce the string literal "$(VAR_NAME)". Escaped references will never be expanded, regardless
                                    of whether the variable exists or not. Cannot be updated.
                                    More info: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#running-a-command-in-a-shell
                                  items:
                                    type: string
                                  type: array
                                command:
                                  description: |-
                                    Entrypoint array. Not executed within a shell.
                                    The container image's ENTRYPOINT is used if this is not provided.
                                    Variable references $(VAR_NAME) are expanded using the container's environment. If a variable
                                    cannot be resolved, the reference in the input string will be unchanged. Double $$ are reduced
                                    to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e. "$$(VAR_NAME)" will
                                    produce the string literal "$(VAR_NAME)". Escaped references will never be expanded, regardless
                                    of whether the variable exists or not. Cannot be updated.
                                    More info: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#running-a-command-in-a-shell
                                  items:
                                    type: string
                                  type: array
                                env:
                                  description: |-
                                    List of environment variables to set in the container.
                                    Cannot be updated.
                                  items:
                                    description: EnvVar represents an environment
                                      variable present in a Container.
                                    properties:
                                      name:
                                        description: Name of the environment variable.
                                          Must be a C_IDENTIFIER.
                                        type: string
                                      value:
                                        description: |-
                                          Variable references $(VAR_NAME) are expanded
                                          using the previously defined environment variables in the container and
                                          any service environment variables. If a variable cannot be resolved,
                                          the reference in the input string will be unchanged. Double $$ are reduced
                                          to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e.
                                          "$$(VAR_NAME)" will produce the string literal "$(VAR_NAME)".
                                          Escaped references will never be expanded, regardless of whether the variable
                                          exists or not.
                                          Defaults to "".
                                        type: string
                                      valueFrom:
                                        description: Source for the environment variable's
                                          value. Cannot be used if value is not empty.
                                        properties:
                                          configMapKeyRef:
                                            description: Selects a key of a ConfigMap.
                                            properties:
                                              key:
                                                description: The key to select.
                                                type: string
                                              name:
                                                description: |-
                                                  Name of the referent.
                                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                  TODO: Add other useful fields. apiVersion, kind, uid?
                                                type: string
                                              optional:
                                                description: Specify whether the ConfigMap
                                                  or its key must be defined
                                                type: boolean
                                            required:
                                            - key
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          fieldRef:
                                            description: |-
                                              Selects a field of the pod: supports metadata.name, metadata.namespace, `metadata.labels['<KEY>']`, `metadata.annotations['<KEY>']`,
                                              spec.nodeName, spec.serviceAccountName, status.hostIP, status.podIP, status.podIPs.
                                            properties:
                                              apiVersion:
                                                description: Version of the schema
                                                  the FieldPath is written in terms
                                                  of, defaults to "v1".
                                                type: string
                                              fieldPath:
                                                description: Path of the field to
                                                  select in the specified API version.
                                                type: string
                                            required:
                                            - fieldPath
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          resourceFieldRef:
                                            description: |-
                                              Selects a resource of the container: only resources limits and requests
                                              (limits.cpu, limits.memory, limits.ephemeral-storage, requests.cpu, requests.memory and requests.ephemeral-storage) are currently supported.
                                            properties:
                                              containerName:
                                                description: 'Container name: required
                                                  for volumes, optional for env vars'
                                                type: string
                                              divisor:
                                                anyOf:
                                                - type: integer
                                                - type: string
                                                description: Specifies the output
                                                  format of the exposed resources,
                                                  defaults to "1"
                                                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                                x-kubernetes-int-or-string: true
                                              resource:
                                                description: 'Required: resource to
                                                  select'
                                                type: string
                                            required:
                                            - resource
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          secretKeyRef:
                                            description: Selects a key of a secret
                                              in the pod's namespace
                                            properties:
                                              key:
                                                description: The key of the secret
                                                  to select from.  Must be a valid
                                                  secret key.
                                                type: string
                                              name:
                                                description: |-
                                                  Name of the referent.
                                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                  TODO: Add other useful fields. apiVersion, kind, uid?
                                                type: string
                                              optional:
                                                description: Specify whether the Secret
                                                  or its key must be defined
                                                type: boolean
                                            required:
                                            - key
                                            type: object
                                            x-kubernetes-map-type: atomic
                                        type: object
                                    required:
                                    - name
                                    type: object
                                  type: array
                                envFrom:
                                  description: |-
                                    List of sources to populate environment variables in the container.
                                    The keys defined within a source must be a C_IDENTIFIER. All invalid keys
                                    will be reported as an event when the container is starting. When a key exists in multiple
                                    sources, the value associated with the last source will take precedence.
                                    Values defined by an Env with a duplicate key will take precedence.
                                    Cannot be updated.
                                  items:
                                    description: EnvFromSource represents the source
                                      of a set of ConfigMaps
                                    properties:
                                      configMapRef:
                                        description: The ConfigMap to select from
                                        properties:
                                          name:
                                            description: |-
                                              Name of the referent.
                                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                              TODO: Add other useful fields. apiVersion, kind, uid?
                                            type: string
                                          optional:
                                            description: Specify whether the ConfigMap
                                              must be defined
                                            type: boolean
                                        type: object
                                        x-kubernetes-map-type: atomic
                                      prefix:
                                        description: An optional identifier to prepend
                                          to each key in the ConfigMap. Must be a
                                          C_IDENTIFIER.
                                        type: string
                                      secretRef:
                                        description: The Secret to select from
                                        properties:
                                          name:
                                            description: |-
                                              Name of the referent.
                                              More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                              TODO: Add other useful fields. apiVersion, kind, uid?
                                            type: string
                                          optional:
                                            description: Specify whether the Secret
                                              must be defined
                                            type: boolean
                                        type: object
                                        x-kubernetes-map-type: atomic
                                    type: object
                                  type: array
                                image:
                                  description: |-
                                    Container image name.
                                    More info: https://kubernetes.io/docs/concepts/containers/images
                                    This field is optional to allow higher level config management to default or override
                                    container images in workload controllers like Deployments and StatefulSets.
                                  type: string
                                imagePullPolicy:
                                  description: |-
                                    Image pull policy.
                                    One of Always, Never, IfNotPresent.
                                    Defaults to Always if :latest tag is specified, or IfNotPresent otherwise.
                                    Cannot be updated.
                                    More info: https://kubernetes.io/docs/concepts/containers/images#updating-images
                                  type: string
                                lifecycle:
                                  description: |-
                                    Actions that the management system should take in response to container lifecycle events.
                                    Cannot be updated.
                                  properties:
                                    postStart:
                                      description: |-
                                        PostStart is called immediately after a container is created. If the handler fails,
                                        the container is terminated and restarted according to its restart policy.
                                        Other management of the container blocks until the hook completes.
                                        More info: https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#container-hooks
                                      properties:
                                        exec:
                                          description: Exec specifies the action to
                                            take.
                                          properties:
                                            command:
                                              description: |-
                                                Command is the command line to execute inside the container, the working directory for the
                                                command  is root ('/') in the container's filesystem. The command is simply exec'd, it is
                                                not run inside a shell, so traditional shell instructions ('|', etc) won't work. To use
                                                a shell, you need to explicitly call out to that shell.
                                                Exit status of 0 is treated as live/healthy and non-zero is unhealthy.
                                              items:
                                                type: string
                                              type: array
                                          type: object
                                        httpGet:
                                          description: HTTPGet specifies the http
                                            request to perform.
                                          properties:
                                            host:
                                              description: |-
                                                Host name to connect to, defaults to the pod IP. You probably want to set
                                                "Host" in httpHeaders instead.
                                              type: string
                                            httpHeaders:
                                              description: Custom headers to set in
                                                the request. HTTP allows repeated
                                                headers.
                                              items:
                                                description: HTTPHeader describes
                                                  a custom header to be used in HTTP
                                                  probes
                                                properties:
                                                  name:
                                                    description: |-
                                                      The header field name.
                                                      This will be canonicalized upon output, so case-variant names will be understood as the same header.
                                                    type: string
                                                  value:
                                                    description: The header field
                                                      value
                                                    type: string
                                                required:
                                                - name
                                                - value
                                                type: object
                                              type: array
                                            path:
                                              description: Path to access on the HTTP
                                                server.
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: |-
                                                Name or number of the port to access on the container.
                                                Number must be in the range 1 to 65535.
                                                Name must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                            scheme:
                                              description: |-
                                                Scheme to use for connecting to the host.
                                                Defaults to HTTP.
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        sleep:
                                          description: Sleep represents the duration
                                            that the container should sleep before
                                            being terminated.
                                          properties:
                                            seconds:
                                              description: Seconds is the number of
                                                seconds to sleep.
                                              format: int64
                                              type: integer
                                          required:
                                          - seconds
                                          type: object
                                        tcpSocket:
                                          description: |-
                                            Deprecated. TCPSocket is NOT supported as a LifecycleHandler and kept
                                            for the backward compatibility. There are no validation of this field and
                                            lifecycle hooks will fail in runtime when tcp handler is specified.
                                          properties:
                                            host:
                                              description: 'Optional: Host name to
                                                connect to, defaults to the pod IP.'
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: |-
                                                Number or name of the port to access on the container.
                                                Number must be in the range 1 to 65535.
                                                Name must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                          required:
                                          - port
                                          type: object
                                      type: object
                                    preStop:
                                      description: |-
                                        PreStop is called immediately before a container is terminated due to an
                                        API request or management event such as liveness/startup probe failure,
                                        preemption, resource contention, etc. The handler is not called if the
                                        container crashes or exits. The Pod's termination grace period countdown begins before the
                                        PreStop hook is executed. Regardless of the outcome of the handler, the
                                        container will eventually terminate within the Pod's termination grace
                                        period (unless delayed by finalizers). Other management of the container blocks until the hook completes
                                        or until the termination grace period is reached.
                                        More info: https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/#container-hooks
                                      properties:
                                        exec:
                                          description: Exec specifies the action to
                                            take.
                                          properties:
                                            command:
                                              description: |-
                                                Command is the command line to execute inside the container, the working directory for the
                                                command  is root ('/') in the container's filesystem. The command is simply exec'd, it is
                                                not run inside a shell, so traditional shell instructions ('|', etc) won't work. To use
                                                a shell, you need to explicitly call out to that shell.
                                                Exit status of 0 is treated as live/healthy and non-zero is unhealthy.
                                              items:
                                                type: string
                                              type: array
                                          type: object
                                        httpGet:
                                          description: HTTPGet specifies the http
                                            request to perform.
                                          properties:
                                            host:
                                              description: |-
                                                Host name to connect to, defaults to the pod IP. You probably want to set
                                                "Host" in httpHeaders instead.
                                              type: string
                                            httpHeaders:
                                              description: Custom headers to set in
                                                the request. HTTP allows repeated
                                                headers.
                                              items:
                                                description: HTTPHeader describes
                                                  a custom header to be used in HTTP
                                                  probes
                                                properties:
                                                  name:
                                                    description: |-
                                                      The header field name.
                                                      This will be canonicalized upon output, so case-variant names will be understood as the same header.
                                                    type: string
                                                  value:
                                                    description: The header field
                                                      value
                                                    type: string
                                                required:
                                                - name
                                                - value
                                                type: object
                                              type: array
                                            path:
                                              description: Path to access on the HTTP
                                                server.
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: |-
                                                Name or number of the port to access on the container.
                                                Number must be in the range 1 to 65535.
                                                Name must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                            scheme:
                                              description: |-
                                                Scheme to use for connecting to the host.
                                                Defaults to HTTP.
                                              type: string
                                          required:
                                          - port
                                          type: object
                                        sleep:
                                          description: Sleep represents the duration
                                            that the container should sleep before
                                            being terminated.
                                          properties:
                                            seconds:
                                              description: Seconds is the number of
                                                seconds to sleep.
                                              format: int64
                                              type: integer
                                          required:
                                          - seconds
                                          type: object
                                        tcpSocket:
                                          description: |-
                                            Deprecated. TCPSocket is NOT supported as a LifecycleHandler and kept
                                            for the backward compatibility. There are no validation of this field and
                                            lifecycle hooks will fail in runtime when tcp handler is specified.
                                          properties:
                                            host:
                                              description: 'Optional: Host name to
                                                connect to, defaults to the pod IP.'
                                              type: string
                                            port:
                                              anyOf:
                                              - type: integer
                                              - type: string
                                              description: |-
                                                Number or name of the port to access on the container.
                                                Number must be in the range 1 to 65535.
                                                Name must be an IANA_SVC_NAME.
                                              x-kubernetes-int-or-string: true
                                          required:
                                          - port
                                          type: object
                                      type: object
                                  type: object
                                livenessProbe:
                                  description: |-
                                    Periodic probe of container liveness.
                                    Container will be restarted if the probe fails.
                                    Cannot be updated.
                                    More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                  properties:
                                    exec:
                                      description: Exec specifies the action to take.
                                      properties:
                                        command:
                                          description: |-
                                            Command is the command line to execute inside the container, the working directory for the
                                            command  is root ('/') in the container's filesystem. The command is simply exec'd, it is
                                            not run inside a shell, so traditional shell instructions ('|', etc) won't work. To use
                                            a shell, you need to explicitly call out to that shell.
                                            Exit status of 0 is treated as live/healthy and non-zero is unhealthy.
                                          items:
                                            type: string
                                          type: array
                                      type: object
                                    failureThreshold:
                                      description: |-
                                        Minimum consecutive failures for the probe to be considered failed after having succeeded.
                                        Defaults to 3. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    grpc:
                                      description: GRPC specifies an action involving
                                        a GRPC port.
                                      properties:
                                        port:
                                          description: Port number of the gRPC service.
                                            Number must be in the range 1 to 65535.
                                          format: int32
                                          type: integer
                                        service:
                                          description: |-
                                            Service is the name of the service to place in the gRPC HealthCheckRequest
                                            (see https://github.com/grpc/grpc/blob/master/doc/health-checking.md).


                                            If this is not specified, the default behavior is defined by gRPC.
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    httpGet:
                                      description: HTTPGet specifies the http request
                                        to perform.
                                      properties:
                                        host:
                                          description: |-
                                            Host name to connect to, defaults to the pod IP. You probably want to set
                                            "Host" in httpHeaders instead.
                                          type: string
                                        httpHeaders:
                                          description: Custom headers to set in the
                                            request. HTTP allows repeated headers.
                                          items:
                                            description: HTTPHeader describes a custom
                                              header to be used in HTTP probes
                                            properties:
                                              name:
                                                description: |-
                                                  The header field name.
                                                  This will be canonicalized upon output, so case-variant names will be understood as the same header.
                                                type: string
                                              value:
                                                description: The header field value
                                                type: string
                                            required:
                                            - name
                                            - value
                                            type: object
                                          type: array
                                        path:
                                          description: Path to access on the HTTP
                                            server.
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: |-
                                            Name or number of the port to access on the container.
                                            Number must be in the range 1 to 65535.
                                            Name must be an IANA_SVC_NAME.
                                          x-kubernetes-int-or-string: true
                                        scheme:
                                          description: |-
                                            Scheme to use for connecting to the host.
                                            Defaults to HTTP.
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    initialDelaySeconds:
                                      description: |-
                                        Number of seconds after the container has started before liveness probes are initiated.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                      format: int32
                                      type: integer
                                    periodSeconds:
                                      description: |-
                                        How often (in seconds) to perform the probe.
                                        Default to 10 seconds. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    successThreshold:
                                      description: |-
                                        Minimum consecutive successes for the probe to be considered successful after having failed.
                                        Defaults to 1. Must be 1 for liveness and startup. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    tcpSocket:
                                      description: TCPSocket specifies an action involving
                                        a TCP port.
                                      properties:
                                        host:
                                          description: 'Optional: Host name to connect
                                            to, defaults to the pod IP.'
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: |-
                                            Number or name of the port to access on the container.
                                            Number must be in the range 1 to 65535.
                                            Name must be an IANA_SVC_NAME.
                                          x-kubernetes-int-or-string: true
                                      required:
                                      - port
                                      type: object
                                    terminationGracePeriodSeconds:
                                      description: |-
                                        Optional duration in seconds the pod needs to terminate gracefully upon probe failure.
                                        The grace period is the duration in seconds after the processes running in the pod are sent
                                        a termination signal and the time when the processes are forcibly halted with a kill signal.
                                        Set this value longer than the expected cleanup time for your process.
                                        If this value is nil, the pod's terminationGracePeriodSeconds will be used. Otherwise, this
                                        value overrides the value provided by the pod spec.
                                        Value must be non-negative integer. The value zero indicates stop immediately via
                                        the kill signal (no opportunity to shut down).
                                        This is a beta field and requires enabling ProbeTerminationGracePeriod feature gate.
                                        Minimum value is 1. spec.terminationGracePeriodSeconds is used if unset.
                                      format: int64
                                      type: integer
                                    timeoutSeconds:
                                      description: |-
                                        Number of seconds after which the probe times out.
                                        Defaults to 1 second. Minimum value is 1.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                      format: int32
                                      type: integer
                                  type: object
                                name:
                                  description: |-
                                    Name of the container specified as a DNS_LABEL.
                                    Each container in a pod must have a unique name (DNS_LABEL).
                                    Cannot be updated.
                                  type: string
                                ports:
                                  description: |-
                                    List of ports to expose from the container. Not specifying a port here
                                    DOES NOT prevent that port from being exposed. Any port which is
                                    listening on the default "0.0.0.0" address inside a container will be
                                    accessible from the network.
                                    Modifying this array with strategic merge patch may corrupt the data.
                                    For more information See https://github.com/kubernetes/kubernetes/issues/108255.
                                    Cannot be updated.
                                  items:
                                    description: ContainerPort represents a network
                                      port in a single container.
                                    properties:
                                      containerPort:
                                        description: |-
                                          Number of port to expose on the pod's IP address.
                                          This must be a valid port number, 0 < x < 65536.
                                        format: int32
                                        type: integer
                                      hostIP:
                                        description: What host IP to bind the external
                                          port to.
                                        type: string
                                      hostPort:
                                        description: |-
                                          Number of port to expose on the host.
                                          If specified, this must be a valid port number, 0 < x < 65536.
                                          If HostNetwork is specified, this must match ContainerPort.
                                          Most containers do not need this.
                                        format: int32
                                        type: integer
                                      name:
                                        description: |-
                                          If specified, this must be an IANA_SVC_NAME and unique within the pod. Each
                                          named port in a pod must have a unique name. Name for the port that can be
                                          referred to by services.
                                        type: string
                                      protocol:
                                        default: TCP
                                        description: |-
                                          Protocol for port. Must be UDP, TCP, or SCTP.
                                          Defaults to "TCP".
                                        type: string
                                    required:
                                    - containerPort
                                    - protocol
                                    type: object
                                  type: array
                                  x-kubernetes-list-map-keys:
                                  - containerPort
                                  - protocol
                                  x-kubernetes-list-type: map
                                readinessProbe:
                                  description: |-
                                    Periodic probe of container service readiness.
                                    Container will be removed from service endpoints if the probe fails.
                                    Cannot be updated.
                                    More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                  properties:
                                    exec:
                                      description: Exec specifies the action to take.
                                      properties:
                                        command:
                                          description: |-
                                            Command is the command line to execute inside the container, the working directory for the
                                            command  is root ('/') in the container's filesystem. The command is simply exec'd, it is
                                            not run inside a shell, so traditional shell instructions ('|', etc) won't work. To use
                                            a shell, you need to explicitly call out to that shell.
                                            Exit status of 0 is treated as live/healthy and non-zero is unhealthy.
                                          items:
                                            type: string
                                          type: array
                                      type: object
                                    failureThreshold:
                                      description: |-
                                        Minimum consecutive failures for the probe to be considered failed after having succeeded.
                                        Defaults to 3. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    grpc:
                                      description: GRPC specifies an action involving
                                        a GRPC port.
                                      properties:
                                        port:
                                          description: Port number of the gRPC service.
                                            Number must be in the range 1 to 65535.
                                          format: int32
                                          type: integer
                                        service:
                                          description: |-
                                            Service is the name of the service to place in the gRPC HealthCheckRequest
                                            (see https://github.com/grpc/grpc/blob/master/doc/health-checking.md).


                                            If this is not specified, the default behavior is defined by gRPC.
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    httpGet:
                                      description: HTTPGet specifies the http request
                                        to perform.
                                      properties:
                                        host:
                                          description: |-
                                            Host name to connect to, defaults to the pod IP. You probably want to set
                                            "Host" in httpHeaders instead.
                                          type: string
                                        httpHeaders:
                                          description: Custom headers to set in the
                                            request. HTTP allows repeated headers.
                                          items:
                                            description: HTTPHeader describes a custom
                                              header to be used in HTTP probes
                                            properties:
                                              name:
                                                description: |-
                                                  The header field name.
                                                  This will be canonicalized upon output, so case-variant names will be understood as the same header.
                                                type: string
                                              value:
                                                description: The header field value
                                                type: string
                                            required:
                                            - name
                                            - value
                                            type: object
                                          type: array
                                        path:
                                          description: Path to access on the HTTP
                                            server.
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: |-
                                            Name or number of the port to access on the container.
                                            Number must be in the range 1 to 65535.
                                            Name must be an IANA_SVC_NAME.
                                          x-kubernetes-int-or-string: true
                                        scheme:
                                          description: |-
                                            Scheme to use for connecting to the host.
                                            Defaults to HTTP.
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    initialDelaySeconds:
                                      description: |-
                                        Number of seconds after the container has started before liveness probes are initiated.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                      format: int32
                                      type: integer
                                    periodSeconds:
                                      description: |-
                                        How often (in seconds) to perform the probe.
                                        Default to 10 seconds. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    successThreshold:
                                      description: |-
                                        Minimum consecutive successes for the probe to be considered successful after having failed.
                                        Defaults to 1. Must be 1 for liveness and startup. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    tcpSocket:
                                      description: TCPSocket specifies an action involving
                                        a TCP port.
                                      properties:
                                        host:
                                          description: 'Optional: Host name to connect
                                            to, defaults to the pod IP.'
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: |-
                                            Number or name of the port to access on the container.
                                            Number must be in the range 1 to 65535.
                                            Name must be an IANA_SVC_NAME.
                                          x-kubernetes-int-or-string: true
                                      required:
                                      - port
                                      type: object
                                    terminationGracePeriodSeconds:
                                      description: |-
                                        Optional duration in seconds the pod needs to terminate gracefully upon probe failure.
                                        The grace period is the duration in seconds after the processes running in the pod are sent
                                        a termination signal and the time when the processes are forcibly halted with a kill signal.
                                        Set this value longer than the expected cleanup time for your process.
                                        If this value is nil, the pod's terminationGracePeriodSeconds will be used. Otherwise, this
                                        value overrides the value provided by the pod spec.
                                        Value must be non-negative integer. The value zero indicates stop immediately via
                                        the kill signal (no opportunity to shut down).
                                        This is a beta field and requires enabling ProbeTerminationGracePeriod feature gate.
                                        Minimum value is 1. spec.terminationGracePeriodSeconds is used if unset.
                                      format: int64
                                      type: integer
                                    timeoutSeconds:
                                      description: |-
                                        Number of seconds after which the probe times out.
                                        Defaults to 1 second. Minimum value is 1.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                      format: int32
                                      type: integer
                                  type: object
                                resizePolicy:
                                  description: Resources resize policy for the container.
                                  items:
                                    description: ContainerResizePolicy represents
                                      resource resize policy for the container.
                                    properties:
                                      resourceName:
                                        description: |-
                                          Name of the resource to which this resource resize policy applies.
                                          Supported values: cpu, memory.
                                        type: string
                                      restartPolicy:
                                        description: |-
                                          Restart policy to apply when specified resource is resized.
                                          If not specified, it defaults to NotRequired.
                                        type: string
                                    required:
                                    - resourceName
                                    - restartPolicy
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                                resources:
                                  description: |-
                                    Compute Resources required by this container.
                                    Cannot be updated.
                                    More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                                  properties:
                                    claims:
                                      description: |-
                                        Claims lists the names of resources, defined in spec.resourceClaims,
                                        that are used by this container.


                                        This is an alpha field and requires enabling the
                                        DynamicResourceAllocation feature gate.


                                        This field is immutable. It can only be set for containers.
                                      items:
                                        description: ResourceClaim references one
                                          entry in PodSpec.ResourceClaims.
                                        properties:
                                          name:
                                            description: |-
                                              Name must match the name of one entry in pod.spec.resourceClaims of
                                              the Pod where this field is used. It makes that resource available
                                              inside a container.
                                            type: string
                                        required:
                                        - name
                                        type: object
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                    limits:
                                      additionalProperties:
                                        anyOf:
                                        - type: integer
                                        - type: string
                                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                        x-kubernetes-int-or-string: true
                                      description: |-
                                        Limits describes the maximum amount of compute resources allowed.
                                        More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                                      type: object
                                    requests:
                                      additionalProperties:
                                        anyOf:
                                        - type: integer
                                        - type: string
                                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                        x-kubernetes-int-or-string: true
                                      description: |-
                                        Requests describes the minimum amount of compute resources required.
                                        If Requests is omitted for a container, it defaults to Limits if that is explicitly specified,
                                        otherwise to an implementation-defined value. Requests cannot exceed Limits.
                                        More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                                      type: object
                                  type: object
                                restartPolicy:
                                  description: |-
                                    RestartPolicy defines the restart behavior of individual containers in a pod.
                                    This field may only be set for init containers, and the only allowed value is "Always".
                                    For non-init containers or when this field is not specified,
                                    the restart behavior is defined by the Pod's restart policy and the container type.
                                    Setting the RestartPolicy as "Always" for the init container will have the following effect:
                                    this init container will be continually restarted on
                                    exit until all regular containers have terminated. Once all regular
                                    containers have completed, all init containers with restartPolicy "Always"
                                    will be shut down. This lifecycle differs from normal init containers and
                                    is often referred to as a "sidecar" container. Although this init
                                    container still starts in the init container sequence, it does not wait
                                    for the container to complete before proceeding to the next init
                                    container. Instead, the next init container starts immediately after this
                                    init container is started, or after any startupProbe has successfully
                                    completed.
                                  type: string
                                securityContext:
                                  description: |-
                                    SecurityContext defines the security options the container should be run with.
                                    If set, the fields of SecurityContext override the equivalent fields of PodSecurityContext.
                                    More info: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
                                  properties:
                                    allowPrivilegeEscalation:
                                      description: |-
                                        AllowPrivilegeEscalation controls whether a process can gain more
                                        privileges than its parent process. This bool directly controls if
                                        the no_new_privs flag will be set on the container process.
                                        AllowPrivilegeEscalation is true always when the container is:
                                        1) run as Privileged
                                        2) has CAP_SYS_ADMIN
                                        Note that this field cannot be set when spec.os.name is windows.
                                      type: boolean
                                    capabilities:
                                      description: |-
                                        The capabilities to add/drop when running containers.
                                        Defaults to the default set of capabilities granted by the container runtime.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      properties:
                                        add:
                                          description: Added capabilities
                                          items:
                                            description: Capability represent POSIX
                                              capabilities type
                                            type: string
                                          type: array
                                        drop:
                                          description: Removed capabilities
                                          items:
                                            description: Capability represent POSIX
                                              capabilities type
                                            type: string
                                          type: array
                                      type: object
                                    privileged:
                                      description: |-
                                        Run container in privileged mode.
                                        Processes in privileged containers are essentially equivalent to root on the host.
                                        Defaults to false.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      type: boolean
                                    procMount:
                                      description: |-
                                        procMount denotes the type of proc mount to use for the containers.
                                        The default is DefaultProcMount which uses the container runtime defaults for
                                        readonly paths and masked paths.
                                        This requires the ProcMountType feature flag to be enabled.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      type: string
                                    readOnlyRootFilesystem:
                                      description: |-
                                        Whether this container has a read-only root filesystem.
                                        Default is false.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      type: boolean
                                    runAsGroup:
                                      description: |-
                                        The GID to run the entrypoint of the container process.
                                        Uses runtime default if unset.
                                        May also be set in PodSecurityContext.  If set in both SecurityContext and
                                        PodSecurityContext, the value specified in SecurityContext takes precedence.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      format: int64
                                      type: integer
                                    runAsNonRoot:
                                      description: |-
                                        Indicates that the container must run as a non-root user.
                                        If true, the Kubelet will validate the image at runtime to ensure that it
                                        does not run as UID 0 (root) and fail to start the container if it does.
                                        If unset or false, no such validation will be performed.
                                        May also be set in PodSecurityContext.  If set in both SecurityContext and
                                        PodSecurityContext, the value specified in SecurityContext takes precedence.
                                      type: boolean
                                    runAsUser:
                                      description: |-
                                        The UID to run the entrypoint of the container process.
                                        Defaults to user specified in image metadata if unspecified.
                                        May also be set in PodSecurityContext.  If set in both SecurityContext and
                                        PodSecurityContext, the value specified in SecurityContext takes precedence.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      format: int64
                                      type: integer
                                    seLinuxOptions:
                                      description: |-
                                        The SELinux context to be applied to the container.
                                        If unspecified, the container runtime will allocate a random SELinux context for each
                                        container.  May also be set in PodSecurityContext.  If set in both SecurityContext and
                                        PodSecurityContext, the value specified in SecurityContext takes precedence.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      properties:
                                        level:
                                          description: Level is SELinux level label
                                            that applies to the container.
                                          type: string
                                        role:
                                          description: Role is a SELinux role label
                                            that applies to the container.
                                          type: string
                                        type:
                                          description: Type is a SELinux type label
                                            that applies to the container.
                                          type: string
                                        user:
                                          description: User is a SELinux user label
                                            that applies to the container.
                                          type: string
                                      type: object
                                    seccompProfile:
                                      description: |-
                                        The seccomp options to use by this container. If seccomp options are
                                        provided at both the pod & container level, the container options
                                        override the pod options.
                                        Note that this field cannot be set when spec.os.name is windows.
                                      properties:
                                        localhostProfile:
                                          description: |-
                                            localhostProfile indicates a profile defined in a file on the node should be used.
                                            The profile must be preconfigured on the node to work.
                                            Must be a descending path, relative to the kubelet's configured seccomp profile location.
                                            Must be set if type is "Localhost". Must NOT be set for any other type.
                                          type: string
                                        type:
                                          description: |-
                                            type indicates which kind of seccomp profile will be applied.
                                            Valid options are:


                                            Localhost - a profile defined in a file on the node should be used.
                                            RuntimeDefault - the container runtime default profile should be used.
                                            Unconfined - no profile should be applied.
                                          type: string
                                      required:
                                      - type
                                      type: object
                                    windowsOptions:
                                      description: |-
                                        The Windows specific settings applied to all containers.
                                        If unspecified, the options from the PodSecurityContext will be used.
                                        If set in both SecurityContext and PodSecurityContext, the value specified in SecurityContext takes precedence.
                                        Note that this field cannot be set when spec.os.name is linux.
                                      properties:
                                        gmsaCredentialSpec:
                                          description: |-
                                            GMSACredentialSpec is where the GMSA admission webhook
                                            (https://github.com/kubernetes-sigs/windows-gmsa) inlines the contents of the
                                            GMSA credential spec named by the GMSACredentialSpecName field.
                                          type: string
                                        gmsaCredentialSpecName:
                                          description: GMSACredentialSpecName is the
                                            name of the GMSA credential spec to use.
                                          type: string
                                        hostProcess:
                                          description: |-
                                            HostProcess determines if a container should be run as a 'Host Process' container.
                                            All of a Pod's containers must have the same effective HostProcess value
                                            (it is not allowed to have a mix of HostProcess containers and non-HostProcess containers).
                                            In addition, if HostProcess is true then HostNetwork must also be set to true.
                                          type: boolean
                                        runAsUserName:
                                          description: |-
                                            The UserName in Windows to run the entrypoint of the container process.
                                            Defaults to the user specified in image metadata if unspecified.
                                            May also be set in PodSecurityContext. If set in both SecurityContext and
                                            PodSecurityContext, the value specified in SecurityContext takes precedence.
                                          type: string
                                      type: object
                                  type: object
                                startupProbe:
                                  description: |-
                                    StartupProbe indicates that the Pod has successfully initialized.
                                    If specified, no other probes are executed until this completes successfully.
                                    If this probe fails, the Pod will be restarted, just as if the livenessProbe failed.
                                    This can be used to provide different probe parameters at the beginning of a Pod's lifecycle,
                                    when it might take a long time to load data or warm a cache, than during steady-state operation.
                                    This cannot be updated.
                                    More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                  properties:
                                    exec:
                                      description: Exec specifies the action to take.
                                      properties:
                                        command:
                                          description: |-
                                            Command is the command line to execute inside the container, the working directory for the
                                            command  is root ('/') in the container's filesystem. The command is simply exec'd, it is
                                            not run inside a shell, so traditional shell instructions ('|', etc) won't work. To use
                                            a shell, you need to explicitly call out to that shell.
                                            Exit status of 0 is treated as live/healthy and non-zero is unhealthy.
                                          items:
                                            type: string
                                          type: array
                                      type: object
                                    failureThreshold:
                                      description: |-
                                        Minimum consecutive failures for the probe to be considered failed after having succeeded.
                                        Defaults to 3. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    grpc:
                                      description: GRPC specifies an action involving
                                        a GRPC port.
                                      properties:
                                        port:
                                          description: Port number of the gRPC service.
                                            Number must be in the range 1 to 65535.
                                          format: int32
                                          type: integer
                                        service:
                                          description: |-
                                            Service is the name of the service to place in the gRPC HealthCheckRequest
                                            (see https://github.com/grpc/grpc/blob/master/doc/health-checking.md).


                                            If this is not specified, the default behavior is defined by gRPC.
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    httpGet:
                                      description: HTTPGet specifies the http request
                                        to perform.
                                      properties:
                                        host:
                                          description: |-
                                            Host name to connect to, defaults to the pod IP. You probably want to set
                                            "Host" in httpHeaders instead.
                                          type: string
                                        httpHeaders:
                                          description: Custom headers to set in the
                                            request. HTTP allows repeated headers.
                                          items:
                                            description: HTTPHeader describes a custom
                                              header to be used in HTTP probes
                                            properties:
                                              name:
                                                description: |-
                                                  The header field name.
                                                  This will be canonicalized upon output, so case-variant names will be understood as the same header.
                                                type: string
                                              value:
                                                description: The header field value
                                                type: string
                                            required:
                                            - name
                                            - value
                                            type: object
                                          type: array
                                        path:
                                          description: Path to access on the HTTP
                                            server.
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: |-
                                            Name or number of the port to access on the container.
                                            Number must be in the range 1 to 65535.
                                            Name must be an IANA_SVC_NAME.
                                          x-kubernetes-int-or-string: true
                                        scheme:
                                          description: |-
                                            Scheme to use for connecting to the host.
                                            Defaults to HTTP.
                                          type: string
                                      required:
                                      - port
                                      type: object
                                    initialDelaySeconds:
                                      description: |-
                                        Number of seconds after the container has started before liveness probes are initiated.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                      format: int32
                                      type: integer
                                    periodSeconds:
                                      description: |-
                                        How often (in seconds) to perform the probe.
                                        Default to 10 seconds. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    successThreshold:
                                      description: |-
                                        Minimum consecutive successes for the probe to be considered successful after having failed.
                                        Defaults to 1. Must be 1 for liveness and startup. Minimum value is 1.
                                      format: int32
                                      type: integer
                                    tcpSocket:
                                      description: TCPSocket specifies an action involving
                                        a TCP port.
                                      properties:
                                        host:
                                          description: 'Optional: Host name to connect
                                            to, defaults to the pod IP.'
                                          type: string
                                        port:
                                          anyOf:
                                          - type: integer
                                          - type: string
                                          description: |-
                                            Number or name of the port to access on the container.
                                            Number must be in the range 1 to 65535.
                                            Name must be an IANA_SVC_NAME.
                                          x-kubernetes-int-or-string: true
                                      required:
                                      - port
                                      type: object
                                    terminationGracePeriodSeconds:
                                      description: |-
                                        Optional duration in seconds the pod needs to terminate gracefully upon probe failure.
                                        The grace period is the duration in seconds after the processes running in the pod are sent
                                        a termination signal and the time when the processes are forcibly halted with a kill signal.
                                        Set this value longer than the expected cleanup time for your process.
                                        If this value is nil, the pod's terminationGracePeriodSeconds will be used. Otherwise, this
                                        value overrides the value provided by the pod spec.
                                        Value must be non-negative integer. The value zero indicates stop immediately via
                                        the kill signal (no opportunity to shut down).
                                        This is a beta field and requires enabling ProbeTerminationGracePeriod feature gate.
                                        Minimum value is 1. spec.terminationGracePeriodSeconds is used if unset.
                                      format: int64
                                      type: integer
                                    timeoutSeconds:
                                      description: |-
                                        Number of seconds after which the probe times out.
                                        Defaults to 1 second. Minimum value is 1.
                                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
                                      format: int32
                                      type: integer
                                  type: object
                                stdin:
                                  description: |-
                                    Whether this container should allocate a buffer for stdin in the container runtime. If this
                                    is not set, reads from stdin in the container will always result in EOF.
                                    Default is false.
                                  type: boolean
                                stdinOnce:
                                  description: |-
                                    Whether the container runtime should close the stdin channel after it has been opened by
                                    a single attach. When stdin is true the stdin stream will remain open across multiple attach
                                    sessions. If stdinOnce is set to true, stdin is opened on container start, is empty until the
                                    first client attaches to stdin, and then remains open and accepts data until the client disconnects,
                                    at which time stdin is closed and remains closed until the container is restarted. If this
                                    flag is false, a container processes that reads from stdin will never receive an EOF.
                                    Default is false
                                  type: boolean
                                terminationMessagePath:
                                  description: |-
                                    Optional: Path at which the file to which the container's termination message
                                    will be written is mounted into the container's filesystem.
                                    Message written is intended to be brief final status, such as an assertion failure message.
                                    Will be truncated by the node if greater than 4096 bytes. The total message length across
                                    all containers will be limited to 12kb.
                                    Defaults to /dev/termination-log.
                                    Cannot be updated.
                                  type: string
                                terminationMessagePolicy:
                                  description: |-
                                    Indicate how the termination message should be populated. File will use the contents of
                                    terminationMessagePath to populate the container status message on both success and failure.
                                    FallbackToLogsOnError will use the last chunk of container log output if the termination
                                    message file is empty and the container exited with an error.
                                    The log output is limited to 2048 bytes or 80 lines, whichever is smaller.
                                    Defaults to File.
                                    Cannot be updated.
                                  type: string
                                tty:
                                  description: |-
                                    Whether this container should allocate a TTY for itself, also requires 'stdin' to be true.
                                    Default is false.
                                  type: boolean
                                volumeDevices:
                                  description: volumeDevices is the list of block
                                    devices to be used by the container.
                                  items:
                                    description: volumeDevice describes a mapping
                                      of a raw block device within a container.
                                    properties:
                                      devicePath:
                                        description: devicePath is the path inside
                                          of the container that the device will be
                                          mapped to.
                                        type: string
                                      name:
                                        description: name must match the name of a
                                          persistentVolumeClaim in the pod
                                        type: string
                                    required:
                                    - devicePath
                                    - name
                                    type: object
                                  type: array
                                volumeMounts:
                                  description: |-
                                    Pod volumes to mount into the container's filesystem.
                                    Cannot be updated.
                                  items:
                                    description: VolumeMount describes a mounting
                                      of a Volume within a container.
                                    properties:
                                      mountPath:
                                        description: |-
                                          Path within the container at which the volume should be mounted.  Must
                                          not contain ':'.
                                        type: string
                                      mountPropagation:
                                        description: |-
                                          mountPropagation determines how mounts are propagated from the host
                                          to container and the other way around.
                                          When not set, MountPropagationNone is used.
                                          This field is beta in 1.10.
                                        type: string
                                      name:
                                        description: This must match the Name of a
                                          Volume.
                                        type: string
                                      readOnly:
                                        description: |-
                                          Mounted read-only if true, read-write otherwise (false or unspecified).
                                          Defaults to false.
                                        type: boolean
                                      subPath:
                                        description: |-
                                          Path within the volume from which the container's volume should be mounted.
                                          Defaults to "" (volume's root).
                                        type: string
                                      subPathExpr:
                                        description: |-
                                          Expanded path within the volume from which the container's volume should be mounted.
                                          Behaves similarly to SubPath but environment variable references $(VAR_NAME) are expanded using the container's environment.
                                          Defaults to "" (volume's root).
                                          SubPathExpr and SubPath are mutually exclusive.
                                        type: string
                                    required:
                                    - mountPath
                                    - name
                                    type: object
                                  type: array
                                workingDir:
                                  description: |-
                                    Container's working directory.
                                    If not specified, the container runtime's default will be used, which
                                    might be configured in the container image.
                                    Cannot be updated.
                                  type: string
                              required:
                              - name
                              type: object
                            type: array
                          nodeName:
                            description: |-
                              NodeName is a request to schedule this pod onto a specific node. If it is non-empty,
                              the scheduler simply schedules this pod onto that node, assuming that it fits resource
                              requirements.
                            type: string
                          nodeSelector:
                            additionalProperties:
                              type: string
                            description: |-
                              NodeSelector is a selector which must be true for the pod to fit on a node.
                              Selector which must match a node's labels for the pod to be scheduled on that node.
                              More info: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
                            type: object
                            x-kubernetes-map-type: atomic
                          os:
                            description: |-
                              Specifies the OS of the containers in the pod.
                              Some pod and container fields are restricted if this is set.


                              If the OS field is set to linux, the following fields must be unset:
                              -securityContext.windowsOptions


                              If the OS field is set to windows, following fields must be unset:
                              - spec.hostPID
                              - spec.hostIPC
                              - spec.hostUsers
                              - spec.securityContext.seLinuxOptions
                              - spec.securityContext.seccompProfile
                              - spec.securityContext.fsGroup
                              - spec.securityContext.fsGroupChangePolicy
                              - spec.securityContext.sysctls
                              - spec.shareProcessNamespace
                              - spec.securityContext.runAsUser
                              - spec.securityContext.runAsGroup
                              - spec.securityContext.supplementalGroups
                              - spec.containers[*].securityContext.seLinuxOptions
                              - spec.containers[*].securityContext.seccompProfile
                              - spec.containers[*].securityContext.capabilities
                              - spec.containers[*].securityContext.readOnlyRootFilesystem
                              - spec.containers[*].securityContext.privileged
                              - spec.containers[*].securityContext.allowPrivilegeEscalation
                              - spec.containers[*].securityContext.procMount
                              - spec.containers[*].securityContext.runAsUser
                              - spec.containers[*].securityContext.runAsGroup
                            properties:
                              name:
                                description: |-
                                  Name is the name of the operating system. The currently supported values are linux and windows.
                                  Additional value may be defined in future and can be one of:
                                  https://github.com/opencontainers/runtime-spec/blob/master/config.md#platform-specific-configuration
                                  Clients should expect to handle additional values and treat unrecognized values in this field as os: null
                                type: string
                            required:
                            - name
                            type: object
                          overhead:
                            additionalProperties:
                              anyOf:
                              - type: integer
                              - type: string
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            description: |-
                              Overhead represents the resource overhead associated with running a pod for a given RuntimeClass.
                              This field will be autopopulated at admission time by the RuntimeClass admission controller. If
                              the RuntimeClass admission controller is enabled, overhead must not be set in Pod create requests.
                              The RuntimeClass admission controller will reject Pod create requests which have the overhead already
                              set. If RuntimeClass is configured and selected in the PodSpec, Overhead will be set to the value
                              defined in the corresponding RuntimeClass, otherwise it will remain unset and treated as zero.
                              More info: https://git.k8s.io/enhancements/keps/sig-node/688-pod-overhead/README.md
                            type: object
                          preemptionPolicy:
                            description: |-
                              PreemptionPolicy is the Policy for preempting pods with lower priority.
                              One of Never, PreemptLowerPriority.
                              Defaults to PreemptLowerPriority if unset.
                            type: string
                          priority:
                            description: |-
                              The priority value. Various system components use this field to find the
                              priority of the pod. When Priority Admission Controller is enabled, it
                              prevents users from setting this field. The admission controller populates
                              this field from PriorityClassName.
                              The higher the value, the higher the priority.
                            format: int32
                            type: integer
                          priorityClassName:
                            description: |-
                              If specified, indicates the pod's priority. "system-node-critical" and
                              "system-cluster-critical" are two special keywords which indicate the
                              highest priorities with the former being the highest priority. Any other
                              name must be defined by creating a PriorityClass object with that name.
                              If not specified, the pod priority will be default or zero if there is no
                              default.
                            type: string
                          readinessGates:
                            description: |-
                              If specified, all readiness gates will be evaluated for pod readiness.
                              A pod is ready when all its containers are ready AND
                              all conditions specified in the readiness gates have status equal to "True"
                              More info: https://git.k8s.io/enhancements/keps/sig-network/580-pod-readiness-gates
                            items:
                              description: PodReadinessGate contains the reference
                                to a pod condition
                              properties:
                                conditionType:
                                  description: ConditionType refers to a condition
                                    in the pod's condition list with matching type.
                                  type: string
                              required:
                              - conditionType
                              type: object
                            type: array
                          resourceClaims:
                            description: |-
                              ResourceClaims defines which ResourceClaims must be allocated
                              and reserved before the Pod is allowed to start. The resources
                              will be made available to those containers which consume them
                              by name.


                              This is an alpha field and requires enabling the
                              DynamicResourceAllocation feature gate.


                              This field is immutable.
                            items:
                              description: |-
                                PodResourceClaim references exactly one ResourceClaim through a ClaimSource.
                                It adds a name to it that uniquely identifies the ResourceClaim inside the Pod.
                                Containers that need access to the ResourceClaim reference it with this name.
                              properties:
                                name:
                                  description: |-
                                    Name uniquely identifies this resource claim inside the pod.
                                    This must be a DNS_LABEL.
                                  type: string
                                source:
                                  description: Source describes where to find the
                                    ResourceClaim.
                                  properties:
                                    resourceClaimName:
                                      description: |-
                                        ResourceClaimName is the name of a ResourceClaim object in the same
                                        namespace as this pod.
                                      type: string
                                    resourceClaimTemplateName:
                                      description: |-
                                        ResourceClaimTemplateName is the name of a ResourceClaimTemplate
                                        object in the same namespace as this pod.


                                        The template will be used to create a new ResourceClaim, which will
                                        be bound to this pod. When this pod is deleted, the ResourceClaim
                                        will also be deleted. The pod name and resource name, along with a
                                        generated component, will be used to form a unique name for the
                                        ResourceClaim, which will be recorded in pod.status.resourceClaimStatuses.


                                        This field is immutable and no changes will be made to the
                                        corresponding ResourceClaim by the control plane after creating the
                                        ResourceClaim.
                                      type: string
                                  type: object
                              required:
                              - name
                              type: object
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          restartPolicy:
                            description: |-
                              Restart policy for all containers within the pod.
                              One of Always, OnFailure, Never. In some contexts, only a subset of those values may be permitted.
                              Default to Always.
                              More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#restart-policy
                            type: string
                          runtimeClassName:
                            description: |-
                              RuntimeClassName refers to a RuntimeClass object in the node.k8s.io group, which should be used
                              to run this pod.  If no RuntimeClass resource matches the named class, the pod will not be run.
                              If unset or empty, the "legacy" RuntimeClass will be used, which is an implicit class with an
                              empty definition that uses the default runtime handler.
                              More info: https://git.k8s.io/enhancements/keps/sig-node/585-runtime-class
                            type: string
                          schedulerName:
                            description: |-
                              If specified, the pod will be dispatched by specified scheduler.
                              If not specified, the pod will be dispatched by default scheduler.
                            type: string
                          schedulingGates:
                            description: |-
                              SchedulingGates is an opaque list of values that if specified will block scheduling the pod.
                              If schedulingGates is not empty, the pod will stay in the SchedulingGated state and the
                              scheduler will not attempt to schedule the pod.


                              SchedulingGates can only be set at pod creation time, and be removed only afterwards.


                              This is a beta feature enabled by the PodSchedulingReadiness feature gate.
                            items:
                              description: PodSchedulingGate is associated to a Pod
                                to guard its scheduling.
                              properties:
                                name:
                                  description: |-
                                    Name of the scheduling gate.
                                    Each scheduling gate must have a unique name field.
                                  type: string
                              required:
                              - name
                              type: object
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          securityContext:
                            description: |-
                              SecurityContext holds pod-level security attributes and common container settings.
                              Optional: Defaults to empty.  See type description for default values of each field.
                            properties:
                              fsGroup:
                                description: |-
                                  A special supplemental group that applies to all containers in a pod.
                                  Some volume types allow the Kubelet to change the ownership of that volume
                                  to be owned by the pod:


                                  1. The owning GID will be the FSGroup
                                  2. The setgid bit is set (new files created in the volume will be owned by FSGroup)
                                  3. The permission bits are OR'd with rw-rw----


                                  If unset, the Kubelet will not modify the ownership and permissions of any volume.
                                  Note that this field cannot be set when spec.os.name is windows.
                                format: int64
                                type: integer
                              fsGroupChangePolicy:
                                description: |-
                                  fsGroupChangePolicy defines behavior of changing ownership and permission of the volume
                                  before being exposed inside Pod. This field will only apply to
                                  volume types which support fsGroup based ownership(and permissions).
                                  It will have no effect on ephemeral volume types such as: secret, configmaps
                                  and emptydir.
                                  Valid values are "OnRootMismatch" and "Always". If not specified, "Always" is used.
                                  Note that this field cannot be set when spec.os.name is windows.
                                type: string
                              runAsGroup:
                                description: |-
                                  The GID to run the entrypoint of the container process.
                                  Uses runtime default if unset.
                                  May also be set in SecurityContext.  If set in both SecurityContext and
                                  PodSecurityContext, the value specified in SecurityContext takes precedence
                                  for that container.
                                  Note that this field cannot be set when spec.os.name is windows.
                                format: int64
                                type: integer
                              runAsNonRoot:
                                description: |-
                                  Indicates that the container must run as a non-root user.
                                  If true, the Kubelet will validate the image at runtime to ensure that it
                                  does not run as UID 0 (root) and fail to start the container if it does.
                                  If unset or false, no such validation will be performed.
                                  May also be set in SecurityContext.  If set in both SecurityContext and
                                  PodSecurityContext, the value specified in SecurityContext takes precedence.
                                type: boolean
                              runAsUser:
                                description: |-
                                  The UID to run the entrypoint of the container process.
                                  Defaults to user specified in image metadata if unspecified.
                                  May also be set in SecurityContext.  If set in both SecurityContext and
                                  PodSecurityContext, the value specified in SecurityContext takes precedence
                                  for that container.
                                  Note that this field cannot be set when spec.os.name is windows.
                                format: int64
                                type: integer
                              seLinuxOptions:
                                description: |-
                                  The SELinux context to be applied to all containers.
                                  If unspecified, the container runtime will allocate a random SELinux context for each
                                  container.  May also be set in SecurityContext.  If set in
                                  both SecurityContext and PodSecurityContext, the value specified in SecurityContext
                                  takes precedence for that container.
                                  Note that this field cannot be set when spec.os.name is windows.
                                properties:
                                  level:
                                    description: Level is SELinux level label that
                                      applies to the container.
                                    type: string
                                  role:
                                    description: Role is a SELinux role label that
                                      applies to the container.
                                    type: string
                                  type:
                                    description: Type is a SELinux type label that
                                      applies to the container.
                                    type: string
                                  user:
                                    description: User is a SELinux user label that
                                      applies to the container.
                                    type: string
                                type: object
                              seccompProfile:
                                description: |-
                                  The seccomp options to use by the containers in this pod.
                                  Note that this field cannot be set when spec.os.name is windows.
                                properties:
                                  localhostProfile:
                                    description: |-
                                      localhostProfile indicates a profile defined in a file on the node should be used.
                                      The profile must be preconfigured on the node to work.
                                      Must be a descending path, relative to the kubelet's configured seccomp profile location.
                                      Must be set if type is "Localhost". Must NOT be set for any other type.
                                    type: string
                                  type:
                                    description: |-
                                      type indicates which kind of seccomp profile will be applied.
                                      Valid options are:


                                      Localhost - a profile defined in a file on the node should be used.
                                      RuntimeDefault - the container runtime default profile should be used.
                                      Unconfined - no profile should be applied.
                                    type: string
                                required:
                                - type
                                type: object
                              supplementalGroups:
                                description: |-
                                  A list of groups applied to the first process run in each container, in addition
                                  to the container's primary GID, the fsGroup (if specified), and group memberships
                                  defined in the container image for the uid of the container process. If unspecified,
                                  no additional groups are added to any container. Note that group memberships
                                  defined in the container image for the uid of the container process are still effective,
                                  even if they are not included in this list.
                                  Note that this field cannot be set when spec.os.name is windows.
                                items:
                                  format: int64
                                  type: integer
                                type: array
                              sysctls:
                                description: |-
                                  Sysctls hold a list of namespaced sysctls used for the pod. Pods with unsupported
                                  sysctls (by the container runtime) might fail to launch.
                                  Note that this field cannot be set when spec.os.name is windows.
                                items:
                                  description: Sysctl defines a kernel parameter to
                                    be set
                                  properties:
                                    name:
                                      description: Name of a property to set
                                      type: string
                                    value:
                                      description: Value of a property to set
                                      type: string
                                  required:
                                  - name
                                  - value
                                  type: object
                                type: array
                              windowsOptions:
                                description: |-
                                  The Windows specific settings applied to all containers.
                                  If unspecified, the options within a container's SecurityContext will be used.
                                  If set in both SecurityContext and PodSecurityContext, the value specified in SecurityContext takes precedence.
                                  Note that this field cannot be set when spec.os.name is linux.
                                properties:
                                  gmsaCredentialSpec:
                                    description: |-
                                      GMSACredentialSpec is where the GMSA admission webhook
                                      (https://github.com/kubernetes-sigs/windows-gmsa) inlines the contents of the
                                      GMSA credential spec named by the GMSACredentialSpecName field.
                                    type: string
                                  gmsaCredentialSpecName:
                                    description: GMSACredentialSpecName is the name
                                      of the GMSA credential spec to use.
                                    type: string
                                  hostProcess:
                                    description: |-
                                      HostProcess determines if a container should be run as a 'Host Process' container.
                                      All of a Pod's containers must have the same effective HostProcess value
                                      (it is not allowed to have a mix of HostProcess containers and non-HostProcess containers).
                                      In addition, if HostProcess is true then HostNetwork must also be set to true.
                                    type: boolean
                                  runAsUserName:
                                    description: |-
                                      The UserName in Windows to run the entrypoint of the container process.
                                      Defaults to the user specified in image metadata if unspecified.
                                      May also be set in PodSecurityContext. If set in both SecurityContext and
                                      PodSecurityContext, the value specified in SecurityContext takes precedence.
                                    type: string
                                type: object
                            type: object
                          serviceAccount:
                            description: |-
                              DeprecatedServiceAccount is a depreciated alias for ServiceAccountName.
                              Deprecated: Use serviceAccountName instead.
                            type: string
                          serviceAccountName:
                            description: |-
                              ServiceAccountName is the name of the ServiceAccount to use to run this pod.
                              More info: https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/
                            type: string
                          setHostnameAsFQDN:
                            description: |-
                              If true the pod's hostname will be configured as the pod's FQDN, rather than the leaf name (the default).
                              In Linux containers, this means setting the FQDN in the hostname field of the kernel (the nodename field of struct utsname).
                              In Windows containers, this means setting the registry value of hostname for the registry key HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Tcpip\\Parameters to FQDN.
                              If a pod does not have FQDN, this has no effect.
                              Default to false.
                            type: boolean
                          shareProcessNamespace:
                            description: |-
                              Share a single process namespace between all of the containers in a pod.
                              When this is set containers will be able to view and signal processes from other containers
                              in the same pod, and the first process in each container will not be assigned PID 1.
                              HostPID and ShareProcessNamespace cannot both be set.
                              Optional: Default to false.
                            type: boolean
                          subdomain:
                            description: |-
                              If specified, the fully qualified Pod hostname will be "<hostname>.<subdomain>.<pod namespace>.svc.<cluster domain>".
                              If not specified, the pod will not have a domainname at all.
                            type: string
                          terminationGracePeriodSeconds:
                            description: |-
                              Optional duration in seconds the pod needs to terminate gracefully. May be decreased in delete request.
                              Value must be non-negative integer. The value zero indicates stop immediately via
                              the kill signal (no opportunity to shut down).
                              If this value is nil, the default grace period will be used instead.
                              The grace period is the duration in seconds after the processes running in the pod are sent
                              a termination signal and the time when the processes are forcibly halted with a kill signal.
                              Set this value longer than the expected cleanup time for your process.
                              Defaults to 30 seconds.
                            format: int64
                            type: integer
                          tolerations:
                            description: If specified, the pod's tolerations.
                            items:
                              description: |-
                                The pod this Toleration is attached to tolerates any taint that matches
                                the triple <key,value,effect> using the matching operator <operator>.
                              properties:
                                effect:
                                  description: |-
                                    Effect indicates the taint effect to match. Empty means match all taint effects.
                                    When specified, allowed values are NoSchedule, PreferNoSchedule and NoExecute.
                                  type: string
                                key:
                                  description: |-
                                    Key is the taint key that the toleration applies to. Empty means match all taint keys.
                                    If the key is empty, operator must be Exists; this combination means to match all values and all keys.
                                  type: string
                                operator:
                                  description: |-
                                    Operator represents a key's relationship to the value.
                                    Valid operators are Exists and Equal. Defaults to Equal.
                                    Exists is equivalent to wildcard for value, so that a pod can
                                    tolerate all taints of a particular category.
                                  type: string
                                tolerationSeconds:
                                  description: |-
                                    TolerationSeconds represents the period of time the toleration (which must be
                                    of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default,
                                    it is not set, which means tolerate the taint forever (do not evict). Zero and
                                    negative values will be treated as 0 (evict immediately) by the system.
                                  format: int64
                                  type: integer
                                value:
                                  description: |-
                                    Value is the taint value the toleration matches to.
                                    If the operator is Exists, the value should be empty, otherwise just a regular string.
                                  type: string
                              type: object
                            type: array
                          topologySpreadConstraints:
                            description: |-
                              TopologySpreadConstraints describes how a group of pods ought to spread across topology
                              domains. Scheduler will schedule pods in a way which abides by the constraints.
                              All topologySpreadConstraints are ANDed.
                            items:
                              description: TopologySpreadConstraint specifies how
                                to spread matching pods among the given topology.
                              properties:
                                labelSelector:
                                  description: |-
                                    LabelSelector is used to find matching pods.
                                    Pods that match this label selector are counted to determine the number of pods
                                    in their corresponding topology domain.
                                  properties:
                                    matchExpressions:
                                      description: matchExpressions is a list of label
                                        selector requirements. The requirements are
                                        ANDed.
                                      items:
                                        description: |-
                                          A label selector requirement is a selector that contains values, a key, and an operator that
                                          relates the key and values.
                                        properties:
                                          key:
                                            description: key is the label key that
                                              the selector applies to.
                                            type: string
                                          operator:
                                            description: |-
                                              operator represents a key's relationship to a set of values.
                                              Valid operators are In, NotIn, Exists and DoesNotExist.
                                            type: string
                                          values:
                                            description: |-
                                              values is an array of string values. If the operator is In or NotIn,
                                              the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                              the values array must be empty. This array is replaced during a strategic
                                              merge patch.
                                            items:
                                              type: string
                                            type: array
                                        required:
                                        - key
                                        - operator
                                        type: object
                                      type: array
                                    matchLabels:
                                      additionalProperties:
                                        type: string
                                      description: |-
                                        matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                        map is equivalent to an element of matchExpressions, whose key field is "key", the
                                        operator is "In", and the values array contains only "value". The requirements are ANDed.
                                      type: object
                                  type: object
                                  x-kubernetes-map-type: atomic
                                matchLabelKeys:
                                  description: |-
                                    MatchLabelKeys is a set of pod label keys to select the pods over which
                                    spreading will be calculated. The keys are used to lookup values from the
                                    incoming pod labels, those key-value labels are ANDed with labelSelector
                                    to select the group of existing pods over which spreading will be calculated
                                    for the incoming pod. The same key is forbidden to exist in both MatchLabelKeys and LabelSelector.
                                    MatchLabelKeys cannot be set when LabelSelector isn't set.
                                    Keys that don't exist in the incoming pod labels will
                                    be ignored. A null or empty list means only match against labelSelector.


                                    This is a beta field and requires the MatchLabelKeysInPodTopologySpread feature gate to be enabled (enabled by default).
                                  items:
                                    type: string
                                  type: array
                                  x-kubernetes-list-type: atomic
                                maxSkew:
                                  description: |-
                                    MaxSkew describes the degree to which pods may be unevenly distributed.
                                    When `whenUnsatisfiable=DoNotSchedule`, it is the maximum permitted difference
                                    between the number of matching pods in the target topology and the global minimum.
                                    The global minimum is the minimum number of matching pods in an eligible domain
                                    or zero if the number of eligible domains is less than MinDomains.
                                    For example, in a 3-zone cluster, MaxSkew is set to 1, and pods with the same
                                    labelSelector spread as 2/2/1:
                                    In this case, the global minimum is 1.
                                    | zone1 | zone2 | zone3 |
                                    |  P P  |  P P  |   P   |
                                    - if MaxSkew is 1, incoming pod can only be scheduled to zone3 to become 2/2/2;
                                    scheduling it onto zone1(zone2) would make the ActualSkew(3-1) on zone1(zone2)
                                    violate MaxSkew(1).
                                    - if MaxSkew is 2, incoming pod can be scheduled onto any zone.
                                    When `whenUnsatisfiable=ScheduleAnyway`, it is used to give higher precedence
                                    to topologies that satisfy it.
                                    It's a required field. Default value is 1 and 0 is not allowed.
                                  format: int32
                                  type: integer
                                minDomains:
                                  description: |-
                                    MinDomains indicates a minimum number of eligible domains.
                                    When the number of eligible domains with matching topology keys is less than minDomains,
                                    Pod Topology Spread treats "global minimum" as 0, and then the calculation of Skew is performed.
                                    And when the number of eligible domains with matching topology keys equals or greater than minDomains,
                                    this value has no effect on scheduling.
                                    As a result, when the number of eligible domains is less than minDomains,
                                    scheduler won't schedule more than maxSkew Pods to those domains.
                                    If value is nil, the constraint behaves as if MinDomains is equal to 1.
                                    Valid values are integers greater than 0.
                                    When value is not nil, WhenUnsatisfiable must be DoNotSchedule.


                                    For example, in a 3-zone cluster, MaxSkew is set to 2, MinDomains is set to 5 and pods with the same
                                    labelSelector spread as 2/2/2:
                                    | zone1 | zone2 | zone3 |
                                    |  P P  |  P P  |  P P  |
                                    The number of domains is less than 5(MinDomains), so "global minimum" is treated as 0.
                                    In this situation, new pod with the same labelSelector cannot be scheduled,
                                    because computed skew will be 3(3 - 0) if new Pod is scheduled to any of the three zones,
                                    it will violate MaxSkew.


                                    This is a beta field and requires the MinDomainsInPodTopologySpread feature gate to be enabled (enabled by default).
                                  format: int32
                                  type: integer
                                nodeAffinityPolicy:
                                  description: |-
                                    NodeAffinityPolicy indicates how we will treat Pod's nodeAffinity/nodeSelector
                                    when calculating pod topology spread skew. Options are:
                                    - Honor: only nodes matching nodeAffinity/nodeSelector are included in the calculations.
                                    - Ignore: nodeAffinity/nodeSelector are ignored. All nodes are included in the calculations.


                                    If this value is nil, the behavior is equivalent to the Honor policy.
                                    This is a beta-level feature default enabled by the NodeInclusionPolicyInPodTopologySpread feature flag.
                                  type: string
                                nodeTaintsPolicy:
                                  description: |-
                                    NodeTaintsPolicy indicates how we will treat node taints when calculating
                                    pod topology spread skew. Options are:
                                    - Honor: nodes without taints, along with tainted nodes for which the incoming pod
                                    has a toleration, are included.
                                    - Ignore: node taints are ignored. All nodes are included.


                                    If this value is nil, the behavior is equivalent to the Ignore policy.
                                    This is a beta-level feature default enabled by the NodeInclusionPolicyInPodTopologySpread feature flag.
                                  type: string
                                topologyKey:
                                  description: |-
                                    TopologyKey is the key of node labels. Nodes that have a label with this key
                                    and identical values are considered to be in the same topology.
                                    We consider each <key, value> as a "bucket", and try to put balanced number
                                    of pods into each bucket.
                                    We define a domain as a particular instance of a topology.
                                    Also, we define an eligible domain as a domain whose nodes meet the requirements of
                                    nodeAffinityPolicy and nodeTaintsPolicy.
                                    e.g. If TopologyKey is "kubernetes.io/hostname", each Node is a domain of that topology.
                                    And, if TopologyKey is "topology.kubernetes.io/zone", each zone is a domain of that topology.
                                    It's a required field.
                                  type: string
                                whenUnsatisfiable:
                                  description: |-
                                    WhenUnsatisfiable indicates how to deal with a pod if it doesn't satisfy
                                    the spread constraint.
                                    - DoNotSchedule (default) tells the scheduler not to schedule it.
                                    - ScheduleAnyway tells the scheduler to schedule the pod in any location,
                                      but giving higher precedence to topologies that would help reduce the
                                      skew.
                                    A constraint is considered "Unsatisfiable" for an incoming pod
                                    if and only if every possible node assignment for that pod would violate
                                    "MaxSkew" on some topology.
                                    For example, in a 3-zone cluster, MaxSkew is set to 1, and pods with the same
                                    labelSelector spread as 3/1/1:
                                    | zone1 | zone2 | zone3 |
                                    | P P P |   P   |   P   |
                                    If WhenUnsatisfiable is set to DoNotSchedule, incoming pod can only be scheduled
                                    to zone2(zone3) to become 3/2/1(3/1/2) as ActualSkew(2-1) on zone2(zone3) satisfies
                                    MaxSkew(1). In other words, the cluster can still be imbalanced, but scheduler
                                    won't make it *more* imbalanced.
                                    It's a required field.
                                  type: string
                              required:
                              - maxSkew
                              - topologyKey
                              - whenUnsatisfiable
                              type: object
                            type: array
                            x-kubernetes-list-map-keys:
                            - topologyKey
                            - whenUnsatisfiable
                            x-kubernetes-list-type: map
                          volumes:
                            description: |-
                              List of volumes that can be mounted by containers belonging to the pod.
                              More info: https://kubernetes.io/docs/concepts/storage/volumes
                            items:
                              description: Volume represents a named volume in a pod
                                that may be accessed by any container in the pod.
                              properties:
                                awsElasticBlockStore:
                                  description: |-
                                    awsElasticBlockStore represents an AWS Disk resource that is attached to a
                                    kubelet's host machine and then exposed to the pod.
                                    More info: https://kubernetes.io/docs/concepts/storage/volumes#awselasticblockstore
                                  properties:
                                    fsType:
                                      description: |-
                                        fsType is the filesystem type of the volume that you want to mount.
                                        Tip: Ensure that the filesystem type is supported by the host operating system.
                                        Examples: "ext4", "xfs", "ntfs". Implicitly inferred to be "ext4" if unspecified.
                                        More info: https://kubernetes.io/docs/concepts/storage/volumes#awselasticblockstore
                                        TODO: how do we prevent errors in the filesystem from compromising the machine
                                      type: string
                                    partition:
                                      description: |-
                                        partition is the partition in the volume that you want to mount.
                                        If omitted, the default is to mount by volume name.
                                        Examples: For volume /dev/sda1, you specify the partition as "1".
                                        Similarly, the volume partition for /dev/sda is "0" (or you can leave the property empty).
                                      format: int32
                                      type: integer
                                    readOnly:
                                      description: |-
                                        readOnly value true will force the readOnly setting in VolumeMounts.
                                        More info: https://kubernetes.io/docs/concepts/storage/volumes#awselasticblockstore
                                      type: boolean
                                    volumeID:
                                      description: |-
                                        volumeID is unique ID of the persistent disk resource in AWS (Amazon EBS volume).
                                        More info: https://kubernetes.io/docs/concepts/storage/volumes#awselasticblockstore
                                      type: string
                                  required:
                                  - volumeID
                                  type: object
                                azureDisk:
                                  description: azureDisk represents an Azure Data
                                    Disk mount on the host and bind mount to the pod.
                                  properties:
                                    cachingMode:
                                      description: 'cachingMode is the Host Caching
                                        mode: None, Read Only, Read Write.'
                                      type: string
                                    diskName:
                                      description: diskName is the Name of the data
                                        disk in the blob storage
                                      type: string
                                    diskURI:
                                      description: diskURI is the URI of data disk
                                        in the blob storage
                                      type: string
                                    fsType:
                                      description: |-
                                        fsType is Filesystem type to mount.
                                        Must be a filesystem type supported by the host operating system.
                                        Ex. "ext4", "xfs", "ntfs". Implicitly inferred to be "ext4" if unspecified.
                                      type: string
                                    kind:
                                      description: 'kind expected values are Shared:
                                        multiple blob disks per storage account  Dedicated:
                                        single blob disk per storage account  Managed:
                                        azure managed data disk (only in managed availability
                                        set). defaults to shared'
                                      type: string
                                    readOnly:
                                      description: |-
                                        readOnly Defaults to false (read/write). ReadOnly here will force
                                        the ReadOnly setting in VolumeMounts.
                                      type: boolean
                                  required:
                                  - diskName
                                  - diskURI
                                  type: object
                                azureFile:
                                  description: azureFile represents an Azure File
                                    Service mount on the host and bind mount to the
                                    pod.
                                  properties:
                                    readOnly:
                                      description: |-
                                        readOnly defaults to false (read/write). ReadOnly here will force
                                        the ReadOnly setting in VolumeMounts.
                                      type: boolean
                                    secretName:
                                      description: secretName is the  name of secret
                                        that contains Azure Storage Account Name and
                                        Key
                                      type: string
                                    shareName:
                                      description: shareName is the azure share Name
                                      type: string
                                  required:
                                  - secretName
                                  - shareName
                                  type: object
                                cephfs:
                                  description: cephFS represents a Ceph FS mount on
                                    the host that shares a pod's lifetime
                                  properties:
                                    monitors:
                                      description: |-
                                        monitors is Required: Monitors is a collection of Ceph monitors
                                        More info: https://examples.k8s.io/volumes/cephfs/README.md#how-to-use-it
                                      items:
                                        type: string
                                      type: array
                                    path:
                                      description: 'path is Optional: Used as the
                                        mounted root, rather than the full Ceph tree,
                                        default is /'
                                      type: string
                                    readOnly:
                                      description: |-
                                        readOnly is Optional: Defaults to false (read/write). ReadOnly here will force
                                        the ReadOnly setting in VolumeMounts.
                                        More info: https://examples.k8s.io/volumes/cephfs/README.md#how-to-use-it
                                      type: boolean
                                    secretFile:
                                      description: |-
                                        secretFile is Optional: SecretFile is the path to key ring for User, default is /etc/ceph/user.secret
                                        More info: https://examples.k8s.io/volumes/cephfs/README.md#how-to-use-it
                                      type: string
                                    secretRef:
                                      description: |-
                                        secretRef is Optional: SecretRef is reference to the authentication secret for User, default is empty.
                                        More info: https://examples.k8s.io/volumes/cephfs/README.md#how-to-use-it
                                      properties:
                                        name:
                                          description: |-
                                            Name of the referent.
                                            More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                            TODO: Add other useful fields. apiVersion, kind, uid?
                                          type: string
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    user:
                                      description: |-
                                        user is optional: User is the rados user name, default is admin
                                        More info: https://examples.k8s.io/volumes/cephfs/README.md#how-to-use-it
                                      type: string
                                  required:
                                  - monitors
                                  type: object
                                cinder:
                                  description: |-
                                    cinder represents a cinder volume attached and mounted on kubelets host machine.
                                    More info: https://examples.k8s.io/mysql-cinder-pd/README.md
                                  properties:
                                    fsType:
                                      description: |-
                                        fsType is the filesystem type to mount.
                                        Must be a filesystem type supported by the host operating system.
                                        Examples: "ext4", "xfs", "ntfs". Implicitly inferred to be "ext4" if unspecified.
                                        More info: https://examples.k8s.io/mysql-cinder-pd/README.md
                                      type: string
                                    readOnly:
                                      description: |-
                                        readOnly defaults to false (read/write). ReadOnly here will force
                                        the ReadOnly setting in VolumeMounts.
                                        More info: https://examples.k8s.io/mysql-cinder-pd/README.md
                                      type: boolean
                                    secretRef:
                                      description: |-
                                        secretRef is optional: points to a secret object containing parameters used to connect
                                        to OpenStack.
                                      properties:
                                        name:
                                          description: |-
                                            Name of the referent.
                                            More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                            TODO: Add other useful fields. apiVersion, kind, uid?
                                          type: string
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    volumeID:
                                      description: |-
                                        volumeID used to identify the volume in cinder.
                                        More info: https://examples.k8s.io/mysql-cinder-pd/README.md
                                      type: string
                                  required:
                                  - volumeID
                                  type: object
                                configMap:
                                  description: configMap represents a configMap that
                                    should populate this volume
                                  properties:
                                    defaultMode:
                                      description: |-
                                        defaultMode is optional: mode bits used to set permissions on created files by default.
                                        Must be an octal value between 0000 and 0777 or a decimal value between 0 and 511.
                                        YAML accepts both octal and decimal values, JSON requires decimal values for mode bits.
                                        Defaults to 0644.
                                        Directories within the path are not affected by this setting.
                                        This might be in conflict with other options that affect the file
                                        mode, like fsGroup, and the result can be other mode bits set.
                                      format: int32
                                      type: integer
                                    items:
                                      description: |-
                                        items if unspecified, each key-value pair in the Data field of the referenced
                                        ConfigMap will be projected into the volume as a file whose name is the
                                        key and content is the value. If specified, the listed keys will be
                                        projected into the specified paths, and unlisted keys will not be
                                        present. If a key is specified which is not present in the ConfigMap,
                                        the volume setup will error unless it is marked optional. Paths must be
                                        relative and may not contain the '..' path or start with '..'.
                                      items:
                                        description: Maps a string key to a path within
                                          a volume.
                                        properties:
                                          key:
                                            description: key is the key to project.
                                            type: string
                                          mode:
                                            description: |-
                                              mode is Optional: mode bits used to set permissions on this file.
                                              Must be an octal value between 0000 and 0777 or a decimal value between 0 and 511.
                                              YAML accepts both octal and decimal values, JSON requires decimal values for mode bits.
                                              If not specified, the volume defaultMode will be used.
                                              This might be in conflict with other options that affect the file
                                              mode, like fsGroup, and the result can be other mode bits set.
                                            format: int32
                                            type: integer
                                          path:
                                            description: |-
                                              path is the relative path of the file to map the key to.
                                              May not be an absolute path.
                                              May not contain the path element '..'.
                                              May not start with the string '..'.
                                            type: string
                                        required:
                                        - key
                                        - path
                                        type: object
                                      type: array
                                    name:
                                      description: |-
                                        Name of the referent.
                                        More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                        TODO: Add other useful fields. apiVersion, kind, uid?
                                      type: string
                                    optional:
                                      description: optional specify whether the ConfigMap
                                        or its keys must be defined
                                      type: boolean
                                  type: object
                                  x-kubernetes-map-type: atomic
                                csi:
                                  description: csi (Container Storage Interface) represents
                                    ephemeral storage that is handled by certain external
                                    CSI drivers (Beta feature).
                                  properties:
                                    driver:
                                      description: |-
                                        driver is the name of the CSI driver that handles this volume.
                                        Consult with your admin for the correct name as registered in the cluster.
                                      type: string
                                    fsType:
                                      description: |-
                                        fsType to mount. Ex. "ext4", "xfs", "ntfs".
                                        If not provided, the empty value is passed to the associated CSI driver
                                        which will determine the default filesystem to apply.
                                      type: string
                                    nodePublishSecretRef:
                                      description: |-
                                        nodePublishSecretRef is a reference to the secret object containing
                                        sensitive information to pass to the CSI driver to complete the CSI
                                        NodePublishVolume and NodeUnpublishVolume calls.
                                        This field is optional, and  may be empty if no secret is required. If the
                                        secret object contains more than one secret, all secret references are passed.
                                      properties:
                                        name:
                                          description: |-
                                            Name of the referent.
                                            More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                            TODO: Add other useful fields. apiVersion, kind, uid?
                                          type: string
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    readOnly:
                                      description: |-
                                        readOnly specifies a read-only configuration for the volume.
                                        Defaults to false (read/write).
                                      type: boolean
                                    volumeAttributes:
                                      additionalProperties:
                                        type: string
                                      description: |-
                                        volumeAttributes stores driver-specific properties that are passed to the CSI
                                        driver. Consult your driver's documentation for supported values.
                                      type: object
                                  required:
                                  - driver
                                  type: object
                                downwardAPI:
                                  description: downwardAPI represents downward API
                                    about the pod that should populate this volume
                                  properties:
                                    defaultMode:
                                      description: |-
                                        Optional: mode bits to use on created files by default. Must be a
                                        Optional: mode bits used to set permissions on created files by default.
                                        Must be an octal value between 0000 and 0777 or a decimal value between 0 and 511.
                                        YAML accepts both octal and decimal values, JSON requires decimal values for mode bits.
                                        Defaults to 0644.
                                        Directories within the path are not affected by this setting.
                                        This might be in conflict with other options that affect the file
                                        mode, like fsGroup, and the result can be other mode bits set.
                                      format: int32
                                      type: integer
                                    items:
                                      description: Items is a list of downward API
                                        volume file
                                      items:
                                        description: DownwardAPIVolumeFile represents
                                          information to create the file containing
                                          the pod field
                                        properties:
                                          fieldRef:
                                            description: 'Required: Selects a field
                                              of the pod: only annotations, labels,
                                              name and namespace are supported.'
                                            properties:
                                              apiVersion:
                                                description: Version of the schema
                                                  the FieldPath is written in terms
                                                  of, defaults to "v1".
                                                type: string
                                              fieldPath:
                                                description: Path of the field to
                                                  select in the specified API version.
                                                type: string
                                            required:
                                            - fieldPath
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          mode:
                                            description: |-
                                              Optional: mode bits used to set permissions on this file, must be an octal value
                                              between 0000 and 0777 or a decimal value between 0 and 511.
                                              YAML accepts both octal and decimal values, JSON requires decimal values for mode bits.
                                              If not specified, the volume defaultMode will be used.
                                              This might be in conflict with other options that affect the file
                                              mode, like fsGroup, and the result can be other mode bits set.
                                            format: int32
                                            type: integer
                                          path:
                                            description: 'Required: Path is  the relative
                                              path name of the file to be created.
                                              Must not be absolute or contain the
                                              ''..'' path. Must be utf-8 encoded.
                                              The first item of the relative path
                                              must not start with ''..'''
                                            type: string
                                          resourceFieldRef:
                                            description: |-
                                              Selects a resource of the container: only resources limits and requests
                                              (limits.cpu, limits.memory, requests.cpu and requests.memory) are currently supported.
                                            properties:
                                              containerName:
                                                description: 'Container name: required
                                                  for volumes, optional for env vars'
                                                type: string
                                              divisor:
                                                anyOf:
                                                - type: integer
                                                - type: string
                                                description: Specifies the output
                                                  format of the exposed resources,
                                                  defaults to "1"
                                                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                                x-kubernetes-int-or-string: true
                                              resource:
                                                description: 'Required: resource to
                                                  select'
                                                type: string
                                            required:
                                            - resource
                                            type: object
                                            x-kubernetes-map-type: atomic
                                        required:
                                        - path
                                        type: object
                                      type: array
                                  type: object
                                emptyDir:
                                  description: |-
                                    emptyDir represents a temporary directory that shares a pod's lifetime.
                                    More info: https://kubernetes.io/docs/concepts/storage/volumes#emptydir
                                  properties:
                                    medium:
                                      description: |-
                                        medium represents what type of storage medium should back this directory.
                                        The default is "" which means to use the node's default medium.
                                        Must be an empty string (default) or Memory.
                                        More info: https://kubernetes.io/docs/concepts/storage/volumes#emptydir
                                      type: string
                                    sizeLimit:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      description: |-
                                        sizeLimit is the total amount of local storage required for this EmptyDir volume.
                                        The size limit is also applicable for memory medium.
                                        The maximum usage on memory medium EmptyDir would be the minimum value between
                                        the SizeLimit specified here and the sum of memory limits of all containers in a pod.
                                        The default is nil which means that the limit is undefined.
                                        More info: https://kubernetes.io/docs/concepts/storage/volumes#emptydir
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  type: object
                                ephemeral:
                                  description: |-
                                    ephemeral represents a volume that is handled by a cluster storage driver.
                                    The volume's lifecycle is tied to the pod that defines it - it will be created before the pod starts,
                                    and deleted when the pod is removed.


                                    Use this if:
                                    a) the volume is only needed while the pod runs,
                                    b) features of normal volumes like restoring from snapshot or capacity
                                       tracking are needed,
                                    c) the storage driver is specified through a storage class, and
                                    d) the storage driver supports dynamic volume provisioning through
                                       a PersistentVolumeClaim (see EphemeralVolumeSource for more
                                       information on the connection between this volume type
                                       and PersistentVolumeClaim).


                                    Use PersistentVolumeClaim or one of the vendor-specific
                                    APIs for volumes that persist for longer than the lifecycle
                                    of an individual pod.


                                    Use CSI for light-weight local ephemeral volumes if the CSI driver is meant to
                                    be used that way - see the documentation of the driver for
                                    more information.


                                    A pod can use both types of ephemeral volumes and
                                    persistent volumes at the same time.
                                  properties:
                                    volumeClaimTemplate:
                                      description: |-
                                        Will be used to create a stand-alone PVC to provision the volume.
                                        The pod in which this EphemeralVolumeSource is embedded will be the
                                        owner of the PVC, i.e. the PVC will be deleted together with the
                                        pod.  The name of the PVC will be `<pod name>-<volume name>` where
                                        `<volume name>` is the name from the `PodSpec.Volumes` array
                                        entry. Pod validation will reject the pod if the concatenated name
                                        is not valid for a PVC (for example, too long).


                                        An existing PVC with that name that is not owned by the pod
                                        will *not* be used for the pod to avoid using an unrelated
                                        volume by mistake. Starting the pod is then blocked until
                                        the unrelated PVC is removed. If such a pre-created PVC is
                                        meant to be used by the pod, the PVC has to updated with an
                                        owner reference to the pod once the pod exists. Normally
                                        this should not be necessary, but it may be useful when
                                        manually reconstructing a broken cluster.


                                        This field is read-only and no changes will be made by Kubernetes
                                        to the PVC after it has been created.


                                        Required, must not be nil.
                                      properties:
                                        metadata:
                                          description: |-
                                            May contain labels and annotations that will be copied into the PVC
                                            when creating it. No other fields are allowed and will be rejected during
                                            validation.
                                          type: object
                                        spec:
                                          description: |-
                                            The specification for the PersistentVolumeClaim. The entire content is
                                            copied unchanged into the PVC that gets created from this
                                            template. The same fields as in a PersistentVolumeClaim
                                            are also valid here.
                                          properties:
                                            accessModes:
                                              description: |-
                                                accessModes contains the desired access modes the volume should have.
                                                More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#access-modes-1
                                              items:
                                                type: string
                                              type: array
                                            dataSource:
                                              description: |-
                                                dataSource field can be used to specify either:
                                                * An existing VolumeSnapshot object (snapshot.storage.k8s.io/VolumeSnapshot)
                                                * An existing PVC (PersistentVolumeClaim)
                                                If the provisioner or an external controller can support the specified data source,
                                                it will create a new volume based on the contents of the specified data source.
                                                When the AnyVolumeDataSource feature gate is enabled, dataSource contents will be copied to dataSourceRef,
                                                and dataSourceRef contents will be copied to dataSource when dataSourceRef.namespace is not specified.
                                                If the namespace is specified, then dataSourceRef will not be copied to dataSource.
                                              properties:
                                                apiGroup:
                                                  description: |-
                                                    APIGroup is the group for the resource being referenced.
                                                    If APIGroup is not specified, the specified Kind must be in the core API group.
                                                    For any other third-party types, APIGroup is required.
                                                  type: string
                                                kind:
                                                  description: Kind is the type of
                                                    resource being referenced
                                                  type: string
                                                name:
                                                  description: Name is the name of
                                                    resource being referenced
                                                  type: string
                                              required:
                                              - kind
                                              - name
                                              type: object
                                              x-kubernetes-map-type: atomic
                                            dataSourceRef:
                                              description: |-
                                                dataSourceRef specifies the object from which to populate the volume with data, if a non-empty
                                                volume is desired. This may be any object from a non-empty API group (non
                                                core object) or a PersistentVolumeClaim object.
                                                When this field is specified, volume binding will only succeed if the type of
                                                the specified object matches some installed volume populator or dynamic
                                                provisioner.
                                                This field will replace the functionality of the dataSource field and as such
                                                if both fields are non-empty, they must have the same value. For backwards
                                                compatibility, when namespace isn't specified in dataSourceRef,
                                                both fields (dataSource and dataSourceRef) will be set to the same
                                                value automatically if one of them is empty and the other is non-empty.
                                                When namespace is specified in dataSourceRef,
                                                dataSource isn't set to the same value and must be empty.
                                                There are three important differences between dataSource and dataSourceRef:
                                                * While dataSource only allows two specific types of objects, dataSourceRef
                                                  allows any non-core object, as well as PersistentVolumeClaim objects.
                                                * While dataSource ignores disallowed values (dropping them), dataSourceRef
                                                  preserves all values, and generates an error if a disallowed value is
                                                  specified.
                                                * While dataSource only allows local objects, dataSourceRef allows objects
                                                  in any namespaces.
                                                (Beta) Using this field requires the AnyVolumeDataSource feature gate to be enabled.
                                                (Alpha) Using the namespace field of dataSourceRef requires the CrossNamespaceVolumeDataSource feature gate to be enabled.
                                              properties:
                                                apiGroup:
                                                  description: |-
                                                    APIGroup is the group for the resource being referenced.
                                                    If APIGroup is not specified, the specified Kind must be in the core API group.
                                                    For any other third-party types, APIGroup is required.
                                                  type: string
                                                kind:
                                                  description: Kind is the type of
                                                    resource being referenced
                                                  type: string
                                                name:
                                                  description: Name is the name of
                                                    resource being referenced
                                                  type: string
                                                namespace:
                                                  description: |-
                                                    Namespace is the namespace of resource being referenced
                                                    Note that when a namespace is specified, a gateway.networking.k8s.io/ReferenceGrant object is required in the referent namespace to allow that namespace's owner to accept the reference. See the ReferenceGrant documentation for details.
                                                    (Alpha) This field requires the CrossNamespaceVolumeDataSource feature gate to be enabled.
                                                  type: string
                                              required:
                                              - kind
                                              - name
                                              type: object
                                            resources:
                                              description: |-
                                                resources represents the minimum resources the volume should have.
                                                If RecoverVolumeExpansionFailure feature is enabled users are allowed to specify resource requirements
                                                that are lower than previous value but must still be higher than capacity recorded in the
                                                status field of the claim.
                                                More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#resources
                                              properties:
                                                limits:
                                                  additionalProperties:
                                                    anyOf:
                                                    - type: integer
                                                    - type: string
                                                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                                    x-kubernetes-int-or-string: true
                                                  description: |-
                                                    Limits describes the maximum amount of compute resources allowed.
                                                    More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                                                  type: object
                                                requests:
                                                  additionalProperties:
                                                    anyOf:
                                                    - type: integer
                                                    - type: string
                                                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                                    x-kubernetes-int-or-string: true
                                                  description: |-
                                                    Requests describes the minimum amount of compute resources required.
                                                    If Requests is omitted for a container, it defaults to Limits if that is explicitly specified,
                                                    otherwise to an implementation-defined value. Requests cannot exceed Limits.
                                                    More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                                                  type: object
                                              type: object
                                            selector:
                                              description: selector is a label query
                                                over volumes to consider for binding.
                                              properties:
                                                matchExpressions:
                                                  description: matchExpressions is
                                                    a list of label selector requirements.
                                                    The requirements are ANDed.
                                                  items:
                                                    description: |-
                                                      A label selector requirement is a selector that contains values, a key, and an operator that
                                                      relates the key and values.
                                                    properties:
                                                      key:
                                                        description: key is the label
                                                          key that the selector applies
                                                          to.
                                                        type: string
                                                      operator:
                                                        description: |-
                                                          operator represents a key's relationship to a set of values.
                                                          Valid operators are In, NotIn, Exists and DoesNotExist.
                                                        type: string
                                                      values:
                                                        description: |-
                                                          values is an array of string values. If the operator is In or NotIn,
                                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                          the values array must be empty. This array is replaced during a strategic
                                                          merge patch.
                                                        items:
                                                          type: string
                                                        type: array
                                                    required:
                                                    - key
                                                    - operator
                                                    type: object
                                                  type: array
                                                matchLabels:
                                                  additionalProperties:
                                                    type: string
                                                  description: |-
                                                    matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                                    map is equivalent to an element of matchExpressions, whose key field is "key", the
                                                    operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                  type: object
                                              type: object
                                              x-kubernetes-map-type: atomic
                                            storageClassName:
                                              description: |-
                                                storageClassName is the name of the StorageClass required by the claim.
                                                More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#class-1
                                              type: string
                                            volumeAttributesClassName:
                                              description: |-
                                                volumeAttributesClassName may be used to set the VolumeAttributesClass used by this claim.
                                                If specified, the CSI driver will create or update the volume with the attributes defined
                                                in the corresponding VolumeAttributesClass. This has a different purpose than storageClassName,
                                                it can be changed after the claim is created. An empty string value means that no VolumeAttributesClass
                                                will be applied to the claim but it's not allowed to reset this field to empty string once it is set.
                                                If unspecified and the PersistentVolumeClaim is unbound, the default VolumeAttributesClass
                                                will be set by the persistentvolume controller if it exists.
                                                If the resource referred to by volumeAttributesClass does not exist, this PersistentVolumeClaim will be
                                                set to a Pending state, as reflected by the modifyVolumeStatus field, until such as a resource
                                                exists.
                                                More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#volumeattributesclass
                                                (Alpha) Using this field requires the VolumeAttributesClass feature gate to be enabled.
                                              type: string
                                            volumeMode:
                                              description: |-
                                                volumeMode defines what type of volume is required by the claim.
                                                Value of Filesystem is implied when not included in claim spec.
                                              type: string
                                            volumeName:
                                              description: volumeName is the binding
                                                reference to the PersistentVolume
                                                backing this claim.
                                              type: string
                                          type: object
                                      required:
                                      - spec
                                      type: object
                                  type: object
                                fc:
                                  description: fc represents a Fibre Channel resource
                                    that is attached to a kubelet's host machine and
                                    then exposed to the pod.
                                  properties:
                                    fsType:
                                      description: |-
                                        fsType is the filesystem type to mount.
                                        Must be a filesystem type supported by the host operating system.
                                        Ex. "ext4", "xfs", "ntfs". Implicitly inferred to be "ext4" if unspecified.
                                        TODO: how do we prevent errors in the filesystem from compromising the machine
                                      type: string
                                    lun:
                                      description: 'lun is Optional: FC target lun
                                        number'
                                      format: int32
                                      type: integer
                                    readOnly:
                                      description: |-
                                        readOnly is Optional: Defaults to false (read/write). ReadOnly here will force
                                        the ReadOnly setting in VolumeMounts.
                                      type: boolean
                                    targetWWNs:
                                      description: 'targetWWNs is Optional: FC target
                                        worldwide names (WWNs)'
                                      items:
                                        type: string
                                      type: array
                                    wwids:
                                      description: |-
                                        wwids Optional: FC volume world wide identifiers (wwids)
                                        Either wwids or combination of targetWWNs and lun must be set, but not both simultaneously.
                                      items:
                                        type: string
                                      type: array
                                  type: object
                                flexVolume:
                                  description: |-
                                    flexVolume represents a generic volume resource that is
                                    provisioned/attached using an exec based plugin.
                                  properties:
                                    driver:
                                      description: driver is the name of the driver
                                        to use for this volume.
                                      type: string
                                    fsType:
                                      description: |-
                                        fsType is the filesystem type to mount.
                                        Must be a filesystem type supported by the host operating system.
                                        Ex. "ext4", "xfs", "ntfs". The default filesystem depends on FlexVolume script.
                                      type: string
                                    options:
                                      additionalProperties:
                                        type: string
                                      description: 'options is Optional: this field
                                        holds extra command options if any.'
                                      type: object
                                    readOnly:
                                      description: |-
                                        readOnly is Optional: defaults to false (read/write). ReadOnly here will force
                                        the ReadOnly setting in VolumeMounts.
                                      type: boolean
                                    secretRef:
                                      description: |-
                                        secretRef is Optional: secretRef is reference to the secret object containing
                                        sensitive information to pass to the plugin scripts. This may be
                                        empty if no secret object is specified. If the secret object
                                        contains more than one secret, all secrets are passed to the plugin
                                        scripts.
                                      properties:
                                        name:
                                          description: |-
                                            Name of the referent.
                                            More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                            TODO: Add other useful fields. apiVersion, kind, uid?
                                          type: string
                                      type: object
                                      x-kubernetes-map-type: atomic
                                  required:
                                  - driver
                                  type: object
                                flocker:
                                  description: flocker represents a Flocker volume
                                    attached to a kubelet's host machine. This depends
                                    on the Flocker control service being running
                                  properties:
                                    datasetName:
                                      description: |-
                                        datasetName is Name of the dataset stored as metadata -> name on the dataset for Flocker
                                        should be considered as deprecated
                                      type: string
                                    datasetUUID:
                                      description: datasetUUID is the UUID of the
                                        dataset. This is unique identifier of a Flocker
                                        dataset
                                      type: string
                                  type: object
                                gcePersistentDisk:
                                  description: |-
                                    gcePersistentDisk represents a GCE Disk resource that is attached to a
                                    kubelet's host machine and then exposed to the pod.
                                    More info: https://kubernetes.io/docs/concepts/storage/volumes#gcepersistentdisk
                                  properties:
                                    fsType:
                                      description: |-
                                        fsType is filesystem type of the volume that you want to mount.
                                        Tip: Ensure that the filesystem type is supported by the host operating system.
                                        Examples: "ext4", "xfs", "ntfs". Implicitly inferred to be "ext4" if unspecified.
                                        More info: https://kubernetes.io/docs/concepts/storage/volumes#gcepersistentdisk
                                        TODO: how do we prevent errors in the filesystem from compromising the machine
                                      type: string
                                    partition:
                                      description: |-
                                        partition is the partition in the volume that you want to mount.
                                        If omitted, the default is to mount by volume name.
                                        Examples: For volume /dev/sda1, you specify the partition as "1".
                                        Similarly, the volume partition for /dev/sda is "0" (or you can leave the property empty).
                                        More info: https://kubernetes.io/docs/concepts/storage/volumes#gcepersistentdisk
                                      format: int32
                                      type: integer
                                    pdName:
                                      description: |-
                                        pdName is unique name of the PD resource in GCE. Used to identify the disk in GCE.
                                        More info: https://kubernetes.io/docs/concepts/storage/volumes#gcepersistentdisk
                                      type: string
                                    readOnly:
                                      description: |-
                                        readOnly here will force the ReadOnly setting in VolumeMounts.
                                        Defaults to false.
                                        More info: https://kubernetes.io/docs/concepts/storage/volumes#gcepersistentdisk
                                      type: boolean
                                  required:
                                  - pdName
                                  type: object
                                gitRepo:
                                  description: |-
                                    gitRepo represents a git repository at a particular revision.
                                    DEPRECATED: GitRepo is deprecated. To provision a container with a git repo, mount an
                                    EmptyDir into an InitContainer that clones the repo using git, then mount the EmptyDir
                                    into the Pod's container.
                                  properties:
                                    directory:
                                      description: |-
                                        directory is the target directory name.
                                        Must not contain or start with '..'.  If '.' is supplied, the volume directory will be the
                                        git repository.  Otherwise, if specified, the volume will contain the git repository in
                                        the subdirectory with the given name.
                                      type: string
                                    repository:
                                      description: repository is the URL
                                      type: string
                                    revision:
                                      description: revision is the commit hash for
                                        the specified revision.
                                      type: string
                                  required:
                                  - repository
                                  type: object
                                glusterfs:
                                  description: |-
                                    glusterfs represents a Glusterfs mount on the host that shares a pod's lifetime.
                                    More info: https://examples.k8s.io/volumes/glusterfs/README.md
                                  properties:
                                    endpoints:
                                      description: |-
                                        endpoints is the endpoint name that details Glusterfs topology.
                                        More info: https://examples.k8s.io/volumes/glusterfs/README.md#create-a-pod
                                      type: string
                                    path:
                                      description: |-
                                        path is the Glusterfs volume path.
                                        More info: https://examples.k8s.io/volumes/glusterfs/README.md#create-a-pod
                                      type: string
                                    readOnly:
                                      description: |-
                                        readOnly here will force the Glusterfs volume to be mounted with read-only permissions.
                                        Defaults to false.
                                        More info: https://examples.k8s.io/volumes/glusterfs/README.md#create-a-pod
                                      type: boolean
                                  required:
                                  - endpoints
                                  - path
                                  type: object
                                hostPath:
                                  description: |-
                                    hostPath represents a pre-existing file or directory on the host
                                    machine that is directly exposed to the container. This is generally
                                    used for system agents or other privileged things that are allowed
                                    to see the host machine. Most containers will NOT need this.
                                    More info: https://kubernetes.io/docs/concepts/storage/volumes#hostpath
                                    ---
                                    TODO(jonesdl) We need to restrict who can use host directory mounts and who can/can not
                                    mount host directories as read/write.
                                  properties:
                                    path:
                                      description: |-
                                        path of the directory on the host.
                                        If the path is a symlink, it will follow the link to the real path.
                                        More info: https://kubernetes.io/docs/concepts/storage/volumes#hostpath
                                      type: string
                                    type:
                                      description: |-
                                        type for HostPath Volume
                                        Defaults to ""
                                        More info: https://kubernetes.io/docs/concepts/storage/volumes#hostpath
                                      type: string
                                  required:
                                  - path
                                  type: object
                                iscsi:
                                  description: |-
                                    iscsi represents an ISCSI Disk resource that is attached to a
                                    kubelet's host machine and then exposed to the pod.
                                    More info: https://examples.k8s.io/volumes/iscsi/README.md
                                  properties:
                                    chapAuthDiscovery:
                                      description: chapAuthDiscovery defines whether
                                        support iSCSI Discovery CHAP authentication
                                      type: boolean
                                    chapAuthSession:
                                      description: chapAuthSession defines whether
                                        support iSCSI Session CHAP authentication
                                      type: boolean
                                    fsType:
                                      description: |-
                                        fsType is the filesystem type of the volume that you want to mount.
                                        Tip: Ensure that the filesystem type is supported by the host operating system.
                                        Examples: "ext4", "xfs", "ntfs". Implicitly inferred to be "ext4" if unspecified.
                                        More info: https://kubernetes.io/docs/concepts/storage/volumes#iscsi
                                        TODO: how do we prevent errors in the filesystem from compromising the machine
                                      type: string
                                    initiatorName:
                                      description: |-
                                        initiatorName is the custom iSCSI Initiator Name.
                                        If initiatorName is specified with iscsiInterface simultaneously, new iSCSI interface
                                        <target portal>:<volume name> will be created for the connection.
                                      type: string
                                    iqn:
                                      description: iqn is the target iSCSI Qualified
                                        Name.
                                      type: string
                                    iscsiInterface:
                                      description: |-
                                        iscsiInterface is the interface Name that uses an iSCSI transport.
                                        Defaults to 'default' (tcp).
                                      type: string
                                    lun:
                                      description: lun represents iSCSI Target Lun
                                        number.
                                      format: int32
                                      type: integer
                                    portals:
                                      description: |-
                                        portals is the iSCSI Target Portal List. The portal is either an IP or ip_addr:port if the port
                                        is other than default (typically TCP ports 860 and 3260).
                                      items:
                                        type: string
                                      type: array
                                    readOnly:
                                      description: |-
                                        readOnly here will force the ReadOnly setting in VolumeMounts.
                                        Defaults to false.
                                      type: boolean
                                    secretRef:
                                      description: secretRef is the CHAP Secret for
                                        iSCSI target and initiator authentication
                                      properties:
                                        name:
                                          description: |-
                                            Name of the referent.
                                            More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                            TODO: Add other useful fields. apiVersion, kind, uid?
                                          type: string
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    targetPortal:
                                      description: |-
                                        targetPortal is iSCSI Target Portal. The Portal is either an IP or ip_addr:port if the port
                                        is other than default (typically TCP ports 860 and 3260).
                                      type: string
                                  required:
                                  - iqn
                                  - lun
                                  - targetPortal
                                  type: object
                                name:
                                  description: |-
                                    name of the volume.
                                    Must be a DNS_LABEL and unique within the pod.
                                    More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                  type: string
                                nfs:
                                  description: |-
                                    nfs represents an NFS mount on the host that shares a pod's lifetime
                                    More info: https://kubernetes.io/docs/concepts/storage/volumes#nfs
                                  properties:
                                    path:
                                      description: |-
                                        path that is exported by the NFS server.
                                        More info: https://kubernetes.io/docs/concepts/storage/volumes#nfs
                                      type: string
                                    readOnly:
                                      description: |-
                                        readOnly here will force the NFS export to be mounted with read-only permissions.
                                        Defaults to false.
                                        More info: https://kubernetes.io/docs/concepts/storage/volumes#nfs
                                      type: boolean
                                    server:
                                      description: |-
                                        server is the hostname or IP address of the NFS server.
                                        More info: https://kubernetes.io/docs/concepts/storage/volumes#nfs
                                      type: string
                                  required:
                                  - path
                                  - server
                                  type: object
                                persistentVolumeClaim:
                                  description: |-
                                    persistentVolumeClaimVolumeSource represents a reference to a
                                    PersistentVolumeClaim in the same namespace.
                                    More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#persistentvolumeclaims
                                  properties:
                                    claimName:
                                      description: |-
                                        claimName is the name of a PersistentVolumeClaim in the same namespace as the pod using this volume.
                                        More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#persistentvolumeclaims
                                      type: string
                                    readOnly:
                                      description: |-
                                        readOnly Will force the ReadOnly setting in VolumeMounts.
                                        Default false.
                                      type: boolean
                                  required:
                                  - claimName
                                  type: object
                                photonPersistentDisk:
                                  description: photonPersistentDisk represents a PhotonController
                                    persistent disk attached and mounted on kubelets
                                    host machine
                                  properties:
                                    fsType:
                                      description: |-
                                        fsType is the filesystem type to mount.
                                        Must be a filesystem type supported by the host operating system.
                                        Ex. "ext4", "xfs", "ntfs". Implicitly inferred to be "ext4" if unspecified.
                                      type: string
                                    pdID:
                                      description: pdID is the ID that identifies
                                        Photon Controller persistent disk
                                      type: string
                                  required:
                                  - pdID
                                  type: object
                                portworxVolume:
                                  description: portworxVolume represents a portworx
                                    volume attached and mounted on kubelets host machine
                                  properties:
                                    fsType:
                                      description: |-
                                        fSType represents the filesystem type to mount
                                        Must be a filesystem type supported by the host operating system.
                                        Ex. "ext4", "xfs". Implicitly inferred to be "ext4" if unspecified.
                                      type: string
                                    readOnly:
                                      description: |-
                                        readOnly defaults to false (read/write). ReadOnly here will force
                                        the ReadOnly setting in VolumeMounts.
                                      type: boolean
                                    volumeID:
                                      description: volumeID uniquely identifies a
                                        Portworx volume
                                      type: string
                                  required:
                                  - volumeID
                                  type: object
                                projected:
                                  description: projected items for all in one resources
                                    secrets, configmaps, and downward API
                                  properties:
                                    defaultMode:
                                      description: |-
                                        defaultMode are the mode bits used to set permissions on created files by default.
                                        Must be an octal value between 0000 and 0777 or a decimal value between 0 and 511.
                                        YAML accepts both octal and decimal values, JSON requires decimal values for mode bits.
                                        Directories within the path are not affected by this setting.
                                        This might be in conflict with other options that affect the file
                                        mode, like fsGroup, and the result can be other mode bits set.
                                      format: int32
                                      type: integer
                                    sources:
                                      description: sources is the list of volume projections
                                      items:
                                        description: Projection that may be projected
                                          along with other supported volume types
                                        properties:
                                          clusterTrustBundle:
                                            description: |-
                                              ClusterTrustBundle allows a pod to access the `.spec.trustBundle` field
                                              of ClusterTrustBundle objects in an auto-updating file.


                                              Alpha, gated by the ClusterTrustBundleProjection feature gate.


                                              ClusterTrustBundle objects can either be selected by name, or by the
                                              combination of signer name and a label selector.


                                              Kubelet performs aggressive normalization of the PEM contents written
                                              into the pod filesystem.  Esoteric PEM features such as inter-block
                                              comments and block headers are stripped.  Certificates are deduplicated.
                                              The ordering of certificates within the file is arbitrary, and Kubelet
                                              may change the order over time.
                                            properties:
                                              labelSelector:
                                                description: |-
                                                  Select all ClusterTrustBundles that match this label selector.  Only has
                                                  effect if signerName is set.  Mutually-exclusive with name.  If unset,
                                                  interpreted as "match nothing".  If set but empty, interpreted as "match
                                                  everything".
                                                properties:
                                                  matchExpressions:
                                                    description: matchExpressions
                                                      is a list of label selector
                                                      requirements. The requirements
                                                      are ANDed.
                                                    items:
                                                      description: |-
                                                        A label selector requirement is a selector that contains values, a key, and an operator that
                                                        relates the key and values.
                                                      properties:
                                                        key:
                                                          description: key is the
                                                            label key that the selector
                                                            applies to.
                                                          type: string
                                                        operator:
                                                          description: |-
                                                            operator represents a key's relationship to a set of values.
                                                            Valid operators are In, NotIn, Exists and DoesNotExist.
                                                          type: string
                                                        values:
                                                          description: |-
                                                            values is an array of string values. If the operator is In or NotIn,
                                                            the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                            the values array must be empty. This array is replaced during a strategic
                                                            merge patch.
                                                          items:
                                                            type: string
                                                          type: array
                                                      required:
                                                      - key
                                                      - operator
                                                      type: object
                                                    type: array
                                                  matchLabels:
                                                    additionalProperties:
                                                      type: string
                                                    description: |-
                                                      matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                                      map is equivalent to an element of matchExpressions, whose key field is "key", the
                                                      operator is "In", and the values array contains only "value". The requirements are ANDed.
                                                    type: object
                                                type: object
                                                x-kubernetes-map-type: atomic
                                              name:
                                                description: |-
                                                  Select a single ClusterTrustBundle by object name.  Mutually-exclusive
                                                  with signerName and labelSelector.
                                                type: string
                                              optional:
                                                description: |-
                                                  If true, don't block pod startup if the referenced ClusterTrustBundle(s)
                                                  aren't available.  If using name, then the named ClusterTrustBundle is
                                                  allowed not to exist.  If using signerName, then the combination of
                                                  signerName and labelSelector is allowed to match zero
                                                  ClusterTrustBundles.
                                                type: boolean
                                              path:
                                                description: Relative path from the
                                                  volume root to write the bundle.
                                                type: string
                                              signerName:
                                                description: |-
                                                  Select all ClusterTrustBundles that match this signer name.
                                                  Mutually-exclusive with name.  The contents of all selected
                                                  ClusterTrustBundles will be unified and deduplicated.
                                                type: string
                                            required:
                                            - path
                                            type: object
                                          configMap:
                                            description: configMap information about
                                              the configMap data to project
                                            properties:
                                              items:
                                                description: |-
                                                  items if unspecified, each key-value pair in the Data field of the referenced
                                                  ConfigMap will be projected into the volume as a file whose name is the
                                                  key and content is the value. If specified, the listed keys will be
                                                  projected into the specified paths, and unlisted keys will not be
                                                  present. If a key is specified which is not present in the ConfigMap,
                                                  the volume setup will error unless it is marked optional. Paths must be
                                                  relative and may not contain the '..' path or start with '..'.
                                                items:
                                                  description: Maps a string key to
                                                    a path within a volume.
                                                  properties:
                                                    key:
                                                      description: key is the key
                                                        to project.
                                                      type: string
                                                    mode:
                                                      description: |-
                                                        mode is Optional: mode bits used to set permissions on this file.
                                                        Must be an octal value between 0000 and 0777 or a decimal value between 0 and 511.
                                                        YAML accepts both octal and decimal values, JSON requires decimal values for mode bits.
                                                        If not specified, the volume defaultMode will be used.
                                                        This might be in conflict with other options that affect the file
                                                        mode, like fsGroup, and the result can be other mode bits set.
                                                      format: int32
                                                      type: integer
                                                    path:
                                                      description: |-
                                                        path is the relative path of the file to map the key to.
                                                        May not be an absolute path.
                                                        May not contain the path element '..'.
                                                        May not start with the string '..'.
                                                      type: string
                                                  required:
                                                  - key
                                                  - path
                                                  type: object
                                                type: array
                                              name:
                                                description: |-
                                                  Name of the referent.
                                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                  TODO: Add other useful fields. apiVersion, kind, uid?
                                                type: string
                                              optional:
                                                description: optional specify whether
                                                  the ConfigMap or its keys must be
                                                  defined
                                                type: boolean
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          downwardAPI:
                                            description: downwardAPI information about
                                              the downwardAPI data to project
                                            properties:
                                              items:
                                                description: Items is a list of DownwardAPIVolume
                                                  file
                                                items:
                                                  description: DownwardAPIVolumeFile
                                                    represents information to create
                                                    the file containing the pod field
                                                  properties:
                                                    fieldRef:
                                                      description: 'Required: Selects
                                                        a field of the pod: only annotations,
                                                        labels, name and namespace
                                                        are supported.'
                                                      properties:
                                                        apiVersion:
                                                          description: Version of
                                                            the schema the FieldPath
                                                            is written in terms of,
                                                            defaults to "v1".
                                                          type: string
                                                        fieldPath:
                                                          description: Path of the
                                                            field to select in the
                                                            specified API version.
                                                          type: string
                                                      required:
                                                      - fieldPath
                                                      type: object
                                                      x-kubernetes-map-type: atomic
                                                    mode:
                                                      description: |-
                                                        Optional: mode bits used to set permissions on this file, must be an octal value
                                                        between 0000 and 0777 or a decimal value between 0 and 511.
                                                        YAML accepts both octal and decimal values, JSON requires decimal values for mode bits.
                                                        If not specified, the volume defaultMode will be used.
                                                        This might be in conflict with other options that affect the file
                                                        mode, like fsGroup, and the result can be other mode bits set.
                                                      format: int32
                                                      type: integer
                                                    path:
                                                      description: 'Required: Path
                                                        is  the relative path name
                                                        of the file to be created.
                                                        Must not be absolute or contain
                                                        the ''..'' path. Must be utf-8
                                                        encoded. The first item of
                                                        the relative path must not
                                                        start with ''..'''
                                                      type: string
                                                    resourceFieldRef:
                                                      description: |-
                                                        Selects a resource of the container: only resources limits and requests
                                                        (limits.cpu, limits.memory, requests.cpu and requests.memory) are currently supported.
                                                      properties:
                                                        containerName:
                                                          description: 'Container
                                                            name: required for volumes,
                                                            optional for env vars'
                                                          type: string
                                                        divisor:
                                                          anyOf:
                                                          - type: integer
                                                          - type: string
                                                          description: Specifies the
                                                            output format of the exposed
                                                            resources, defaults to
                                                            "1"
                                                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                                          x-kubernetes-int-or-string: true
                                                        resource:
                                                          description: 'Required:
                                                            resource to select'
                                                          type: string
                                                      required:
                                                      - resource
                                                      type: object
                                                      x-kubernetes-map-type: atomic
                                                  required:
                                                  - path
                                                  type: object
                                                type: array
                                            type: object
                                          secret:
                                            description: secret information about
                                              the secret data to project
                                            properties:
                                              items:
                                                description: |-
                                                  items if unspecified, each key-value pair in the Data field of the referenced
                                                  Secret will be projected into the volume as a file whose name is the
                                                  key and content is the value. If specified, the listed keys will be
                                                  projected into the specified paths, and unlisted keys will not be
                                                  present. If a key is specified which is not present in the Secret,
                                                  the volume setup will error unless it is marked optional. Paths must be
                                                  relative and may not contain the '..' path or start with '..'.
                                                items:
                                                  description: Maps a string key to
                                                    a path within a volume.
                                                  properties:
                                                    key:
                                                      description: key is the key
                                                        to project.
                                                      type: string
                                                    mode:
                                                      description: |-
                                                        mode is Optional: mode bits used to set permissions on this file.
                                                        Must be an octal value between 0000 and 0777 or a decimal value between 0 and 511.
                                                        YAML accepts both octal and decimal values, JSON requires decimal values for mode bits.
                                                        If not specified, the volume defaultMode will be used.
                                                        This might be in conflict with other options that affect the file
                                                        mode, like fsGroup, and the result can be other mode bits set.
                                                      format: int32
                                                      type: integer
                                                    path:
                                                      description: |-
                                                        path is the relative path of the file to map the key to.
                                                        May not be an absolute path.
                                                        May not contain the path element '..'.
                                                        May not start with the string '..'.
                                                      type: string
                                                  required:
                                                  - key
                                                  - path
                                                  type: object
                                                type: array
                                              name:
                                                description: |-
                                                  Name of the referent.
                                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                  TODO: Add other useful fields. apiVersion, kind, uid?
                                                type: string
                                              optional:
                                                description: optional field specify
                                                  whether the Secret or its key must
                                                  be defined
                                                type: boolean
                                            type: object
                                            x-kubernetes-map-type: atomic
                                          serviceAccountToken:
                                            description: serviceAccountToken is information
                                              about the serviceAccountToken data to
                                              project
                                            properties:
                                              audience:
                                                description: |-
                                                  audience is the intended audience of the token. A recipient of a token
                                                  must identify itself with an identifier specified in the audience of the
                                                  token, and otherwise should reject the token. The audience defaults to the
                                                  identifier of the apiserver.
                                                type: string
                                              expirationSeconds:
                                                description: |-
                                                  expirationSeconds is the requested duration of validity of the service
                                                  account token. As the token approaches expiration, the kubelet volume
                                                  plugin will proactively rotate the service account token. The kubelet will
                                                  start trying to rotate the token if the token is older than 80 percent of
                                                  its time to live or if the token is older than 24 hours.Defaults to 1 hour
                                                  and must be at least 10 minutes.
                                                format: int64
                                                type: integer
                                              path:
                                                description: |-
                                                  path is the path relative to the mount point of the file to project the
                                                  token into.
                                                type: string
                                            required:
                                            - path
                                            type: object
                                        type: object
                                      type: array
                                  type: object
                                quobyte:
                                  description: quobyte represents a Quobyte mount
                                    on the host that shares a pod's lifetime
                                  properties:
                                    group:
                                      description: |-
                                        group to map volume access to
                                        Default is no group
                                      type: string
                                    readOnly:
                                      description: |-
                                        readOnly here will force the Quobyte volume to be mounted with read-only permissions.
                                        Defaults to false.
                                      type: boolean
                                    registry:
                                      description: |-
                                        registry represents a single or multiple Quobyte Registry services
                                        specified as a string as host:port pair (multiple entries are separated with commas)
                                        which acts as the central registry for volumes
                                      type: string
                                    tenant:
                                      description: |-
                                        tenant owning the given Quobyte volume in the Backend
                                        Used with dynamically provisioned Quobyte volumes, value is set by the plugin
                                      type: string
                                    user:
                                      description: |-
                                        user to map volume access to
                                        Defaults to serivceaccount user
                                      type: string
                                    volume:
                                      description: volume is a string that references
                                        an already created Quobyte volume by name.
                                      type: string
                                  required:
                                  - registry
                                  - volume
                                  type: object
                                rbd:
                                  description: |-
                                    rbd represents a Rados Block Device mount on the host that shares a pod's lifetime.
                                    More info: https://examples.k8s.io/volumes/rbd/README.md
                                  properties:
                                    fsType:
                                      description: |-
                                        fsType is the filesystem type of the volume that you want to mount.
                                        Tip: Ensure that the filesystem type is supported by the host operating system.
                                        Examples: "ext4", "xfs", "ntfs". Implicitly inferred to be "ext4" if unspecified.
                                        More info: https://kubernetes.io/docs/concepts/storage/volumes#rbd
                                        TODO: how do we prevent errors in the filesystem from compromising the machine
                                      type: string
                                    image:
                                      description: |-
                                        image is the rados image name.
                                        More info: https://examples.k8s.io/volumes/rbd/README.md#how-to-use-it
                                      type: string
                                    keyring:
                                      description: |-
                                        keyring is the path to key ring for RBDUser.
                                        Default is /etc/ceph/keyring.
                                        More info: https://examples.k8s.io/volumes/rbd/README.md#how-to-use-it
                                      type: string
                                    monitors:
                                      description: |-
                                        monitors is a collection of Ceph monitors.
                                        More info: https://examples.k8s.io/volumes/rbd/README.md#how-to-use-it
                                      items:
                                        type: string
                                      type: array
                                    pool:
                                      description: |-
                                        pool is the rados pool name.
                                        Default is rbd.
                                        More info: https://examples.k8s.io/volumes/rbd/README.md#how-to-use-it
                                      type: string
                                    readOnly:
                                      description: |-
                                        readOnly here will force the ReadOnly setting in VolumeMounts.
                                        Defaults to false.
                                        More info: https://examples.k8s.io/volumes/rbd/README.md#how-to-use-it
                                      type: boolean
                                    secretRef:
                                      description: |-
                                        secretRef is name of the authentication secret for RBDUser. If provided
                                        overrides keyring.
                                        Default is nil.
                                        More info: https://examples.k8s.io/volumes/rbd/README.md#how-to-use-it
                                      properties:
                                        name:
                                          description: |-
                                            Name of the referent.
                                            More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                            TODO: Add other useful fields. apiVersion, kind, uid?
                                          type: string
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    user:
                                      description: |-
                                        user is the rados user name.
                                        Default is admin.
                                        More info: https://examples.k8s.io/volumes/rbd/README.md#how-to-use-it
                                      type: string
                                  required:
                                  - image
                                  - monitors
                                  type: object
                                scaleIO:
                                  description: scaleIO represents a ScaleIO persistent
                                    volume attached and mounted on Kubernetes nodes.
                                  properties:
                                    fsType:
                                      description: |-
                                        fsType is the filesystem type to mount.
                                        Must be a filesystem type supported by the host operating system.
                                        Ex. "ext4", "xfs", "ntfs".
                                        Default is "xfs".
                                      type: string
                                    gateway:
                                      description: gateway is the host address of
                                        the ScaleIO API Gateway.
                                      type: string
                                    protectionDomain:
                                      description: protectionDomain is the name of
                                        the ScaleIO Protection Domain for the configured
                                        storage.
                                      type: string
                                    readOnly:
                                      description: |-
                                        readOnly Defaults to false (read/write). ReadOnly here will force
                                        the ReadOnly setting in VolumeMounts.
                                      type: boolean
                                    secretRef:
                                      description: |-
                                        secretRef references to the secret for ScaleIO user and other
                                        sensitive information. If this is not provided, Login operation will fail.
                                      properties:
                                        name:
                                          description: |-
                                            Name of the referent.
                                            More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                            TODO: Add other useful fields. apiVersion, kind, uid?
                                          type: string
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    sslEnabled:
                                      description: sslEnabled Flag enable/disable
                                        SSL communication with Gateway, default false
                                      type: boolean
                                    storageMode:
                                      description: |-
                                        storageMode indicates whether the storage for a volume should be ThickProvisioned or ThinProvisioned.
                                        Default is ThinProvisioned.
                                      type: string
                                    storagePool:
                                      description: storagePool is the ScaleIO Storage
                                        Pool associated with the protection domain.
                                      type: string
                                    system:
                                      description: system is the name of the storage
                                        system as configured in ScaleIO.
                                      type: string
                                    volumeName:
                                      description: |-
                                        volumeName is the name of a volume already created in the ScaleIO system
                                        that is associated with this volume source.
                                      type: string
                                  required:
                                  - gateway
                                  - secretRef
                                  - system
                                  type: object
                                secret:
                                  description: |-
                                    secret represents a secret that should populate this volume.
                                    More info: https://kubernetes.io/docs/concepts/storage/volumes#secret
                                  properties:
                                    defaultMode:
                                      description: |-
                                        defaultMode is Optional: mode bits used to set permissions on created files by default.
                                        Must be an octal value between 0000 and 0777 or a decimal value between 0 and 511.
                                        YAML accepts both octal and decimal values, JSON requires decimal values
                                        for mode bits. Defaults to 0644.
                                        Directories within the path are not affected by this setting.
                                        This might be in conflict with other options that affect the file
                                        mode, like fsGroup, and the result can be other mode bits set.
                                      format: int32
                                      type: integer
                                    items:
                                      description: |-
                                        items If unspecified, each key-value pair in the Data field of the referenced
                                        Secret will be projected into the volume as a file whose name is the
                                        key and content is the value. If specified, the listed keys will be
                                        projected into the specified paths, and unlisted keys will not be
                                        present. If a key is specified which is not present in the Secret,
                                        the volume setup will error unless it is marked optional. Paths must be
                                        relative and may not contain the '..' path or start with '..'.
                                      items:
                                        description: Maps a string key to a path within
                                          a volume.
                                        properties:
                                          key:
                                            description: key is the key to project.
                                            type: string
                                          mode:
                                            description: |-
                                              mode is Optional: mode bits used to set permissions on this file.
                                              Must be an octal value between 0000 and 0777 or a decimal value between 0 and 511.
                                              YAML accepts both octal and decimal values, JSON requires decimal values for mode bits.
                                              If not specified, the volume defaultMode will be used.
                                              This might be in conflict with other options that affect the file
                                              mode, like fsGroup, and the result can be other mode bits set.
                                            format: int32
                                            type: integer
                                          path:
                                            description: |-
                                              path is the relative path of the file to map the key to.
                                              May not be an absolute path.
                                              May not contain the path element '..'.
                                              May not start with the string '..'.
                                            type: string
                                        required:
                                        - key
                                        - path
                                        type: object
                                      type: array
                                    optional:
                                      description: optional field specify whether
                                        the Secret or its keys must be defined
                                      type: boolean
                                    secretName:
                                      description: |-
                                        secretName is the name of the secret in the pod's namespace to use.
                                        More info: https://kubernetes.io/docs/concepts/storage/volumes#secret
                                      type: string
                                  type: object
                                storageos:
                                  description: storageOS represents a StorageOS volume
                                    attached and mounted on Kubernetes nodes.
                                  properties:
                                    fsType:
                                      description: |-
                                        fsType is the filesystem type to mount.
                                        Must be a filesystem type supported by the host operating system.
                                        Ex. "ext4", "xfs", "ntfs". Implicitly inferred to be "ext4" if unspecified.
                                      type: string
                                    readOnly:
                                      description: |-
                                        readOnly defaults to false (read/write). ReadOnly here will force
                                        the ReadOnly setting in VolumeMounts.
                                      type: boolean
                                    secretRef:
                                      description: |-
                                        secretRef specifies the secret to use for obtaining the StorageOS API
                                        credentials.  If not specified, default values will be attempted.
                                      properties:
                                        name:
                                          description: |-
                                            Name of the referent.
                                            More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                            TODO: Add other useful fields. apiVersion, kind, uid?
                                          type: string
                                      type: object
                                      x-kubernetes-map-type: atomic
                                    volumeName:
                                      description: |-
                                        volumeName is the human-readable name of the StorageOS volume.  Volume
                                        names are only unique within a namespace.
                                      type: string
                                    volumeNamespace:
                                      description: |-
                                        volumeNamespace specifies the scope of the volume within StorageOS.  If no
                                        namespace is specified then the Pod's namespace will be used.  This allows the
                                        Kubernetes name scoping to be mirrored within StorageOS for tighter integration.
                                        Set VolumeName to any name to override the default behaviour.
                                        Set to "default" if you are not using namespaces within StorageOS.
                                        Namespaces that do not pre-exist within StorageOS will be created.
                                      type: string
                                  type: object
                                vsphereVolume:
                                  description: vsphereVolume represents a vSphere
                                    volume attached and mounted on kubelets host machine
                                  properties:
                                    fsType:
                                      description: |-
                                        fsType is filesystem type to mount.
                                        Must be a filesystem type supported by the host operating system.
                                        Ex. "ext4", "xfs", "ntfs". Implicitly inferred to be "ext4" if unspecified.
                                      type: string
                                    storagePolicyID:
                                      description: storagePolicyID is the storage
                                        Policy Based Management (SPBM) profile ID
                                        associated with the StoragePolicyName.
                                      type: string
                                    storagePolicyName:
                                      description: storagePolicyName is the storage
                                        Policy Based Management (SPBM) profile name.
                                      type: string
                                    volumePath:
                                      description: volumePath is the path that identifies
                                        vSphere volume vmdk
                                      type: string
                                  required:
                                  - volumePath
                                  type: object
                              required:
                              - name
                              type: object
                            type: array
                        required:
                        - containers
                        type: object
                    type: object
                  ttlSecondsAfterFinished:
                    description: |-
                      ttlSecondsAfterFinished limits the lifetime of a Job that has finished
                      execution (either Complete or Failed). If this field is set,
                      ttlSecondsAfterFinished after the Job finishes, it is eligible to be
                      automatically deleted. When the Job is being deleted, its lifecycle
                      guarantees (e.g. finalizers) will be honored. If this field is unset,
                      the Job won't be automatically deleted. If this field is set to zero,
                      the Job becomes eligible to be deleted immediately after it finishes.
                    format: int32
                    type: integer
                required:
                - template
                type: object
              maxReplicaCount:
                format: int32
                type: integer
              minReplicaCount:
                format: int32
                type: integer
              pollingInterval:
                format: int32
                type: integer
              rollout:
                description: Rollout defines the strategy for job rollouts
                properties:
                  propagationPolicy:
                    type: string
                  strategy:
                    type: string
                type: object
              rolloutStrategy:
                type: string
              scalingStrategy:
                description: ScalingStrategy defines the strategy of Scaling
                properties:
                  customScalingQueueLengthDeduction:
                    format: int32
                    type: integer
                  customScalingRunningJobPercentage:
                    type: string
                  multipleScalersCalculation:
                    type: string
                  pendingPodConditions:
                    items:
                      type: string
                    type: array
                  strategy:
                    type: string
                type: object
              successfulJobsHistoryLimit:
                format: int32
                type: integer
              triggers:
                items:
                  description: ScaleTriggers reference the scaler that will be used
                  properties:
                    authenticationRef:
                      description: |-
                        AuthenticationRef points to the TriggerAuthentication or ClusterTriggerAuthentication object that
                        is used to authenticate the scaler with the environment
                      properties:
                        kind:
                          description: Kind of the resource being referred to. Defaults
                            to TriggerAuthentication.
                          type: string
                        name:
                          type: string
                      required:
                      - name
                      type: object
                    metadata:
                      additionalProperties:
                        type: string
                      type: object
                    name:
                      type: string
                    type:
                      type: string
                    useCachedMetrics:
                      type: boolean
                  required:
                  - metadata
                  - type
                  type: object
                type: array
            required:
            - jobTargetRef
            - triggers
            type: object
          status:
            description: ScaledJobStatus defines the observed state of ScaledJob
            properties:
              Paused:
                type: string
              conditions:
                description: Conditions an array representation to store multiple
                  Conditions
                items:
                  description: Condition to store the condition state
                  properties:
                    message:
                      description: A human readable message indicating details about
                        the transition.
                      type: string
                    reason:
                      description: The reason for the condition's last transition.
                      type: string
                    status:
                      description: Status of the condition, one of True, False, Unknown.
                      type: string
                    type:
                      description: Type of condition
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              lastActiveTime:
                format: date-time
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: opensecurity/charts/keda/templates/crds/crd-scaledobjects.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.14.0
  labels:
    app.kubernetes.io/name: keda-operator    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
  name: scaledobjects.keda.sh
spec:
  group: keda.sh
  names:
    kind: ScaledObject
    listKind: ScaledObjectList
    plural: scaledobjects
    shortNames:
    - so
    singular: scaledobject
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.scaleTargetKind
      name: ScaleTargetKind
      type: string
    - jsonPath: .spec.scaleTargetRef.name
      name: ScaleTargetName
      type: string
    - jsonPath: .spec.minReplicaCount
      name: Min
      type: integer
    - jsonPath: .spec.maxReplicaCount
      name: Max
      type: integer
    - jsonPath: .spec.triggers[*].type
      name: Triggers
      type: string
    - jsonPath: .spec.triggers[*].authenticationRef.name
      name: Authentication
      type: string
    - jsonPath: .status.conditions[?(@.type=="Ready")].status
      name: Ready
      type: string
    - jsonPath: .status.conditions[?(@.type=="Active")].status
      name: Active
      type: string
    - jsonPath: .status.conditions[?(@.type=="Fallback")].status
      name: Fallback
      type: string
    - jsonPath: .status.conditions[?(@.type=="Paused")].status
      name: Paused
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ScaledObject is a specification for a ScaledObject resource
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ScaledObjectSpec is the spec for a ScaledObject resource
            properties:
              advanced:
                description: AdvancedConfig specifies advance scaling options
                properties:
                  horizontalPodAutoscalerConfig:
                    description: HorizontalPodAutoscalerConfig specifies horizontal
                      scale config
                    properties:
                      behavior:
                        description: |-
                          HorizontalPodAutoscalerBehavior configures the scaling behavior of the target
                          in both Up and Down directions (scaleUp and scaleDown fields respectively).
                        properties:
                          scaleDown:
                            description: |-
                              scaleDown is scaling policy for scaling Down.
                              If not set, the default value is to allow to scale down to minReplicas pods, with a
                              300 second stabilization window (i.e., the highest recommendation for
                              the last 300sec is used).
                            properties:
                              policies:
                                description: |-
                                  policies is a list of potential scaling polices which can be used during scaling.
                                  At least one policy must be specified, otherwise the HPAScalingRules will be discarded as invalid
                                items:
                                  description: HPAScalingPolicy is a single policy
                                    which must hold true for a specified past interval.
                                  properties:
                                    periodSeconds:
                                      description: |-
                                        periodSeconds specifies the window of time for which the policy should hold true.
                                        PeriodSeconds must be greater than zero and less than or equal to 1800 (30 min).
                                      format: int32
                                      type: integer
                                    type:
                                      description: type is used to specify the scaling
                                        policy.
                                      type: string
                                    value:
                                      description: |-
                                        value contains the amount of change which is permitted by the policy.
                                        It must be greater than zero
                                      format: int32
                                      type: integer
                                  required:
                                  - periodSeconds
                                  - type
                                  - value
                                  type: object
                                type: array
                                x-kubernetes-list-type: atomic
                              selectPolicy:
                                description: |-
                                  selectPolicy is used to specify which policy should be used.
                                  If not set, the default value Max is used.
                                type: string
                              stabilizationWindowSeconds:
                                description: |-
                                  stabilizationWindowSeconds is the number of seconds for which past recommendations should be
                                  considered while scaling up or scaling down.
                                  StabilizationWindowSeconds must be greater than or equal to zero and less than or equal to 3600 (one hour).
                                  If not set, use the default values:
                                  - For scale up: 0 (i.e. no stabilization is done).
                                  - For scale down: 300 (i.e. the stabilization window is 300 seconds long).
                                format: int32
                                maximum: 3600
                                minimum: 0
                                type: integer
                            type: object
                          scaleUp:
                            description: |-
                              scaleUp is scaling policy for scaling Up.
                              If not set, the default value is the higher of:
                                * increase no more than 4 pods per 60 seconds
                                * double the number of pods per 60 seconds
                              No stabilization is used.
                            properties:
                              policies:
                                description: |-
                                  policies is a list of potential scaling polices which can be used during scaling.
                                  At least one policy must be specified, otherwise the HPAScalingRules will be discarded as invalid
                                items:
                                  description: HPAScalingPolicy is a single policy
                                    which must hold true for a specified past interval.
                                  properties:
                                    periodSeconds:
                                      description: |-
                                        periodSeconds specifies the window of time for which the policy should hold true.
                                        PeriodSeconds must be greater than zero and less than or equal to 1800 (30 min).
                                      format: int32
                                      type: integer
                                    type:
                                      description: type is used to specify the scaling
                                        policy.
                                      type: string
                                    value:
                                      description: |-
                                        value contains the amount of change which is permitted by the policy.
                                        It must be greater than zero
                                      format: int32
                                      type: integer
                                  required:
                                  - periodSeconds
                                  - type
                                  - value
                                  type: object
                                type: array
                                x-kubernetes-list-type: atomic
                              selectPolicy:
                                description: |-
                                  selectPolicy is used to specify which policy should be used.
                                  If not set, the default value Max is used.
                                type: string
                              stabilizationWindowSeconds:
                                description: |-
                                  stabilizationWindowSeconds is the number of seconds for which past recommendations should be
                                  considered while scaling up or scaling down.
                                  StabilizationWindowSeconds must be greater than or equal to zero and less than or equal to 3600 (one hour).
                                  If not set, use the default values:
                                  - For scale up: 0 (i.e. no stabilization is done).
                                  - For scale down: 300 (i.e. the stabilization window is 300 seconds long).
                                format: int32
                                maximum: 3600
                                minimum: 0
                                type: integer
                            type: object
                        type: object
                      name:
                        type: string
                    type: object
                  restoreToOriginalReplicaCount:
                    type: boolean
                  scalingModifiers:
                    description: ScalingModifiers describes advanced scaling logic
                      options like formula
                    properties:
                      activationTarget:
                        type: string
                      formula:
                        type: string
                      metricType:
                        description: |-
                          MetricTargetType specifies the type of metric being targeted, and should be either
                          "Value", "AverageValue", or "Utilization"
                        type: string
                      target:
                        type: string
                    type: object
                type: object
              cooldownPeriod:
                format: int32
                type: integer
              fallback:
                description: Fallback is the spec for fallback options
                properties:
                  failureThreshold:
                    format: int32
                    type: integer
                  replicas:
                    format: int32
                    type: integer
                required:
                - failureThreshold
                - replicas
                type: object
              idleReplicaCount:
                format: int32
                type: integer
              initialCooldownPeriod:
                format: int32
                type: integer
              maxReplicaCount:
                format: int32
                type: integer
              minReplicaCount:
                format: int32
                type: integer
              pollingInterval:
                format: int32
                type: integer
              scaleTargetRef:
                description: ScaleTarget holds the reference to the scale target Object
                properties:
                  apiVersion:
                    type: string
                  envSourceContainerName:
                    type: string
                  kind:
                    type: string
                  name:
                    type: string
                required:
                - name
                type: object
              triggers:
                items:
                  description: ScaleTriggers reference the scaler that will be used
                  properties:
                    authenticationRef:
                      description: |-
                        AuthenticationRef points to the TriggerAuthentication or ClusterTriggerAuthentication object that
                        is used to authenticate the scaler with the environment
                      properties:
                        kind:
                          description: Kind of the resource being referred to. Defaults
                            to TriggerAuthentication.
                          type: string
                        name:
                          type: string
                      required:
                      - name
                      type: object
                    metadata:
                      additionalProperties:
                        type: string
                      type: object
                    metricType:
                      description: |-
                        MetricTargetType specifies the type of metric being targeted, and should be either
                        "Value", "AverageValue", or "Utilization"
                      type: string
                    name:
                      type: string
                    type:
                      type: string
                    useCachedMetrics:
                      type: boolean
                  required:
                  - metadata
                  - type
                  type: object
                type: array
            required:
            - scaleTargetRef
            - triggers
            type: object
          status:
            description: ScaledObjectStatus is the status for a ScaledObject resource
            properties:
              compositeScalerName:
                type: string
              conditions:
                description: Conditions an array representation to store multiple
                  Conditions
                items:
                  description: Condition to store the condition state
                  properties:
                    message:
                      description: A human readable message indicating details about
                        the transition.
                      type: string
                    reason:
                      description: The reason for the condition's last transition.
                      type: string
                    status:
                      description: Status of the condition, one of True, False, Unknown.
                      type: string
                    type:
                      description: Type of condition
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              externalMetricNames:
                items:
                  type: string
                type: array
              health:
                additionalProperties:
                  description: HealthStatus is the status for a ScaledObject's health
                  properties:
                    numberOfFailures:
                      format: int32
                      type: integer
                    status:
                      description: HealthStatusType is an indication of whether the
                        health status is happy or failing
                      type: string
                  type: object
                type: object
              hpaName:
                type: string
              lastActiveTime:
                format: date-time
                type: string
              originalReplicaCount:
                format: int32
                type: integer
              pausedReplicaCount:
                format: int32
                type: integer
              resourceMetricNames:
                items:
                  type: string
                type: array
              scaleTargetGVKR:
                description: GroupVersionKindResource provides unified structure for
                  schema.GroupVersionKind and Resource
                properties:
                  group:
                    type: string
                  kind:
                    type: string
                  resource:
                    type: string
                  version:
                    type: string
                required:
                - group
                - kind
                - resource
                - version
                type: object
              scaleTargetKind:
                type: string
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: opensecurity/charts/keda/templates/crds/crd-triggerauthentications.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.14.0
  labels:
    app.kubernetes.io/name: keda-operator    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
  name: triggerauthentications.keda.sh
spec:
  group: keda.sh
  names:
    kind: TriggerAuthentication
    listKind: TriggerAuthenticationList
    plural: triggerauthentications
    shortNames:
    - ta
    - triggerauth
    singular: triggerauthentication
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.podIdentity.provider
      name: PodIdentity
      type: string
    - jsonPath: .spec.secretTargetRef[*].name
      name: Secret
      type: string
    - jsonPath: .spec.env[*].name
      name: Env
      type: string
    - jsonPath: .spec.hashiCorpVault.address
      name: VaultAddress
      type: string
    - jsonPath: .status.scaledobjects
      name: ScaledObjects
      priority: 1
      type: string
    - jsonPath: .status.scaledjobs
      name: ScaledJobs
      priority: 1
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: TriggerAuthentication defines how a trigger can authenticate
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: TriggerAuthenticationSpec defines the various ways to authenticate
            properties:
              awsSecretManager:
                description: AwsSecretManager is used to authenticate using AwsSecretManager
                properties:
                  credentials:
                    properties:
                      accessKey:
                        properties:
                          valueFrom:
                            properties:
                              secretKeyRef:
                                properties:
                                  key:
                                    type: string
                                  name:
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                            required:
                            - secretKeyRef
                            type: object
                        required:
                        - valueFrom
                        type: object
                      accessSecretKey:
                        properties:
                          valueFrom:
                            properties:
                              secretKeyRef:
                                properties:
                                  key:
                                    type: string
                                  name:
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                            required:
                            - secretKeyRef
                            type: object
                        required:
                        - valueFrom
                        type: object
                      accessToken:
                        properties:
                          valueFrom:
                            properties:
                              secretKeyRef:
                                properties:
                                  key:
                                    type: string
                                  name:
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                            required:
                            - secretKeyRef
                            type: object
                        required:
                        - valueFrom
                        type: object
                    required:
                    - accessKey
                    - accessSecretKey
                    type: object
                  podIdentity:
                    description: |-
                      AuthPodIdentity allows users to select the platform native identity
                      mechanism
                    properties:
                      identityAuthorityHost:
                        description: Set identityAuthorityHost to override the default
                          Azure authority host. If this is set, then the IdentityTenantID
                          must also be set
                        type: string
                      identityId:
                        type: string
                      identityOwner:
                        description: IdentityOwner configures which identity has to
                          be used during auto discovery, keda or the scaled workload.
                          Mutually exclusive with roleArn
                        enum:
                        - keda
                        - workload
                        type: string
                      identityTenantId:
                        description: Set identityTenantId to override the default
                          Azure tenant id. If this is set, then the IdentityID must
                          also be set
                        type: string
                      provider:
                        description: PodIdentityProvider contains the list of providers
                        enum:
                        - azure-workload
                        - gcp
                        - aws
                        - aws-eks
                        - none
                        type: string
                      roleArn:
                        description: RoleArn sets the AWS RoleArn to be used. Mutually
                          exclusive with IdentityOwner
                        type: string
                    required:
                    - provider
                    type: object
                  region:
                    type: string
                  secrets:
                    items:
                      properties:
                        name:
                          type: string
                        parameter:
                          type: string
                        versionId:
                          type: string
                        versionStage:
                          type: string
                      required:
                      - name
                      - parameter
                      type: object
                    type: array
                required:
                - secrets
                type: object
              azureKeyVault:
                description: AzureKeyVault is used to authenticate using Azure Key
                  Vault
                properties:
                  cloud:
                    properties:
                      activeDirectoryEndpoint:
                        type: string
                      keyVaultResourceURL:
                        type: string
                      type:
                        type: string
                    required:
                    - type
                    type: object
                  credentials:
                    properties:
                      clientId:
                        type: string
                      clientSecret:
                        properties:
                          valueFrom:
                            properties:
                              secretKeyRef:
                                properties:
                                  key:
                                    type: string
                                  name:
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                            required:
                            - secretKeyRef
                            type: object
                        required:
                        - valueFrom
                        type: object
                      tenantId:
                        type: string
                    required:
                    - clientId
                    - clientSecret
                    - tenantId
                    type: object
                  podIdentity:
                    description: |-
                      AuthPodIdentity allows users to select the platform native identity
                      mechanism
                    properties:
                      identityAuthorityHost:
                        description: Set identityAuthorityHost to override the default
                          Azure authority host. If this is set, then the IdentityTenantID
                          must also be set
                        type: string
                      identityId:
                        type: string
                      identityOwner:
                        description: IdentityOwner configures which identity has to
                          be used during auto discovery, keda or the scaled workload.
                          Mutually exclusive with roleArn
                        enum:
                        - keda
                        - workload
                        type: string
                      identityTenantId:
                        description: Set identityTenantId to override the default
                          Azure tenant id. If this is set, then the IdentityID must
                          also be set
                        type: string
                      provider:
                        description: PodIdentityProvider contains the list of providers
                        enum:
                        - azure-workload
                        - gcp
                        - aws
                        - aws-eks
                        - none
                        type: string
                      roleArn:
                        description: RoleArn sets the AWS RoleArn to be used. Mutually
                          exclusive with IdentityOwner
                        type: string
                    required:
                    - provider
                    type: object
                  secrets:
                    items:
                      properties:
                        name:
                          type: string
                        parameter:
                          type: string
                        version:
                          type: string
                      required:
                      - name
                      - parameter
                      type: object
                    type: array
                  vaultUri:
                    type: string
                required:
                - secrets
                - vaultUri
                type: object
              configMapTargetRef:
                items:
                  description: AuthConfigMapTargetRef is used to authenticate using
                    a reference to a config map
                  properties:
                    key:
                      type: string
                    name:
                      type: string
                    parameter:
                      type: string
                  required:
                  - key
                  - name
                  - parameter
                  type: object
                type: array
              env:
                items:
                  description: |-
                    AuthEnvironment is used to authenticate using environment variables
                    in the destination ScaleTarget spec
                  properties:
                    containerName:
                      type: string
                    name:
                      type: string
                    parameter:
                      type: string
                  required:
                  - name
                  - parameter
                  type: object
                type: array
              gcpSecretManager:
                properties:
                  credentials:
                    properties:
                      clientSecret:
                        properties:
                          valueFrom:
                            properties:
                              secretKeyRef:
                                properties:
                                  key:
                                    type: string
                                  name:
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                            required:
                            - secretKeyRef
                            type: object
                        required:
                        - valueFrom
                        type: object
                    required:
                    - clientSecret
                    type: object
                  podIdentity:
                    description: |-
                      AuthPodIdentity allows users to select the platform native identity
                      mechanism
                    properties:
                      identityAuthorityHost:
                        description: Set identityAuthorityHost to override the default
                          Azure authority host. If this is set, then the IdentityTenantID
                          must also be set
                        type: string
                      identityId:
                        type: string
                      identityOwner:
                        description: IdentityOwner configures which identity has to
                          be used during auto discovery, keda or the scaled workload.
                          Mutually exclusive with roleArn
                        enum:
                        - keda
                        - workload
                        type: string
                      identityTenantId:
                        description: Set identityTenantId to override the default
                          Azure tenant id. If this is set, then the IdentityID must
                          also be set
                        type: string
                      provider:
                        description: PodIdentityProvider contains the list of providers
                        enum:
                        - azure-workload
                        - gcp
                        - aws
                        - aws-eks
                        - none
                        type: string
                      roleArn:
                        description: RoleArn sets the AWS RoleArn to be used. Mutually
                          exclusive with IdentityOwner
                        type: string
                    required:
                    - provider
                    type: object
                  secrets:
                    items:
                      properties:
                        id:
                          type: string
                        parameter:
                          type: string
                        version:
                          type: string
                      required:
                      - id
                      - parameter
                      type: object
                    type: array
                required:
                - secrets
                type: object
              hashiCorpVault:
                description: HashiCorpVault is used to authenticate using Hashicorp
                  Vault
                properties:
                  address:
                    type: string
                  authentication:
                    description: VaultAuthentication contains the list of Hashicorp
                      Vault authentication methods
                    type: string
                  credential:
                    description: Credential defines the Hashicorp Vault credentials
                      depending on the authentication method
                    properties:
                      serviceAccount:
                        type: string
                      token:
                        type: string
                    type: object
                  mount:
                    type: string
                  namespace:
                    type: string
                  role:
                    type: string
                  secrets:
                    items:
                      description: VaultSecret defines the mapping between the path
                        of the secret in Vault to the parameter
                      properties:
                        key:
                          type: string
                        parameter:
                          type: string
                        path:
                          type: string
                        pkiData:
                          properties:
                            altNames:
                              type: string
                            commonName:
                              type: string
                            format:
                              type: string
                            ipSans:
                              type: string
                            otherSans:
                              type: string
                            ttl:
                              type: string
                            uriSans:
                              type: string
                          type: object
                        type:
                          description: VaultSecretType defines the type of vault secret
                          type: string
                      required:
                      - key
                      - parameter
                      - path
                      type: object
                    type: array
                required:
                - address
                - authentication
                - secrets
                type: object
              podIdentity:
                description: |-
                  AuthPodIdentity allows users to select the platform native identity
                  mechanism
                properties:
                  identityAuthorityHost:
                    description: Set identityAuthorityHost to override the default
                      Azure authority host. If this is set, then the IdentityTenantID
                      must also be set
                    type: string
                  identityId:
                    type: string
                  identityOwner:
                    description: IdentityOwner configures which identity has to be
                      used during auto discovery, keda or the scaled workload. Mutually
                      exclusive with roleArn
                    enum:
                    - keda
                    - workload
                    type: string
                  identityTenantId:
                    description: Set identityTenantId to override the default Azure
                      tenant id. If this is set, then the IdentityID must also be
                      set
                    type: string
                  provider:
                    description: PodIdentityProvider contains the list of providers
                    enum:
                    - azure-workload
                    - gcp
                    - aws
                    - aws-eks
                    - none
                    type: string
                  roleArn:
                    description: RoleArn sets the AWS RoleArn to be used. Mutually
                      exclusive with IdentityOwner
                    type: string
                required:
                - provider
                type: object
              secretTargetRef:
                items:
                  description: AuthSecretTargetRef is used to authenticate using a
                    reference to a secret
                  properties:
                    key:
                      type: string
                    name:
                      type: string
                    parameter:
                      type: string
                  required:
                  - key
                  - name
                  - parameter
                  type: object
                type: array
            type: object
          status:
            description: TriggerAuthenticationStatus defines the observed state of
              TriggerAuthentication
            properties:
              scaledjobs:
                type: string
              scaledobjects:
                type: string
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: opensecurity/charts/dex/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: opensecurity-dex
  labels:
    helm.sh/chart: dex-0.19.1
    app.kubernetes.io/name: dex
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/version: "2.41.1"
    app.kubernetes.io/managed-by: Helm
rules:
  - apiGroups: ["apiextensions.k8s.io"]
    resources: ["customresourcedefinitions"]
    verbs: ["list", "create"]
---
# Source: opensecurity/charts/keda/templates/manager/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/name: keda-operator    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  name: keda-operator
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  - configmaps/status
  - limitranges
  - pods
  - services
  - serviceaccounts
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:    
  - secrets
  verbs:
  - list
  - watch
- apiGroups:
  - "*"
  resources:
  - "*/scale"
  verbs:
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - "*"
  resources:
  - "*"
  verbs:
  - get
- apiGroups:
  - apps
  resources:
  - deployments/scale
  - statefulsets/scale
  verbs:
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - apps
  resources:
  - deployments
  - statefulsets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - autoscaling
  resources:
  - horizontalpodautoscalers
  verbs:
  - '*'
- apiGroups:
  - batch
  resources:
  - jobs
  verbs:
  - '*'
- apiGroups:
  - eventing.keda.sh
  resources:
  - cloudeventsources
  - cloudeventsources/status
  verbs:
  - '*'
- apiGroups:
  - keda.sh
  resources:
  - scaledjobs
  - scaledjobs/finalizers
  - scaledjobs/status
  - scaledobjects
  - scaledobjects/finalizers
  - scaledobjects/status
  - triggerauthentications
  - triggerauthentications/status
  verbs:
  - '*'
---
# Source: opensecurity/charts/keda/templates/manager/minimal-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/name: keda-operator-minimal-cluster-role    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  name: keda-operator-minimal-cluster-role
rules:
- apiGroups:
  - keda.sh
  resources:
  - clustertriggerauthentications
  - clustertriggerauthentications/status
  verbs:
  - '*'
- apiGroups:
  - admissionregistration.k8s.io
  resources:
  - validatingwebhookconfigurations
  verbs:
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - apiregistration.k8s.io
  resources:
  - apiservices
  verbs:
  - get
  - list
  - patch
  - update
  - watch
---
# Source: opensecurity/charts/keda/templates/metrics-server/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/name: keda-operator-external-metrics-reader    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  name: keda-operator-external-metrics-reader
rules:
- apiGroups:
  - external.metrics.k8s.io
  resources:
  - '*'
  verbs:
  - '*'
---
# Source: opensecurity/charts/keda/templates/webhooks/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/name: keda-operator-webhook    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  name: keda-operator-webhook
rules:
- apiGroups:
  - autoscaling
  resources:
  - horizontalpodautoscalers
  verbs:
  - list
  - watch
- apiGroups:
  - keda.sh
  resources:
  - scaledobjects
  verbs:
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - deployments
  - statefulsets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - limitranges
  verbs:
  - list
---
# Source: opensecurity/charts/vault/templates/injector-clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: opensecurity-vault-agent-injector-clusterrole
  labels:
    app.kubernetes.io/name: vault-agent-injector
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
rules:
- apiGroups: ["admissionregistration.k8s.io"]
  resources: ["mutatingwebhookconfigurations"]
  verbs:
    - "get"
    - "list"
    - "watch"
    - "patch"
---
# Source: opensecurity/templates/auth-service/auth-rback.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: opensecurity-auth-pods-access
rules:
  - apiGroups:
      - ""
    resources:
      - "pods"
    verbs:
      - "get"
      - "list"
      - "delete"
---
# Source: opensecurity/templates/core/core-rback.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: opensecurity-helmrelease-fullaccess
rules:
  - apiGroups:
      - "helm.toolkit.fluxcd.io"
    resources:
      - "helmreleases"
    verbs:
      - "get"
      - "watch"
      - "list"
      - "create"
      - "delete"
      - "update"
  - apiGroups:
      - "projectcontour.io"
    resources:
      - "httpproxies"
    verbs:
      - "get"
      - "watch"
      - "list"
      - "create"
      - "update"
      - "delete"
  - apiGroups:
      - ""
    resources:
      - "namespaces"
      - "pods"
      - "configmaps"
      - "secrets"
    verbs:
      - "get"
      - "list"
      - "delete"
  - apiGroups:
      - "apps"
    resources:
      - "deployments"
      - "statefulsets"
    verbs:
      - "list"
      - "update"
  - apiGroups:
      - "batch"
    resources:
      - "jobs"
    verbs:
      - "get"
      - "watch"
      - "list"
      - "create"
      - "delete"
      - "update"
---
# Source: opensecurity/templates/integration-service/rback.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: opensecurity-make-describers-access
rules:
  - apiGroups:
      - "keda.sh/v1alpha1"
    resources:
      - "scaledobjects"
    verbs:
      - "get"
      - "list"
      - "create"
      - "delete"
      - "update"
  - apiGroups:
      - "keda.sh"
    resources:
      - "scaledobjects"
    verbs:
      - "get"
      - "list"
      - "create"
      - "delete"
      - "update"
  - apiGroups:
      - "apps"
    resources:
      - "deployments"
    verbs:
      - "get"
      - "list"
      - "create"
      - "delete"
      - "update"
  - apiGroups:
      - ""
    resources:
      - "pods"
    verbs:
      - "get"
      - "list"
      - "create"
      - "delete"
      - "update"
      - "deletecollection"
  - apiGroups:
      - "metrics.k8s.io"
    resources:
      - "pods"
    verbs:
      - "get"
      - "list"
---
# Source: opensecurity/templates/keda-wait-job/service-account.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: opensecurity-crd-access
rules:
  - apiGroups:
      - "kubernetes-client.io/v1"
    resources:
      - "scaledobject"
      - "scaledobjects.keda.sh"
    verbs:
      - "get"
  - apiGroups:
      - "apiextensions.k8s.io"
    resources:
      - "customresourcedefinitions"
    verbs:
      - "get"
---
# Source: opensecurity/templates/task-service/rback.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: opensecurity-make-tasks-access
rules:
  - apiGroups:
      - "keda.sh/v1alpha1"
    resources:
      - "scaledobjects"
    verbs:
      - "get"
      - "list"
      - "create"
      - "delete"
      - "update"
  - apiGroups:
      - "keda.sh"
    resources:
      - "scaledobjects"
    verbs:
      - "get"
      - "list"
      - "create"
      - "delete"
      - "update"
  - apiGroups:
      - "keda.sh"
    resources:
      - "scaledjobs"
    verbs:
      - "get"
      - "list"
      - "create"
      - "delete"
      - "update"
  - apiGroups:
      - "apps"
    resources:
      - "deployments"
    verbs:
      - "get"
      - "list"
      - "create"
      - "delete"
      - "update"
  - apiGroups:
      - ""
    resources:
      - "pods"
    verbs:
      - "get"
      - "list"
      - "create"
      - "delete"
      - "update"
  - apiGroups:
      - "batch"
    resources:
      - "jobs"
    verbs:
      - "get"
      - "list"
      - "create"
      - "delete"
      - "update"
---
# Source: opensecurity/charts/dex/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: opensecurity-dex-cluster
  labels:
    helm.sh/chart: dex-0.19.1
    app.kubernetes.io/name: dex
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/version: "2.41.1"
    app.kubernetes.io/managed-by: Helm
roleRef:
  kind: ClusterRole
  apiGroup: rbac.authorization.k8s.io
  name: opensecurity-dex
subjects:
- kind: ServiceAccount
  namespace: opensecurity
  name: opensecurity-dex
---
# Source: opensecurity/charts/keda/templates/manager/clusterrolebindings.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/name: keda-operator    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  name: keda-operator
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: keda-operator
subjects:
- kind: ServiceAccount
  name: keda-operator
  namespace: opensecurity
---
# Source: opensecurity/charts/keda/templates/manager/minimal-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/name: keda-operator-minimal    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  name: keda-operator-minimal
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: keda-operator-minimal-cluster-role
subjects:
- kind: ServiceAccount
  name: keda-operator
  namespace: opensecurity
---
# Source: opensecurity/charts/keda/templates/metrics-server/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/name: keda-operator-system-auth-delegator    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  name: keda-operator-system-auth-delegator
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: system:auth-delegator
subjects:
- kind: ServiceAccount
  name: keda-metrics-server
  namespace: opensecurity
---
# Source: opensecurity/charts/keda/templates/metrics-server/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/name: keda-operator-hpa-controller-external-metrics    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  name: keda-operator-hpa-controller-external-metrics
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: keda-operator-external-metrics-reader
subjects:
- kind: ServiceAccount
  name: horizontal-pod-autoscaler
  namespace: kube-system
---
# Source: opensecurity/charts/keda/templates/webhooks/clusterrolebindings.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/name: keda-operator-webhook    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  name: keda-operator-webhook
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: keda-operator-webhook
subjects:
- kind: ServiceAccount
  name: keda-webhook
  namespace: opensecurity
---
# Source: opensecurity/charts/vault/templates/injector-clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: opensecurity-vault-agent-injector-binding
  labels:
    app.kubernetes.io/name: vault-agent-injector
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: opensecurity-vault-agent-injector-clusterrole
subjects:
- kind: ServiceAccount
  name: opensecurity-vault-agent-injector
  namespace: opensecurity
---
# Source: opensecurity/charts/vault/templates/server-clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: opensecurity-vault-server-binding
  labels:
    helm.sh/chart: vault-0.28.1
    app.kubernetes.io/name: vault
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: system:auth-delegator
subjects:
- kind: ServiceAccount
  name: opensecurity-vault
  namespace: opensecurity
---
# Source: opensecurity/templates/auth-service/auth-rback.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: opensecurity-auth-pods-access
subjects:
  - kind: ServiceAccount
    name: auth-service
    namespace: opensecurity
roleRef:
  kind: ClusterRole
  name: opensecurity-auth-pods-access
  apiGroup: rbac.authorization.k8s.io
---
# Source: opensecurity/templates/core/core-rback.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: opensecurity-helmrelease-fullaccess
subjects:
  - kind: ServiceAccount
    name: core
    namespace: opensecurity
roleRef:
  kind: ClusterRole
  name: opensecurity-helmrelease-fullaccess
  apiGroup: rbac.authorization.k8s.io
---
# Source: opensecurity/templates/integration-service/rback.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: opensecurity-make-describers-access-to-integration
subjects:
  - kind: ServiceAccount
    name: integration
    namespace: opensecurity
roleRef:
  kind: ClusterRole
  name: opensecurity-make-describers-access
  apiGroup: rbac.authorization.k8s.io
---
# Source: opensecurity/templates/keda-wait-job/service-account.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: wait-for-crd-crd-access-binding
subjects:
  - kind: ServiceAccount
    name: wait-for-crd-sa
    namespace: "opensecurity"
roleRef:
  kind: ClusterRole
  name: opensecurity-crd-access
  apiGroup: rbac.authorization.k8s.io
---
# Source: opensecurity/templates/task-service/rback.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: opensecurity-make-tasks-access
subjects:
  - kind: ServiceAccount
    name: task
    namespace: opensecurity
roleRef:
  kind: ClusterRole
  name: opensecurity-make-tasks-access
  apiGroup: rbac.authorization.k8s.io
---
# Source: opensecurity/charts/dex/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: opensecurity-dex
  labels:
    helm.sh/chart: dex-0.19.1
    app.kubernetes.io/name: dex
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/version: "2.41.1"
    app.kubernetes.io/managed-by: Helm
rules:
  - apiGroups: ["dex.coreos.com"]
    resources: ["*"]
    verbs: ["*"]
---
# Source: opensecurity/charts/keda/templates/manager/minimal-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app.kubernetes.io/name: keda-operator-certs    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  name: keda-operator-certs
  namespace: opensecurity
rules:
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  resourceNames:
  - "kedaorg-certs"
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - create
  - update
---
# Source: opensecurity/templates/compliance-service/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: opensecurity-migrator-runner
  namespace: opensecurity
rules:
  - apiGroups:
      - "batch"
    resources:
      - "jobs"
    verbs:
      - "get"
      - "watch"
      - "list"
      - "create"
      - "delete"
      - "update"
---
# Source: opensecurity/templates/core/core-rback.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: core-local-secret-access
  namespace: opensecurity
rules:
  - apiGroups:
      - ""
    resources:
      - "secrets"
    verbs:
      - "get"
      - "watch"
      - "list"
      - "create"
      - "update"
      - "delete"
---
# Source: opensecurity/templates/post-install-configuration/rback.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: configuration-access
  namespace: opensecurity
rules:
  - apiGroups:
      - "keda.sh/v1alpha1"
    resources:
      - "scaledobjects"
    verbs:
      - "get"
      - "list"
      - "create"
      - "delete"
      - "update"
  - apiGroups:
      - "keda.sh"
    resources:
      - "scaledobjects"
    verbs:
      - "get"
      - "list"
      - "create"
      - "delete"
      - "update"
  - apiGroups:
      - "apps"
    resources:
      - "deployments"
    verbs:
      - "get"
      - "list"
      - "create"
      - "delete"
      - "update"
  - apiGroups:
      - ""
    resources:
      - "namespaces"
      - "pods"
      - "configmaps"
      - "secrets"
    verbs:
      - "get"
      - "list"
      - "create"
      - "delete"
      - "update"
      - "deletecollection"
  - apiGroups:
      - "metrics.k8s.io"
    resources:
      - "pods"
    verbs:
      - "get"
      - "list"
---
# Source: opensecurity/templates/scheduler/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: opensecurity-helmrelease-fullaccess
  namespace: opensecurity
rules:
  - apiGroups:
      - "helm.toolkit.fluxcd.io"
    resources:
      - "helmreleases"
    verbs:
      - "get"
      - "watch"
      - "list"
      - "create"
      - "delete"
      - "update"
---
# Source: opensecurity/charts/dex/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: opensecurity-dex
  labels:
    helm.sh/chart: dex-0.19.1
    app.kubernetes.io/name: dex
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/version: "2.41.1"
    app.kubernetes.io/managed-by: Helm
roleRef:
  kind: Role
  apiGroup: rbac.authorization.k8s.io
  name: opensecurity-dex  
subjects:
- kind: ServiceAccount
  namespace: opensecurity
  name: opensecurity-dex
---
# Source: opensecurity/charts/keda/templates/manager/minimal-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app.kubernetes.io/name: keda-operator-certs    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  name: keda-operator-certs
  namespace: opensecurity
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: keda-operator-certs
subjects:
- kind: ServiceAccount
  name: keda-operator
  namespace: opensecurity
---
# Source: opensecurity/charts/keda/templates/metrics-server/clusterrolebinding.yaml
# https://kubernetes.io/docs/tasks/extend-kubernetes/configure-aggregation-layer/#extension-apiserver-authenticates-the-request
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app.kubernetes.io/name: keda-operator-auth-reader    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  name: keda-operator-auth-reader
  namespace: kube-system
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: extension-apiserver-authentication-reader
subjects:
- kind: ServiceAccount
  name: keda-metrics-server
  namespace: opensecurity
---
# Source: opensecurity/templates/compliance-service/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: opensecurity-compliance-service-migrator-runner
  namespace: opensecurity
subjects:
  - kind: ServiceAccount
    name: compliance
    namespace: opensecurity
roleRef:
  kind: Role
  name: opensecurity-migrator-runner
  apiGroup: rbac.authorization.k8s.io
---
# Source: opensecurity/templates/core/core-rback.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: core-local-secret-access
  namespace: opensecurity
subjects:
  - kind: ServiceAccount
    name: core
    namespace: opensecurity
roleRef:
  kind: Role
  name: core-local-secret-access
  apiGroup: rbac.authorization.k8s.io
---
# Source: opensecurity/templates/post-install-configuration/rback.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: configuration-access
  namespace: opensecurity
subjects:
  - kind: ServiceAccount
    name: configuration
    namespace: opensecurity
roleRef:
  kind: Role
  name: configuration-access
  apiGroup: rbac.authorization.k8s.io
---
# Source: opensecurity/templates/scheduler/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: opensecurity-scheduler-helmrelease-fullaccess
  namespace: opensecurity
subjects:
  - kind: ServiceAccount
    name: scheduler
    namespace: opensecurity
roleRef:
  kind: Role
  name: opensecurity-helmrelease-fullaccess
  apiGroup: rbac.authorization.k8s.io
---
# Source: opensecurity/charts/dex/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: opensecurity-dex
  labels:
    helm.sh/chart: dex-0.19.1
    app.kubernetes.io/name: dex
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/version: "2.41.1"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 5556
      targetPort: http
      protocol: TCP
      appProtocol: http
    - name: grpc
      port: 5557
      targetPort: grpc
      protocol: TCP
      appProtocol: http
    - name: telemetry
      port: 5558
      targetPort: telemetry
      protocol: TCP
      appProtocol: http
  selector:
    app.kubernetes.io/name: dex
    app.kubernetes.io/instance: opensecurity
---
# Source: opensecurity/charts/keda/templates/manager/service.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    app.kubernetes.io/name: keda-operator    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  name: keda-operator
  namespace: opensecurity
spec:
  ports:
  - name: metricsservice
    port: 9666
    targetPort: 9666
  selector:
    app: keda-operator
---
# Source: opensecurity/charts/keda/templates/metrics-server/service.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    app.kubernetes.io/name: keda-operator-metrics-apiserver
    app: keda-operator-metrics-apiserver    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  name: keda-operator-metrics-apiserver
  namespace: opensecurity
spec:
  type: ClusterIP
  ports:
  - name: https
    port: 443
    targetPort: 6443
    protocol: TCP
  - name: metrics
    port: 8080
    targetPort: 8080
    protocol: TCP
  selector:
    app: keda-operator-metrics-apiserver
---
# Source: opensecurity/charts/keda/templates/webhooks/service.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    app.kubernetes.io/name: keda-admission-webhooks    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  name: keda-admission-webhooks
  namespace: opensecurity
spec:
  ports:
  - name: https
    port: 443
    protocol: TCP
    targetPort: 9443
  selector:
    app: keda-admission-webhooks
---
# Source: opensecurity/charts/nats/templates/headless-service.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    app: job-queue
    app.kubernetes.io/component: nats
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nats
    app.kubernetes.io/version: 2.10.18
    helm.sh/chart: nats-1.2.2
  name: opensecurity-nats-headless
spec:
  clusterIP: None
  ports:
  - appProtocol: tcp
    name: nats
    port: 4222
    targetPort: nats
  - appProtocol: http
    name: monitor
    port: 8222
    targetPort: monitor
  publishNotReadyAddresses: true
  selector:
    app.kubernetes.io/component: nats
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/name: nats
---
# Source: opensecurity/charts/nats/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    app: job-queue
    app.kubernetes.io/component: nats
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nats
    app.kubernetes.io/version: 2.10.18
    helm.sh/chart: nats-1.2.2
  name: opensecurity-nats
spec:
  ports:
  - appProtocol: tcp
    name: nats
    port: 4222
    targetPort: nats
  selector:
    app.kubernetes.io/component: nats
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/name: nats
---
# Source: opensecurity/charts/opensearch/templates/service.yaml
kind: Service
apiVersion: v1
metadata:
  name: opensearch-cluster-master
  labels:
    helm.sh/chart: opensearch-2.22.0
    app.kubernetes.io/name: opensearch
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/version: "2.16.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: opensearch-cluster-master
  annotations:
    {}
spec:
  type: ClusterIP
  selector:
    app.kubernetes.io/name: opensearch
    app.kubernetes.io/instance: opensecurity
  ports:
  - name: http
    protocol: TCP
    port: 9200
  - name: transport
    protocol: TCP
    port: 9300
---
# Source: opensecurity/charts/opensearch/templates/service.yaml
kind: Service
apiVersion: v1
metadata:
  name: opensearch-cluster-master-headless
  labels:
    helm.sh/chart: opensearch-2.22.0
    app.kubernetes.io/name: opensearch
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/version: "2.16.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: opensearch-cluster-master
  annotations:
    service.alpha.kubernetes.io/tolerate-unready-endpoints: "true"
spec:
  clusterIP: None # This is needed for statefulset hostnames like opensearch-0 to resolve
  # Create endpoints also if the related pod isn't ready
  publishNotReadyAddresses: true
  selector:
    app.kubernetes.io/name: opensearch
    app.kubernetes.io/instance: opensecurity
  ports:
  - name: http
    port: 9200
  - name: transport
    port: 9300
  - name: metrics
    port: 9600
---
# Source: opensecurity/charts/postgresql/templates/primary/svc-headless.yaml
apiVersion: v1
kind: Service
metadata:
  name: opensecurity-postgresql-primary-hl
  namespace: "opensecurity"
  labels:
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: 16.4.0
    helm.sh/chart: postgresql-15.5.21
    app.kubernetes.io/component: primary
  annotations:
spec:
  type: ClusterIP
  clusterIP: None
  # We want all pods in the StatefulSet to have their addresses published for
  # the sake of the other Postgresql pods even before they're ready, since they
  # have to be able to talk to each other in order to become ready.
  publishNotReadyAddresses: true
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
  selector:
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/component: primary
---
# Source: opensecurity/charts/postgresql/templates/primary/svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: opensecurity-postgresql-primary
  namespace: "opensecurity"
  labels:
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: 16.4.0
    helm.sh/chart: postgresql-15.5.21
    app.kubernetes.io/component: primary
spec:
  type: ClusterIP
  sessionAffinity: None
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
      nodePort: null
  selector:
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/component: primary
---
# Source: opensecurity/charts/postgresql/templates/read/svc-headless.yaml
apiVersion: v1
kind: Service
metadata:
  name: opensecurity-postgresql-read-hl
  namespace: "opensecurity"
  labels:
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: 16.4.0
    helm.sh/chart: postgresql-15.5.21
    app.kubernetes.io/component: read
  annotations:
spec:
  type: ClusterIP
  clusterIP: None
  # We want all pods in the StatefulSet to have their addresses published for
  # the sake of the other Postgresql pods even before they're ready, since they
  # have to be able to talk to each other in order to become ready.
  publishNotReadyAddresses: true
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
  selector:
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/component: read
---
# Source: opensecurity/charts/postgresql/templates/read/svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: opensecurity-postgresql-read
  namespace: "opensecurity"
  labels:
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: 16.4.0
    helm.sh/chart: postgresql-15.5.21
    app.kubernetes.io/component: read
spec:
  type: ClusterIP
  sessionAffinity: None
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
      nodePort: null
  selector:
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/component: read
---
# Source: opensecurity/charts/vault/templates/injector-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: opensecurity-vault-agent-injector-svc
  namespace: opensecurity
  labels:
    app.kubernetes.io/name: vault-agent-injector
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
  
spec:
  ports:
  - name: https
    port: 443
    targetPort: 8080
  selector:
    app.kubernetes.io/name: vault-agent-injector
    app.kubernetes.io/instance: opensecurity
    component: webhook
---
# Source: opensecurity/charts/vault/templates/server-headless-service.yaml
# Service for Vault cluster
apiVersion: v1
kind: Service
metadata:
  name: opensecurity-vault-internal
  namespace: opensecurity
  labels:
    helm.sh/chart: vault-0.28.1
    app.kubernetes.io/name: vault
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    vault-internal: "true"
  annotations:

spec:
  clusterIP: None
  publishNotReadyAddresses: true
  ports:
    - name: "http"
      port: 8200
      targetPort: 8200
    - name: https-internal
      port: 8201
      targetPort: 8201
  selector:
    app.kubernetes.io/name: vault
    app.kubernetes.io/instance: opensecurity
    component: server
---
# Source: opensecurity/charts/vault/templates/server-service.yaml
# Service for Vault cluster
apiVersion: v1
kind: Service
metadata:
  name: opensecurity-vault
  namespace: opensecurity
  labels:
    helm.sh/chart: vault-0.28.1
    app.kubernetes.io/name: vault
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
  annotations:

spec:
  # We want the servers to become available even if they're not ready
  # since this DNS is also used for join operations.
  publishNotReadyAddresses: true
  ports:
    - name: http
      port: 8200
      targetPort: 8200
    - name: https-internal
      port: 8201
      targetPort: 8201
  selector:
    app.kubernetes.io/name: vault
    app.kubernetes.io/instance: opensecurity
    component: server
---
# Source: opensecurity/templates/auth-service/auth-service-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: auth-service
  namespace: opensecurity
  labels:
    service-monitor: opensecurity
    app: auth-service
spec:
  selector:
    app: auth-service
  ports:
    - name: http
      protocol: TCP
      port: 8251
      targetPort: 8251
    - name: grpc
      port: 50051
      protocol: TCP
      targetPort: 50051
---
# Source: opensecurity/templates/compliance-service/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: compliance-service
  namespace: opensecurity
  labels:
    app: compliance-service
    service-monitor: opensecurity
spec:
  selector:
    app: compliance-service
  ports:
  - name: http
    port: 7251
    targetPort: 7251
---
# Source: opensecurity/templates/core/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: core-service
  namespace: opensecurity
  labels:
    app: core-service
    service-monitor: opensecurity
spec:
  selector:
    app: core-service
  ports:
  - name: http
    port: 6251
    targetPort: 6251
---
# Source: opensecurity/templates/es-sink/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: es-sink-service
  namespace: opensecurity
  labels:
    app: es-sink-service
    service-monitor: opensecurity
spec:
  selector:
    app: es-sink-service
  ports:
    - name: http
      port: 8000
      targetPort: 8000
    - name: grpc
      port: 5252
      targetPort: 5252
---
# Source: opensecurity/templates/external-names.yaml
apiVersion: v1
kind: Service
metadata:
  name: frontend
  namespace: opensecurity
spec:
  externalName: frontend.opensecurity.svc.cluster.local
  ports:
    - name: http
      port: 80
      protocol: TCP
      targetPort: 80
  type: ExternalName
---
# Source: opensecurity/templates/integration-service/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: integration-service
  namespace: opensecurity
  labels:
    app: integration-service
    service-monitor: opensecurity
spec:
  selector:
    app: integration-service
  ports:
  - name: http
    port: 8000
    targetPort: 8000
---
# Source: opensecurity/templates/nginx/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: nginx-proxy
  namespace: opensecurity
spec:
  selector:
    app: nginx-proxy
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80
---
# Source: opensecurity/templates/scheduler/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: scheduler
  namespace: opensecurity
  labels:
    app: scheduler
    monitoring: opensecurity
spec:
  selector:
    app: scheduler
  ports:
  - name: http
    port: 5251
    targetPort: 5251
  - name: grpc
    port: 5252
    targetPort: 5252
#---
#apiVersion: v1
#kind: Service
#metadata:
#  name: describe-receiver
#  namespace: opensecurity
#  labels:
#    app: describe-receiver
#    service-monitor: opensecurity
#spec:
#  selector:
#    app: describe-receiver
#  ports:
#    - name: http
#      port: 5251
#      targetPort: 5251
#    - name: grpc
#      port: 5252
#      targetPort: 5252
#  clusterIP: "None"
---
# Source: opensecurity/templates/swagger-service/swagger-ui-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: swagger-ui
  namespace: opensecurity
  labels:
    app: swagger-ui
spec:
  selector:
    app: swagger-ui
  ports:
  - port: 7255
    targetPort: 7255
  clusterIP: "None"
---
# Source: opensecurity/templates/task-service/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: task-service
  namespace: opensecurity
  labels:
    app: task-service
    monitoring: kaytu
spec:
  selector:
    app: task-service
  ports:
  - name: http
    port: 8001
    targetPort: 8001
---
# Source: opensecurity/templates/web-ui-service/web-ui-service-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: web-ui-svc
  namespace: opensecurity
  labels:
    app: web-ui
spec:
  selector:
    app: web-ui
  ports:
  - port: 7298
    targetPort: 7298
---
# Source: opensecurity/charts/dex/templates/deployment.yaml
# /Users/anil/workspace/charts/opensecurity/charts/dex/templates/deployment.yaml
# MODIFIED to include an initContainer to wait for PostgreSQL readiness.
apiVersion: apps/v1
kind: Deployment
metadata:
  name: opensecurity-dex
  labels:
    helm.sh/chart: dex-0.19.1
    app.kubernetes.io/name: dex
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/version: "2.41.1"
    app.kubernetes.io/managed-by: Helm
    
  
spec:
  replicas: 1
  revisionHistoryLimit: 10
  selector:
    matchLabels:
      app.kubernetes.io/name: dex
      app.kubernetes.io/instance: opensecurity
  template:
    metadata:
      annotations:
      
      labels:
        app.kubernetes.io/name: dex
        app.kubernetes.io/instance: opensecurity
    spec:
      serviceAccountName: opensecurity-dex
      securityContext:
        {}

            # ===== BEGIN Wait for PostgreSQL Init Container =====
            # ===== BEGIN Wait for PostgreSQL Init Container =====
      initContainers:
        - name: wait-for-postgres-dex
          image: postgres:15.5
          env:
            - name: PGHOST
              value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
            - name: PGPORT
              value: "5432"
            - name: PGDATABASE
              value: "dex"
            - name: PGUSER
              value: "dex_service"
            - name: PGSSLMODE
              value: "disable"
            - name: PGPASSWORD
              valueFrom:
                secretKeyRef:
                  name: "postgres-secret"
                  key:  "dexServiceUserPassword"
          command: ["sh", "-xc"]
          args:
            - |
              echo "Waiting for PostgreSQL at ${PGHOST}:${PGPORT} db=${PGDATABASE} user=${PGUSER} (sslmode=${PGSSLMODE})"
              retries=30; delay=5; count=0
              until pg_isready \
                -h "${PGHOST}" \
                -p "${PGPORT}" \
                -U "${PGUSER}" \
                -d "${PGDATABASE}" \
                -q -t 2; do
                count=$((count+1))
                if [ "$count" -ge "$retries" ]; then
                  echo "PostgreSQL unavailable after ${retries} retries  exiting."
                  exit 1
                fi
                echo "sleep ${delay}s (attempt ${count}/${retries})"
                sleep "${delay}"
              done
              echo "PostgreSQL is ready!"
          resources:
            limits:
              cpu:    "150m"
              memory: "128Mi"
            requests:
              cpu:    "50m"
              memory: "64Mi"
      # ===== END Wait for PostgreSQL Init Container =====





      containers:
        - name: dex
          securityContext:
            {}
          image: "ghcr.io/opengovern/dex-login:v2.60.0"
          imagePullPolicy: Always
          args:
            - dex
            - serve
            - --web-http-addr
            - 0.0.0.0:5556
            - --grpc-addr
            - 0.0.0.0:5557
            - --telemetry-addr
            - 0.0.0.0:5558
            - /etc/dex/config.yaml
          env:
          ports:
            - name: http
              containerPort: 5556
              protocol: TCP
            - name: grpc
              containerPort: 5557
              protocol: TCP
            - name: telemetry
              containerPort: 5558
              protocol: TCP
          livenessProbe:
            httpGet:
              path: /healthz/live
              port: telemetry
          readinessProbe:
            httpGet:
              path: /healthz/ready
              port: telemetry
          resources:
            {}
          volumeMounts:
            - name: config
              mountPath: /etc/dex
              readOnly: true
      volumes:
        - name: config
          secret:
            secretName: opensecurity-dex
---
# Source: opensecurity/charts/keda/templates/manager/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: keda-operator
  namespace: opensecurity
  labels:
    app: keda-operator
    name: keda-operator
    app.kubernetes.io/name: keda-operator    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
spec:
  revisionHistoryLimit: 10
  replicas: 1
  selector:
    matchLabels:
      app: keda-operator
  template:
    metadata:
      labels:
        app: keda-operator
        name: keda-operator
        app.kubernetes.io/name: keda-operator        
        helm.sh/chart: keda-2.15.1
        app.kubernetes.io/component: operator
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/part-of: keda-operator
        app.kubernetes.io/version: 2.15.1
        app.kubernetes.io/instance: opensecurity
    spec:
      serviceAccountName: keda-operator
      automountServiceAccountToken: true
      securityContext:
        runAsNonRoot: true
      containers:
        - name: keda-operator
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            seccompProfile:
              type: RuntimeDefault
          image: "ghcr.io/kedacore/keda:2.15.1"
          command:
          - "/keda"
          args:
          - "--leader-elect"
          - "--disable-compression=true"
          - "--zap-log-level=info"
          - "--zap-encoder=console"
          - "--zap-time-encoding=rfc3339"
          - "--cert-dir=/certs"
          - "--enable-cert-rotation=true"          
          - "--cert-secret-name=kedaorg-certs"
          - "--operator-service-name=keda-operator"
          - "--metrics-server-service-name=keda-operator-metrics-apiserver"
          - "--webhooks-service-name=keda-admission-webhooks"
          - "--k8s-cluster-name=kubernetes-default"
          - "--k8s-cluster-domain=cluster.local"
          - "--enable-prometheus-metrics=false"
          imagePullPolicy: Always
          livenessProbe:
            httpGet:
              path: /healthz
              port: 8081
            initialDelaySeconds: 25
            periodSeconds: 10
            timeoutSeconds: 1
            failureThreshold: 3
            successThreshold: 1
          readinessProbe:
            httpGet:
              path: /readyz
              port: 8081
            initialDelaySeconds: 20
            periodSeconds: 3
            timeoutSeconds: 1
            failureThreshold: 3
            successThreshold: 1
          ports:
          - containerPort: 9666
            name: metricsservice
            protocol: TCP
          env:
            - name: WATCH_NAMESPACE
              value: ""
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: POD_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
            - name: OPERATOR_NAME
              value: keda-operator
            - name: KEDA_HTTP_DEFAULT_TIMEOUT
              value: "3000"
            - name: KEDA_HTTP_MIN_TLS_VERSION
              value: TLS12
          volumeMounts:         
          - mountPath: /certs
            name: certificates
            readOnly: true
          resources:
            limits:
              cpu: 1
              memory: 1000Mi
            requests:
              cpu: 100m
              memory: 100Mi
      volumes:
      - name: certificates
        secret:
          defaultMode: 420
          secretName: kedaorg-certs
          optional: true
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: opensecurity/charts/keda/templates/metrics-server/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: keda-operator-metrics-apiserver
  namespace: opensecurity
  labels:
    app: keda-operator-metrics-apiserver
    app.kubernetes.io/name: keda-operator-metrics-apiserver    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
spec:
  revisionHistoryLimit: 10
  replicas: 1
  selector:
    matchLabels:
      app: keda-operator-metrics-apiserver
  template:
    metadata:
      labels:
        app: keda-operator-metrics-apiserver
        app.kubernetes.io/name: keda-operator-metrics-apiserver        
        helm.sh/chart: keda-2.15.1
        app.kubernetes.io/component: operator
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/part-of: keda-operator
        app.kubernetes.io/version: 2.15.1
        app.kubernetes.io/instance: opensecurity
    spec:
      serviceAccountName: keda-metrics-server
      automountServiceAccountToken: true
      securityContext:
        runAsNonRoot: true
      containers:
        - name: keda-operator-metrics-apiserver
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            seccompProfile:
              type: RuntimeDefault
          image: "ghcr.io/kedacore/keda-metrics-apiserver:2.15.1"
          imagePullPolicy: Always
          livenessProbe:
            httpGet:
              path: /healthz
              port: 6443
              scheme: HTTPS
            initialDelaySeconds: 5
            periodSeconds: 10
            timeoutSeconds: 1
            failureThreshold: 3
            successThreshold: 1
          readinessProbe:
            httpGet:
              path: /readyz
              port: 6443
              scheme: HTTPS
            initialDelaySeconds: 5
            periodSeconds: 3
            timeoutSeconds: 1
            failureThreshold: 3
            successThreshold: 1
          env:
            - name: WATCH_NAMESPACE
              value: ""
            - name: POD_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
            - name: KEDA_HTTP_DEFAULT_TIMEOUT
              value: "3000"
            - name: KEDA_HTTP_MIN_TLS_VERSION
              value: TLS12
          args:
          - /usr/local/bin/keda-adapter
          - --port=8080
          - --secure-port=6443
          - --logtostderr=true
          - --stderrthreshold=ERROR
          - --disable-compression=true
          - --metrics-service-address=keda-operator.opensecurity.svc.cluster.local:9666
          - --client-ca-file=/certs/ca.crt
          - --tls-cert-file=/certs/tls.crt
          - --tls-private-key-file=/certs/tls.key
          - --cert-dir=/certs
          - --v=0
          ports:
            - containerPort: 6443
              name: https
              protocol: TCP
            - containerPort: 8080
              name: metrics
              protocol: TCP
          volumeMounts:
          - mountPath: /certs
            name: certificates
            readOnly: true
          resources:
            limits:
              cpu: 1
              memory: 1000Mi
            requests:
              cpu: 100m
              memory: 100Mi
      volumes:
      - name: certificates
        secret:
          defaultMode: 420
          secretName: kedaorg-certs
      dnsPolicy: ClusterFirst
      hostNetwork: false
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: opensecurity/charts/keda/templates/webhooks/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: keda-admission-webhooks
  namespace: opensecurity
  labels:
    app: keda-admission-webhooks
    name: keda-admission-webhooks
    app.kubernetes.io/name: keda-admission-webhooks    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
spec:
  revisionHistoryLimit: 10
  replicas: 1
  selector:
    matchLabels:
      app: keda-admission-webhooks
  template:
    metadata:
      labels:
        app: keda-admission-webhooks
        name: keda-admission-webhooks
        app.kubernetes.io/name: keda-admission-webhooks        
        helm.sh/chart: keda-2.15.1
        app.kubernetes.io/component: operator
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/part-of: keda-operator
        app.kubernetes.io/version: 2.15.1
        app.kubernetes.io/instance: opensecurity
    spec:
      serviceAccountName: keda-webhook
      automountServiceAccountToken: true
      securityContext:
        runAsNonRoot: true
      containers:
        - name: keda-admission-webhooks
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            seccompProfile:
              type: RuntimeDefault
          image: "ghcr.io/kedacore/keda-admission-webhooks:2.15.1"
          command:
          - /keda-admission-webhooks
          args:
          - "--zap-log-level=info"
          - "--zap-encoder=console"
          - "--zap-time-encoding=rfc3339"
          - "--cert-dir=/certs"
          - "--health-probe-bind-address=:8081"
          - --metrics-bind-address=:8080
          imagePullPolicy: Always
          livenessProbe:
            httpGet:
              path: /healthz
              port: 8081
            initialDelaySeconds: 25
            periodSeconds: 10
            timeoutSeconds: 1
            failureThreshold: 3
            successThreshold: 1
          readinessProbe:
            httpGet:
              path: /readyz
              port: 8081
            initialDelaySeconds: 20
            periodSeconds: 3
            timeoutSeconds: 1
            failureThreshold: 3
            successThreshold: 1
          ports:
          - containerPort: 9443
            name: http
            protocol: TCP
          env:
            - name: WATCH_NAMESPACE
              value: ""
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: POD_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
          volumeMounts:
          - mountPath: /certs
            name: certificates
            readOnly: true
          resources:
            limits:
              cpu: 1
              memory: 1000Mi
            requests:
              cpu: 100m
              memory: 100Mi
      volumes:
      - name: certificates
        secret:
          defaultMode: 420
          secretName: kedaorg-certs
      hostNetwork: false
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: opensecurity/charts/vault/templates/injector-deployment.yaml
# Deployment for the injector
apiVersion: apps/v1
kind: Deployment
metadata:
  name: opensecurity-vault-agent-injector
  namespace: opensecurity
  labels:
    app.kubernetes.io/name: vault-agent-injector
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    component: webhook
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: vault-agent-injector
      app.kubernetes.io/instance: opensecurity
      component: webhook
  
  template:
    metadata:
      labels:
        app.kubernetes.io/name: vault-agent-injector
        app.kubernetes.io/instance: opensecurity
        component: webhook
    spec:
      
      affinity:
        podAntiAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchLabels:
                  app.kubernetes.io/name: vault-agent-injector
                  app.kubernetes.io/instance: "opensecurity"
                  component: webhook
              topologyKey: kubernetes.io/hostname
  
      
      
      
      serviceAccountName: "opensecurity-vault-agent-injector"
      
      securityContext:
        runAsNonRoot: true
        runAsGroup: 1000
        runAsUser: 100
        fsGroup: 1000
      hostNetwork: false
      containers:
        - name: sidecar-injector
          
          image: "hashicorp/vault-k8s:1.4.2"
          imagePullPolicy: "IfNotPresent"
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
                - ALL
          env:
            - name: AGENT_INJECT_LISTEN
              value: :8080
            - name: AGENT_INJECT_LOG_LEVEL
              value: info
            - name: AGENT_INJECT_VAULT_ADDR
              value: http://opensecurity-vault.opensecurity.svc:8200
            - name: AGENT_INJECT_VAULT_AUTH_PATH
              value: auth/kubernetes
            - name: AGENT_INJECT_VAULT_IMAGE
              value: "hashicorp/vault:1.17.2"
            - name: AGENT_INJECT_TLS_AUTO
              value: opensecurity-vault-agent-injector-cfg
            - name: AGENT_INJECT_TLS_AUTO_HOSTS
              value: opensecurity-vault-agent-injector-svc,opensecurity-vault-agent-injector-svc.opensecurity,opensecurity-vault-agent-injector-svc.opensecurity.svc
            - name: AGENT_INJECT_LOG_FORMAT
              value: standard
            - name: AGENT_INJECT_REVOKE_ON_SHUTDOWN
              value: "false"
            - name: AGENT_INJECT_CPU_REQUEST
              value: "250m"
            - name: AGENT_INJECT_CPU_LIMIT
              value: "500m"
            - name: AGENT_INJECT_MEM_REQUEST
              value: "64Mi"
            - name: AGENT_INJECT_MEM_LIMIT
              value: "128Mi"
            - name: AGENT_INJECT_DEFAULT_TEMPLATE
              value: "map"
            - name: AGENT_INJECT_TEMPLATE_CONFIG_EXIT_ON_RETRY_FAILURE
              value: "true"
            
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
          args:
            - agent-inject
            - 2>&1
          livenessProbe:
            httpGet:
              path: /health/ready
              port: 8080
              scheme: HTTPS
            failureThreshold: 2
            initialDelaySeconds: 5
            periodSeconds: 2
            successThreshold: 1
            timeoutSeconds: 5
          readinessProbe:
            httpGet:
              path: /health/ready
              port: 8080
              scheme: HTTPS
            failureThreshold: 2
            initialDelaySeconds: 5
            periodSeconds: 2
            successThreshold: 1
            timeoutSeconds: 5
          startupProbe:
            httpGet:
              path: /health/ready
              port: 8080
              scheme: HTTPS
            failureThreshold: 12
            initialDelaySeconds: 5
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 5
---
# Source: opensecurity/templates/auth-service/auth-service-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: auth-service
  namespace: opensecurity
  labels:
    app: auth-service
spec:
  minReadySeconds: 10
  replicas: 2
  selector:
    matchLabels:
      app: auth-service
  template:
    metadata:
      labels:
        app: auth-service
    spec:
      serviceAccountName: auth-service
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 1
              preference:
                matchExpressions:
                  - key: opencomply-node
                    operator: In
                    values:
                      - app

      # <<< initContainers Block >>>
      # NOTE: This init container requires values under the 'authDatabase' key.
      initContainers:
        #  Wait for PostgreSQL 
        - name: wait-for-postgres-auth
          image: postgres:15.5
          env: # Fallback if .Values.authDatabase is not defined
            - name: PGHOST
              value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
            - name: PGPORT
              value: "5432"
            - name: PGDATABASE
              value: "auth"
            - name: PGUSER
              value: "auth_service"
            - name: PGSSLMODE
              value: "disable"
            - name: PGPASSWORD
              valueFrom:
                secretKeyRef:
                  name: "postgres-secret"
                  key:  "authServiceUserPassword"
          command: ["sh", "-xc"] # -x prints commands, -c executes the following string
          args:
            - |
              echo "InitContainer (auth): Waiting for PostgreSQL at ${PGHOST}:${PGPORT} db=${PGDATABASE} user=${PGUSER} (sslmode=${PGSSLMODE})"
              retries=30; delay=5; count=0
              until pg_isready \
                -h "${PGHOST}" \
                -p "${PGPORT}" \
                -U "${PGUSER}" \
                -d "${PGDATABASE}" \
                -q -t 2; do
                count=$((count+1))
                if [ "$count" -ge "$retries" ]; then
                  echo "InitContainer (auth): PostgreSQL unavailable after ${retries} retries  exiting."
                  exit 1
                fi
                echo "InitContainer (auth): PostgreSQL unavailable - sleeping ${delay}s (attempt ${count}/${retries})"
                sleep "${delay}"
              done
              echo "InitContainer (auth): PostgreSQL is ready!"
          resources:
            limits:
              cpu:    "150m"
              memory: "128Mi"
            requests:
              cpu:    "50m"
              memory: "64Mi"

        #  Wait for Dex 
        - name: wait-for-dex-auth
          image: curlimages/curl:7.85.0 # Using a lightweight curl image
          env:
            - name: DEX_URL
              # Using port 5558 (telemetry port where /healthz/ready is served)
              value: "http://opensecurity-dex.opensecurity.svc.cluster.local:5558/healthz/ready"
          command: ["sh", "-xc"] # -x prints commands, -c executes the following string
          args:
            - |
              echo "InitContainer (auth): Waiting for Dex at ${DEX_URL}"
              retries=30; delay=5; count=0
              # Use curl with -f to fail silently on server errors (like 404/503)
              # and -s for silent operation (no progress meters)
              until curl -sf "${DEX_URL}"; do
                count=$((count+1))
                if [ "$count" -ge "$retries" ]; then
                  echo "InitContainer (auth): Dex unavailable after ${retries} retries  exiting."
                  exit 1
                fi
                echo "InitContainer (auth): Dex unavailable - sleeping ${delay}s (attempt ${count}/${retries})"
                sleep "${delay}"
              done
              echo "InitContainer (auth): Dex is ready!"
          resources:
            limits:
              cpu:    "50m"
              memory: "50Mi"
            requests:
              cpu:    "25m"
              memory: "25Mi"
      # <<< END OF initContainers BLOCK >>>

      # --- Main auth-service container ---
      containers:
        - name: auth-service
          image: "ghcr.io/opengovern/auth-service:v2.76.14"
          command: [ "/auth-service" ]
          imagePullPolicy: Always
          resources:
            limits:
              cpu: 500m
              memory: 500Mi
            requests:
              cpu: 500m
              memory: 100Mi
          env:
            - name: PLATFORM_HOST
              value: "og.app.domain" # Added quote for safety
            - name: POSTGRESQL_HOST
              value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
            - name: POSTGRESQL_PORT
              value: "5432"
            - name: POSTGRESQL_DB
              value: "auth"
            - name: POSTGRESQL_USERNAME
              value: "auth_service"
            - name: POSTGRESQL_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: postgres-secret
                  key: authServiceUserPassword
            - name: POSTGRESQL_SSLMODE
              value: "disable"
            - name: HTTP_ADDRESS
              value: "0.0.0.0:8251"
            - name: GRPC_ADDRESS
              value: "0.0.0.0:50051"
            - name: INVITE_LINK_TEMPLATE
              value: "https://og.app.domain/invitation?id=%s"
            - name: AUTH0_INVITE_TTL
              value: "21600"
            - name: AUTH0_MANAGE_DOMAIN
              value: "https://kaytu.us.auth0.com" # Hardcoded value
            - name: AUTH0_DOMAIN
              value: "https://kaytu.us.auth0.com/" # Hardcoded value
            - name: DEX_AUTH_DOMAIN
              value: "http://opensecurity-dex.opensecurity.svc.cluster.local:5556/dex"
            - name: DEX_AUTH_PUBLIC_CLIENT_ID
              value: public-client # Hardcoded value

            # --- MODIFIED LINES for helm lint fix ---
            - name: PLATFORM_KEY_ENABLED
              value: 'false'
            - name: PLATFORM_PUBLIC_KEY
              value: ''
            - name: PLATFORM_PRIVATE_KEY
              value: ''



            - name: GRPC_TLS_CERT_PATH
              value: /etc/certs/tls.crt
            - name: GRPC_TLS_KEY_PATH
              value: /etc/certs/tls.key
            - name: GRPC_TLS_CA_PATH
              value: /etc/certs/ca.crt
            - name: COMPLIANCE_BASE_URL
              value: "http://compliance-service.opensecurity.svc.cluster.local:7251"
            - name: INTEGRATION_BASE_URL
              value: "http://integration-service.opensecurity.svc.cluster.local:8000"
            - name: DESCRIBE_BASE_URL
              value: "http://scheduler.opensecurity.svc.cluster.local:5251"
            - name: CORE_BASE_URL
              value: "http://core-service.opensecurity.svc.cluster.local:6251"
            - name: DEX_GRPC_ADDR
              value: "opensecurity-dex.opensecurity.svc.cluster.local:5557"
            - name: WORKSPACE_NAME
              value: "main" # Hardcoded value
            - name: DEX_CALLBACK_URL
              value: "https://og.app.domain/dex/callback,http://og.app.domain/dex/callback,http://localhost:3000/dex/callback,http://localhost:8080/dex/callback"
            - name: NAMESPACE
              value: "opensecurity"
---
# Source: opensecurity/templates/checkup-job/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: checkup-worker
  namespace: "opensecurity"
  labels:
    app: checkup-worker
spec:
  minReadySeconds: 10
  replicas: 0
  selector:
    matchLabels:
      app: checkup-worker
  template:
    metadata:
      labels:
        app: checkup-worker
    spec:
      serviceAccountName: checkup-worker
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 1
              preference:
                matchExpressions:
                  - key: opencomply-node
                    operator: In
                    values:
                      - worker
      containers:
        - name: checkup-worker
          image: "ghcr.io/opengovern/checkup-job:v2.76.13"
          command: ["/checkup-job"]
          args:
            - --id=$(WORKER_ID)
          imagePullPolicy: Always
          resources:
            limits:
              cpu: 500m
              memory: 500Mi
            requests:
              cpu: 500m
              memory: 100Mi
          env:
            - name: NATS_URL
              value: "opensecurity-nats.opensecurity.svc.cluster.local:4222"

            - name: WORKER_ID
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: PROMETHEUS_PUSH_ADDRESS
              value: "prom-system-prometheus-pushgateway.prom-system.svc.cluster.local:9091"
            - name: INTEGRATION_BASE_URL
              value: "http://integration-service.opensecurity.svc.cluster.local:8000"
            - name: CORE_BASE_URL
              value: "http://core-service.opensecurity.svc.cluster.local:6251"
            - name: AUTH_BASE_URL
              value: "http://auth-service.opensecurity.svc.cluster.local:8251"
            - name: JAEGER_AGENT_HOST
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP

            - name: JAEGER_SERVICE_NAME
              value: "checkup-worker"
            - name: TELEMETRY_WORKSPACE_ID
              value: "opensecurity"
            - name: TELEMETRY_HOSTNAME
              value: "og.app.domain"
---
# Source: opensecurity/templates/compliance-quick-job/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: compliance-quick-worker
  namespace: opensecurity
  labels:
    app: compliance-quick-worker
    cloudql-enabled: "true"
spec:
  minReadySeconds: 10
  replicas: 0
  selector:
    matchLabels:
      app: compliance-quick-worker
  template:
    metadata:
      labels:
        app: compliance-quick-worker
        cloudql-enabled: "true"
    spec:
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 1
              preference:
                matchExpressions:
                  - key: opencomply-node
                    operator: In
                    values:
                      - worker
      containers:
        - name: audit-worker
          image: "ghcr.io/opengovern/audit-job:v2.76.13"
          command: ["/audit-job"]
          args:
            - --id=$(WORKER_ID)
          imagePullPolicy: Always
          resources:
            limits:
              cpu: 500m
              memory: 4500Mi
            requests:
              cpu: 500m
              memory: 1000Mi
          env:
            - name: PG_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: postgres-secret
                  key: steampipeUserPassword
            - name: CORE_DB_HOST
              value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
            - name: CORE_DB_PORT
              value: "5432"
            - name: CORE_DB_SSL_MODE
              value: "disable"
            - name: STEAMPIPE_LOG_LEVEL
              value: "WARN"
            - name: STEAMPIPE_MAX_PARALLEL
              value: "50"
            - name: STEAMPIPE_CACHE
              value: "false"
            - name: STEAMPIPE_UPDATE_CHECK
              value: "false"
            - name: NATS_URL
              value: "opensecurity-nats.opensecurity.svc.cluster.local:4222"            
            - name: ELASTICSEARCH_ADDRESS
              value: "https://opensearch-cluster-master.opensecurity.svc.cluster.local:9200"
            - name: ELASTICSEARCH_USERNAME
              value: "admin"
            - name: ELASTICSEARCH_PASSWORD
              value: "myStrongPassword@123!"
            - name: ELASTICSEARCH_INGESTION_ENDPOINT
              value: ""
            - name: ELASTICSEARCH_ISONAKS
              value: "true"
            - name: COMPLIANCE_BASEURL
              value: "http://compliance-service.opensecurity.svc.cluster.local:7251"
            - name: SCHEDULER_BASEURL
              value: "http://scheduler.opensecurity.svc.cluster.local:5251"
            - name: CORE_BASEURL
              value: "http://core-service.opensecurity.svc.cluster.local:6251"
            - name: INTEGRATION_BASEURL
              value: "http://integration-service.opensecurity.svc.cluster.local:8000"
            - name: ESSINK_BASEURL
              value: "http://es-sink-service.opensecurity.svc.cluster.local:8000"

            - name: POSTGRESPLUGIN_HOST
              value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
            - name: POSTGRESPLUGIN_PORT
              value: "5432"
            - name: POSTGRESPLUGIN_USERNAME
              value: "steampipe_user"
            - name: POSTGRESPLUGIN_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: postgres-secret
                  key: steampipeUserPassword

            - name: PROMETHEUS_PUSH_ADDRESS
              value: "prom-system-prometheus-pushgateway.prom-system.svc.cluster.local:9091"

            - name: JAEGER_AGENT_HOST
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: JAEGER_SERVICE_NAME
              value: "audit-worker"
            - name: JAEGER_SAMPLE_RATE
              value: "0.0005"
---
# Source: opensecurity/templates/compliance-report-job/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: compliance-worker
  namespace: opensecurity
  labels:
    app: compliance-worker
    cloudql-enabled: "true"
spec:
  minReadySeconds: 10
  replicas: 0
  selector:
    matchLabels:
      app: compliance-worker
  template:
    metadata:
      labels:
        app: compliance-worker
        cloudql-enabled: "true"
    spec:
      serviceAccountName: compliance-report-worker
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 1
              preference:
                matchExpressions:
                  - key: opencomply-node
                    operator: In
                    values:
                      - worker
      containers:
        - name: compliance-worker
          image: "ghcr.io/opengovern/compliance-report-job:v2.76.13"
          command: ["/compliance-report-job"]
          args:
            - --id=$(WORKER_ID)
          imagePullPolicy: Always
          resources:
            limits:
              cpu: 500m
              memory: 4500Mi
            requests:
              cpu: 500m
              memory: 1000Mi
          env:
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: POSTGRESPLUGIN_HOST
              value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
            - name: POSTGRESPLUGIN_PORT
              value: "5432"
            - name: POSTGRESPLUGIN_USERNAME
              value: "steampipe_user"
            - name: POSTGRESPLUGIN_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: postgres-secret
                  key: steampipeUserPassword
            - name: PG_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: postgres-secret
                  key: steampipeUserPassword
            - name: CORE_DB_HOST
              value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
            - name: CORE_DB_PORT
              value: "5432"
            - name: CORE_DB_SSL_MODE
              value: "disable"
            - name: STEAMPIPE_LOG_LEVEL
              value: "WARN"
            - name: STEAMPIPE_MAX_PARALLEL
              value: "50"
            - name: STEAMPIPE_CACHE
              value: "false"
            - name: STEAMPIPE_UPDATE_CHECK
              value: "false"
            - name: NATS_URL
              value: "opensecurity-nats.opensecurity.svc.cluster.local:4222"            
            - name: ELASTICSEARCH_ADDRESS
              value: "https://opensearch-cluster-master.opensecurity.svc.cluster.local:9200"
            - name: ELASTICSEARCH_USERNAME
              value: "admin"
            - name: ELASTICSEARCH_PASSWORD
              value: "myStrongPassword@123!"
            - name: ELASTICSEARCH_INGESTION_ENDPOINT
              value: ""
            - name: ELASTICSEARCH_ISONAKS
              value: "true"
            - name: COMPLIANCE_BASEURL
              value: "http://compliance-service.opensecurity.svc.cluster.local:7251"
            - name: SCHEDULER_BASEURL
              value: "http://scheduler.opensecurity.svc.cluster.local:5251"
            - name: CORE_BASEURL
              value: "http://core-service.opensecurity.svc.cluster.local:6251"
            - name: INTEGRATION_BASEURL
              value: "http://integration-service.opensecurity.svc.cluster.local:8000"
            - name: ESSINK_BASEURL
              value: "http://es-sink-service.opensecurity.svc.cluster.local:8000"

            - name: PROMETHEUS_PUSH_ADDRESS
              value: "prom-system-prometheus-pushgateway.prom-system.svc.cluster.local:9091"

            - name: JAEGER_AGENT_HOST
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: JAEGER_SERVICE_NAME
              value: "compliance-worker"
            - name: JAEGER_SAMPLE_RATE
              value: "0.0005"
          volumeMounts:
            - name: compliance-worker-postgres-config
              mountPath: /home/steampipe/.steampipe/db/14.2.0/data/postgresql.conf.d/optimization.conf
              subPath: optimization.conf
      volumes:
        - name: compliance-worker-postgres-config
          configMap:
            name: compliance-worker-postgres-config
---
# Source: opensecurity/templates/compliance-report-job/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: compliance-worker-manual
  namespace: opensecurity
  labels:
    app: compliance-worker-manual
spec:
  minReadySeconds: 10
  replicas: 0
  selector:
    matchLabels:
      app: compliance-worker-manual
  template:
    metadata:
      labels:
        app: compliance-worker-manual
    spec:
      serviceAccountName: compliance-report-worker
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 1
              preference:
                matchExpressions:
                  - key: opencomply-node
                    operator: In
                    values:
                      - worker
      containers:
        - name: compliance-worker
          image: "ghcr.io/opengovern/compliance-report-job:v2.76.13"
          command: ["/compliance-report-job"]
          args:
            - --id=$(WORKER_ID)
          imagePullPolicy: Always
          resources:
            limits:
              cpu: 500m
              memory: 4500Mi
            requests:
              cpu: 500m
              memory: 1000Mi
          env:
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: POSTGRESPLUGIN_HOST
              value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
            - name: POSTGRESPLUGIN_PORT
              value: "5432"
            - name: POSTGRESPLUGIN_USERNAME
              value: "steampipe_user"
            - name: POSTGRESPLUGIN_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: postgres-secret
                  key: steampipeUserPassword
            - name: STEAMPIPE_LOG_LEVEL
              value: "WARN"
            - name: STEAMPIPE_MAX_PARALLEL
              value: "50"
            - name: STEAMPIPE_CACHE
              value: "false"
            - name: STEAMPIPE_UPDATE_CHECK
              value: "false"
            - name: NATS_URL
              value: "opensecurity-nats.opensecurity.svc.cluster.local:4222"            
            - name: ELASTICSEARCH_ADDRESS
              value: "https://opensearch-cluster-master.opensecurity.svc.cluster.local:9200"
            - name: ELASTICSEARCH_USERNAME
              value: "admin"
            - name: ELASTICSEARCH_PASSWORD
              value: "myStrongPassword@123!"
            - name: ELASTICSEARCH_INGESTION_ENDPOINT
              value: ""
            - name: ELASTICSEARCH_ISONAKS
              value: "true"
            - name: COMPLIANCE_BASEURL
              value: "http://compliance-service.opensecurity.svc.cluster.local:7251"
            - name: SCHEDULER_BASEURL
              value: "http://scheduler.opensecurity.svc.cluster.local:5251"
            - name: CORE_BASEURL
              value: "http://core-service.opensecurity.svc.cluster.local:6251"
            - name: INTEGRATION_BASEURL
              value: "http://integration-service.opensecurity.svc.cluster.local:8000"
            - name: ESSINK_BASEURL
              value: "http://es-sink-service.opensecurity.svc.cluster.local:8000"

            - name: PROMETHEUS_PUSH_ADDRESS
              value: "prom-system-prometheus-pushgateway.prom-system.svc.cluster.local:9091"

            - name: JAEGER_AGENT_HOST
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: JAEGER_SERVICE_NAME
              value: "compliance-worker"
            - name: JAEGER_SAMPLE_RATE
              value: "0.0005"
            - name: MANUAL_TRIGGER
              value: "true"
          volumeMounts:
            - name: compliance-worker-postgres-config
              mountPath: /home/steampipe/.steampipe/db/14.2.0/data/postgresql.conf.d/optimization.conf
              subPath: optimization.conf
      volumes:
        - name: compliance-worker-postgres-config
          configMap:
            name: compliance-worker-postgres-config
---
# Source: opensecurity/templates/compliance-service/deployment.yaml
# /Users/anil/workspace/charts/opensecurity/templates/compliance-service/deployment.yaml
# Defines the Deployment for the compliance-service, including an initContainer
# to wait for PostgreSQL readiness.
apiVersion: apps/v1
kind: Deployment
metadata:
  name: compliance-service
  namespace: opensecurity
  labels:
    app: compliance-service
    # Add standard Helm labels for better identification
    helm.sh/chart: opensecurity-2.76.20
    app.kubernetes.io/name: compliance-service
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: service
spec:
  minReadySeconds: 10
  replicas: 1 # Running a single replica as per original spec
  selector:
    matchLabels:
      app: compliance-service
  template:
    metadata:
      labels:
        app: compliance-service
        # Mirror standard labels onto the Pods
        helm.sh/chart: opensecurity-2.76.20
        app.kubernetes.io/name: compliance-service
        app.kubernetes.io/instance: opensecurity
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/component: service
    spec:
      # IMPORTANT: Ensure 'compliance' ServiceAccount exists, or change to 'compliance-service' if that's the correct name.
      serviceAccountName: compliance
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 1
              preference:
                matchExpressions:
                  - key: opencomply-node
                    operator: In
                    values:
                      - app

      # ============================================================
      # BEGIN Init Container to wait for PostgreSQL
      # ============================================================
      initContainers:
        - name: wait-for-postgres
          # Use an image containing pg_isready
          image: postgres:15.5 # Adjust tag based on your DB version if needed
          # Environment variables for the init container script
          env:
            - name: PG_HOST
              value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local" # Use same helper as main container
            - name: PG_PORT
              value: "5432"   # Use same helper as main container
            # Provide PGPASSWORD for the 'postgres' user check (most reliable way to check DB readiness)
            # Assumes the postgres superuser password is in postgres-secret under the key 'postgres-password'
            - name: PGPASSWORD
              valueFrom:
                secretKeyRef:
                  name: postgres-secret       # Secret holding DB passwords
                  key: postgres-password     # Key for 'postgres' user password
          command: ['sh', '-c']
          args:
            - |
              echo "InitContainer (compliance-service): Waiting for PostgreSQL host ${PG_HOST}:${PG_PORT}..."
              # Loop until pg_isready succeeds using the 'postgres' superuser
              # '-q' for quiet, '-t 2' for 2-second timeout per attempt
              until pg_isready -h ${PG_HOST} -p ${PG_PORT} -U postgres -q -t 2; do
                echo "InitContainer (compliance-service): PostgreSQL unavailable - sleeping 2s"
                sleep 2
              done
              echo "InitContainer (compliance-service): PostgreSQL is ready!"
          resources: # Define resources for the init container
            limits:
              cpu: 150m
              memory: 128Mi
            requests:
              cpu: 50m
              memory: 64Mi
      # ============================================================
      # END Init Container
      # ============================================================

      containers:
      - name: compliance-service
        image: "ghcr.io/opengovern/compliance-service:v2.76.13"
        command: ["/compliance-service"]
        imagePullPolicy: Always # Consider changing to IfNotPresent for production stability
        resources:
          limits:
            cpu: 500m      # 0.5 CPU Core limit
            memory: 2500Mi # 2.5 GiB Memory limit
          requests:
            cpu: 500m      # 0.5 CPU Core request
            memory: 1000Mi # 1 GiB Memory request
        env:        
        - name: ELASTICSEARCH_ADDRESS
          value: "https://opensearch-cluster-master.opensecurity.svc.cluster.local:9200"
        - name: ELASTICSEARCH_USERNAME
          value: "admin"
        - name: ELASTICSEARCH_PASSWORD
          value: "myStrongPassword@123!"
        - name: ELASTICSEARCH_INGESTION_ENDPOINT
          value: ""
        - name: ELASTICSEARCH_ISONAKS
          value: "true" # Include Elasticsearch env vars
        - name: CURRENT_NAMESPACE
          value: "opensecurity"
        - name: POSTGRESQL_HOST
          value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
        - name: POSTGRESQL_PORT
          value: "5432"
        - name: POSTGRESQL_USERNAME
          value: "compliance_service" # Application-specific user
        - name: POSTGRESQL_PASSWORD
          valueFrom:
            secretKeyRef:
              name: postgres-secret
              key: complianceServiceUserPassword # Password for 'compliance_service' user
        - name: POSTGRESQL_DB
          value: "compliance" # Application-specific database
        - name: POSTGRESQL_SSLMODE
          value: "disable"
        - name: MIGRATOR_JOB_QUEUE_NAME # Added back from original spec
          value: "migrator-jobs-queue"
        - name: HTTP_ADDRESS
          value: "0.0.0.0:7251" # Service listens on this port internally
        # Base URLs for internal service communication
        - name: SCHEDULER_BASEURL
          value: "http://scheduler.opensecurity.svc.cluster.local:5251"
        - name: INTEGRATION_BASEURL
          value: "http://integration-service.opensecurity.svc.cluster.local:8000"
        - name: CORE_BASEURL
          value: "http://core-service.opensecurity.svc.cluster.local:6251"
        # Jaeger Tracing Configuration
        - name: JAEGER_AGENT_HOST
          valueFrom:
            fieldRef:
              fieldPath: status.hostIP # Send traces to Jaeger agent on the node
        - name: JAEGER_SERVICE_NAME
          value: "compliance-service"
        - name: JAEGER_SAMPLE_RATE
          value: "0.0005" # Adjust sample rate as needed # End of the 'if' block
---
# Source: opensecurity/templates/compliance-summarizer-job/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: compliance-summarizer
  namespace: opensecurity
  labels:
    app: compliance-summarizer
spec:
  minReadySeconds: 10
  replicas: 1
  selector:
    matchLabels:
      app: compliance-summarizer
  template:
    metadata:
      labels:
        app: compliance-summarizer
    spec:
      serviceAccountName: compliance-summarizer
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 1
              preference:
                matchExpressions:
                  - key: opencomply-node
                    operator: In
                    values:
                      - worker
      containers:
        - name: compliance-summarizer
          image: "ghcr.io/opengovern/compliance-summarizer-job:v2.76.13"
          command: ["/compliance-summarizer-job"]
          args:
            - --id=$(WORKER_ID)
          imagePullPolicy: Always
          resources:
            limits:
              cpu: 500m
              memory: 1Gi
            requests:
              cpu: 500m
              memory: 100Mi
          env:
            - name: NATS_URL
              value: "opensecurity-nats.opensecurity.svc.cluster.local:4222"            
            - name: ELASTICSEARCH_ADDRESS
              value: "https://opensearch-cluster-master.opensecurity.svc.cluster.local:9200"
            - name: ELASTICSEARCH_USERNAME
              value: "admin"
            - name: ELASTICSEARCH_PASSWORD
              value: "myStrongPassword@123!"
            - name: ELASTICSEARCH_INGESTION_ENDPOINT
              value: ""
            - name: ELASTICSEARCH_ISONAKS
              value: "true"

            - name: POSTGRESQL_HOST
              value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
            - name: POSTGRESQL_PORT
              value: "5432"
            - name: POSTGRESQL_USERNAME
              value: "compliance_service"
            - name: POSTGRESQL_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: postgres-secret
                  key: complianceServiceUserPassword
            - name: POSTGRESQL_DB
              value: "compliance"
            - name: POSTGRESQL_SSLMODE
              value: "disable"

            - name: CORE_BASEURL
              value: "http://core-service.opensecurity.svc.cluster.local:6251"
            - name: INTEGRATION_BASEURL
              value: "http://integration-service.opensecurity.svc.cluster.local:8000"
            - name: ESSINK_BASEURL
              value: "http://es-sink-service.opensecurity.svc.cluster.local:8000"
            - name: PROMETHEUS_PUSH_ADDRESS
              value: "prom-system-prometheus-pushgateway.prom-system.svc.cluster.local:9091"
---
# Source: opensecurity/templates/compliance-summarizer-job/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: compliance-summarizer-manuals
  namespace: opensecurity
  labels:
    app: compliance-summarizer-manuals
spec:
  minReadySeconds: 10
  replicas: 1
  selector:
    matchLabels:
      app: compliance-summarizer-manuals
  template:
    metadata:
      labels:
        app: compliance-summarizer-manuals
    spec:
      serviceAccountName: compliance-summarizer
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 1
              preference:
                matchExpressions:
                  - key: opencomply-node
                    operator: In
                    values:
                      - worker
      containers:
        - name: compliance-summarizer
          image: "ghcr.io/opengovern/compliance-summarizer-job:v2.76.13"
          command: ["/compliance-summarizer-job"]
          args:
            - --id=$(WORKER_ID)
          imagePullPolicy: Always
          resources:
            limits:
              cpu: 500m
              memory: 1Gi
            requests:
              cpu: 500m
              memory: 100Mi
          env:
            - name: NATS_URL
              value: "opensecurity-nats.opensecurity.svc.cluster.local:4222"            
            - name: ELASTICSEARCH_ADDRESS
              value: "https://opensearch-cluster-master.opensecurity.svc.cluster.local:9200"
            - name: ELASTICSEARCH_USERNAME
              value: "admin"
            - name: ELASTICSEARCH_PASSWORD
              value: "myStrongPassword@123!"
            - name: ELASTICSEARCH_INGESTION_ENDPOINT
              value: ""
            - name: ELASTICSEARCH_ISONAKS
              value: "true"

            - name: POSTGRESQL_HOST
              value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
            - name: POSTGRESQL_PORT
              value: "5432"
            - name: POSTGRESQL_USERNAME
              value: "compliance_service"
            - name: POSTGRESQL_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: postgres-secret
                  key: complianceServiceUserPassword
            - name: POSTGRESQL_DB
              value: "compliance"
            - name: POSTGRESQL_SSLMODE
              value: "disable"

            - name: CORE_BASEURL
              value: "http://core-service.opensecurity.svc.cluster.local:6251"
            - name: INTEGRATION_BASEURL
              value: "http://integration-service.opensecurity.svc.cluster.local:8000"
            - name: ESSINK_BASEURL
              value: "http://es-sink-service.opensecurity.svc.cluster.local:8000"
            - name: PROMETHEUS_PUSH_ADDRESS
              value: "prom-system-prometheus-pushgateway.prom-system.svc.cluster.local:9091"
            - name: MANUAL_TRIGGER
              value: "true"
---
# Source: opensecurity/templates/core/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: core-service
  namespace: opensecurity
  labels:
    app: core-service
    cloudql-enabled: "true"
spec:
  minReadySeconds: 10
  replicas: 1
  selector:
    matchLabels:
      app: core-service
  template:
    metadata:
      labels:
        app: core-service
        cloudql-enabled: "true"
    spec:
      serviceAccountName: core
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 1
              preference:
                matchExpressions:
                  - key: opencomply-node
                    operator: In
                    values:
                      - app
      containers:
      - name: core-service
        image: "ghcr.io/opengovern/core-service:v2.76.13"
        command: ["/core-service"]
        imagePullPolicy: Always
        resources:
          limits:
            cpu: 700m
            memory: 3000Mi
          requests:
            cpu: 500m
            memory: 100Mi
        env:        
        - name: ELASTICSEARCH_ADDRESS
          value: "https://opensearch-cluster-master.opensecurity.svc.cluster.local:9200"
        - name: ELASTICSEARCH_USERNAME
          value: "admin"
        - name: ELASTICSEARCH_PASSWORD
          value: "myStrongPassword@123!"
        - name: ELASTICSEARCH_INGESTION_ENDPOINT
          value: ""
        - name: ELASTICSEARCH_ISONAKS
          value: "true"
        - name: CORE_POSTGRES__HOST
          value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
        - name: CORE_POSTGRES__PORT
          value: "5432"
        - name: CORE_POSTGRES__DB
          value: "core"
        - name: CORE_POSTGRES__USERNAME
          value: "core_service"
        - name: CORE_POSTGRES__PASSWORD
          valueFrom:
            secretKeyRef:
              name: postgres-secret
              key: coreServiceUserPassword
        - name: CORE_POSTGRES_SSL_MODE
          value: "disable"
        - name: CORE_HTTP__ADDRESS
          value: "0.0.0.0:6251"
        - name: CORE_INTEGRATION__BASE_URL
          value: "http://integration-service.%NAMESPACE%.svc.cluster.local:8000"
        - name: CORE_SCHEDULER__BASE_URL
          value: "http://scheduler.%NAMESPACE%.svc.cluster.local:5251"
        - name: CORE_COMPLIANCE__BASE_URL
          value: "http://compliance-service.%NAMESPACE%.svc.cluster.local:7251"
        - name: CORE_OPENGOVERNANCE_NAMESPACE
          value: "opensecurity"
        - name: CORE_PRIMARY_DOMAIN_URL
          value: "og.app.domain"
        - name: CORE_DEX_GRPC_ADDR
          value: "opensecurity-dex.opensecurity.svc.cluster.local:5557"
        - name: CORE_DEX_PUBLIC_CLIENT_REDIRECT_URIS
          value: "https://og.app.domain/callback,http://og.app.domain/callback,http://localhost:3000/callback,http://localhost:8080/callback"
        - name: CORE_DEX_PRIVATE_CLIENT_REDIRECT_URIS
          value: "https://og.app.domain/callback"
        - name: DEX_PUBLIC_CLIENT_REDIRECT_URIS
          value: "https://og.app.domain/callback,http://og.app.domain/callback,http://localhost:3000/callback,http://localhost:8080/callback"
        - name: DEX_PRIVATE_CLIENT_REDIRECT_URIS
          value: "https://og.app.domain/callback"
        - name: CORE_SAMPLEDATA_INTEGRATIONS_CHECK
          value: "494894f0-aa87-4c32-bafd-066c3cf1a6ae,545a3e48-559d-4f1c-a446-27882bf77d68,f36afd2f-cd85-47c6-9eff-be8213289d28,218317b1-6f26-4ad0-91a7-40f17311d5b3,49d89218-1109-4b86-a7a4-edb55aa658dd,79302008-5d35-4a83-914c-20ecd80f4228,e6cb0afa-e624-4ca7-8b47-fa9988831137,1c2a6b18-ac87-4f5e-a472-1e26f8704f29,c00bb650-f448-41b7-8ccc-bcd6184f78c3"
        - name: CORE_VAULT__PROVIDER
          value: "hashicorp-vault"
        - name: CORE_VAULT__HASHICORP__ADDRESS
          value: "http://opensecurity-vault-internal.opensecurity.svc.cluster.local:8200"
        - name: CORE_VAULT__KEY_ID
          value: workspace-creds
        - name: STEAMPIPE_HOST
          value: cloudql-service.opensecurity.svc.cluster.local
        - name: STEAMPIPE_PORT
          value: "9193"
        - name: STEAMPIPE_USERNAME
          value: "steampipe"
        - name: STEAMPIPE_PASSWORD
          value: "abcd"
        - name: STEAMPIPE_DB
          value: "steampipe"
        - name: HTTP_ADDRESS
          value: "0.0.0.0:6251"
        - name: SCHEDULER_BASE_URL
          value: "http://scheduler.opensecurity.svc.cluster.local:5251"
        - name: INTEGRATION_BASE_URL
          value: "http://integration-service.opensecurity.svc.cluster.local:8000"
        - name: COMPLIANCE_BASE_URL
          value: "http://compliance-service.opensecurity.svc.cluster.local:7251"
        - name: AUTH_BASE_URL
          value: "http://auth-service.opensecurity.svc.cluster.local:8251"
        - name: POSTGRESPLUGIN_HOST
          value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
        - name: POSTGRESPLUGIN_PORT
          value: "5432"
        - name: POSTGRESPLUGIN_USERNAME
          value: "steampipe_user"
        - name: POSTGRESPLUGIN_PASSWORD
          valueFrom:
            secretKeyRef:
              name: postgres-secret
              key: steampipeUserPassword
        - name: PG_PASSWORD
          valueFrom:
            secretKeyRef:
              name: postgres-secret
              key: steampipeUserPassword
        - name: CORE_DB_HOST
          value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
        - name: CORE_DB_PORT
          value: "5432"
        - name: CORE_DB_SSL_MODE
          value: "disable"
        - name: CORE_BASEURL
          value: "http://localhost:6251"
        - name: COMPLIANCE_ENABLED
          value: "true"
---
# Source: opensecurity/templates/es-sink/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: es-sink-service
  namespace: opensecurity
  labels:
    app: es-sink-service
spec:
  minReadySeconds: 10
  replicas: 1
  selector:
    matchLabels:
      app: es-sink-service
  template:
    metadata:
      labels:
        app: es-sink-service
    spec:
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 1
              preference:
                matchExpressions:
                  - key: opencomply-node
                    operator: In
                    values:
                      - app
      containers:
        - name: es-sink-service
          image: "ghcr.io/opengovern/es-sink:v2.76.13"
          command: ["/es-sink-service"]
          imagePullPolicy: Always
          resources:
            limits:
              cpu: 200m
              memory: 1Gi
            requests:
              cpu: 100m
              memory: 100Mi
          env:
            - name: ESSINK_HTTP__ADDRESS
              value: "0.0.0.0:8000"

            - name: ESSINK_GRPC__ADDRESS
              value: "0.0.0.0:5252"
            - name: ESSINK_GRPC__AUTH_URI
              value: "auth-service.opensecurity.svc.cluster.local:50051"

            - name: ESSINK_ELASTICSEARCH__ADDRESS
              value: "https://opensearch-cluster-master.opensecurity.svc.cluster.local:9200"
            - name: ESSINK_ELASTICSEARCH__IS_OPEN_SEARCH
              value: "true"
            - name: ESSINK_ELASTICSEARCH__IS_ON_AKS
              value: "true"
            - name: ESSINK_ELASTICSEARCH__USERNAME
              value: "admin"
            - name: ESSINK_ELASTICSEARCH__PASSWORD
              value: "myStrongPassword@123!"
            - name: ESSINK_NATS__URL
              value: "opensecurity-nats.opensecurity.svc.cluster.local:4222"
---
# Source: opensecurity/templates/integration-service/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: integration-service
  namespace: opensecurity
  labels:
    app: integration-service
spec:
  minReadySeconds: 10
  replicas: 1
  selector:
    matchLabels:
      app: integration-service
  template:
    metadata:
      labels:
        app: integration-service
    spec:
      serviceAccountName: integration
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 1
              preference:
                matchExpressions:
                  - key: opencomply-node
                    operator: In
                    values:
                      - app
      containers:
      - name: integration-service
        image: "ghcr.io/opengovern/integration:v2.76.13"
        command: ["/integration-service"]
        imagePullPolicy: Always
        resources:
          limits:
            cpu: 500m
            memory: 4000Mi
          requests:
            cpu: 100m
            memory: 2000Mi
        env:
        - name: INTEGRATION_POSTGRES__HOST
          value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
        - name: INTEGRATION_POSTGRES__PORT
          value: "5432"
        - name: INTEGRATION_POSTGRES__DB
          value: "integration"
        - name: INTEGRATION_POSTGRES__USERNAME
          value: "postgres"
        - name: INTEGRATION_POSTGRES__PASSWORD
          valueFrom:
            secretKeyRef:
              name: postgres-secret
              key: postgres-password
        - name: INTEGRATION_POSTGRES__SSLMODE
          value: "disable"
        - name: INTEGRATION_HTTP__ADDRESS
          value: "0.0.0.0:8000"
        - name: INTEGRATION_DESCRIBE__BASE_URL
          value: "http://scheduler.opensecurity.svc.cluster.local:5251"
        - name: INTEGRATION_CORE__BASE_URL
          value: "http://core-service.opensecurity.svc.cluster.local:6251"

        - name: INTEGRATION_STEAMPIPE__HOST
          value: cloudql-service.opensecurity.svc.cluster.local
        - name: INTEGRATION_STEAMPIPE__PORT
          value: "9193"
        - name: INTEGRATION_STEAMPIPE__USERNAME
          value: "steampipe"
        - name: INTEGRATION_STEAMPIPE__PASSWORD
          value: "abcd"
        - name: INTEGRATION_STEAMPIPE__DB
          value: "steampipe"
        - name: INTEGRATION_VAULT__PROVIDER
          value: "hashicorp-vault"
        - name: INTEGRATION_VAULT__HASHICORP__ADDRESS
          value: "http://opensecurity-vault-internal.opensecurity.svc.cluster.local:8200"
        - name: INTEGRATION_VAULT__KEY_ID
          value: workspace-creds
        - name: INTEGRATION_MASTER_ACCESS_KEY
          value: ""
        - name: INTEGRATION_MASTER_SECRET_KEY
          value: ""
        - name: INTEGRATION_JAEGER_AGENT_HOST
          valueFrom:
            fieldRef:
              fieldPath: status.hostIP
        - name: INTEGRATION_JAEGER_SERVICE_NAME
          value: "integration-service"
        - name: INTEGRATION_JAEGER_SAMPLE_RATE
          value: "0.005"
        - name: OPENSSL_PASSWORD
          value: "01ZRPFuON0PMonO"        
        - name: ELASTICSEARCH_ADDRESS
          value: "https://opensearch-cluster-master.opensecurity.svc.cluster.local:9200"
        - name: ELASTICSEARCH_USERNAME
          value: "admin"
        - name: ELASTICSEARCH_PASSWORD
          value: "myStrongPassword@123!"
        - name: ELASTICSEARCH_INGESTION_ENDPOINT
          value: ""
        - name: ELASTICSEARCH_ISONAKS
          value: "true"
        - name: CURRENT_NAMESPACE
          value: "opensecurity"
        - name: KEDA_ENABLED
          value: "true"
        - name: NATS_URL
          value: "opensecurity-nats.opensecurity.svc.cluster.local:4222"
        - name: SCALED_OBJECT_NATS_URL
          value: "opensecurity-nats-headless.opensecurity.svc.cluster.local:8222"
---
# Source: opensecurity/templates/nginx/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-proxy
  namespace: opensecurity
spec:
  replicas: 1
  selector:
    matchLabels:
      app: nginx-proxy
  template:
    metadata:
      labels:
        app: nginx-proxy
    spec:
      containers:
      - name: nginx
        image: nginx:latest
        resources:
          limits:
            cpu: 500m
            memory: 500Mi
          requests:
            cpu: 500m
            memory: 100Mi
        ports:
        - containerPort: 80
        volumeMounts:
        - name: proxy-pass-nginx-config
          mountPath: /etc/nginx/nginx.conf
          subPath: nginx.conf
      volumes:
      - name: proxy-pass-nginx-config
        configMap:
          name: proxy-pass-nginx-config
---
# Source: opensecurity/templates/scheduler/scheduler-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: scheduler
  namespace: opensecurity
  labels:
    app: scheduler
spec:
  minReadySeconds: 10
  replicas: 1
  selector:
    matchLabels:
      app: scheduler
  template:
    metadata:
      labels:
        app: scheduler
    spec:
      serviceAccountName: scheduler
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 1
              preference:
                matchExpressions:
                  - key: opencomply-node
                    operator: In
                    values:
                      - app
      containers:
      - name: scheduler
        image: "ghcr.io/opengovern/scheduler-service:v2.76.13"
        command: ["/scheduler-service"]
        resources:
         limits:
           cpu: 500m
           memory: 2Gi
         requests:
           cpu: 100m
           memory: 1Gi
        args:
        - --id=$(SCHEDULER_ID)
        imagePullPolicy: Always
        env:
        - name: NATS_URL
          value: "opensecurity-nats.opensecurity.svc.cluster.local:4222"
        - name: HTTP_ADDRESS
          value: "0.0.0.0:5251"
        - name: GRPC_ADDRESS
          value: "0.0.0.0:5252"
        - name: POSTGRESQL_HOST
          value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
        - name: POSTGRESQL_PORT
          value: "5432"
        - name: POSTGRESQL_DB
          value: "describe"
        - name: POSTGRESQL_USERNAME
          value: "describe_scheduler"
        - name: POSTGRESQL_PASSWORD
          valueFrom:
            secretKeyRef:
              name: postgres-secret
              key: schedulerUserPassword
        - name: POSTGRESQL_SSLMODE
          value: "disable"
        - name: SCHEDULER_ID
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: WORKSPACE_NAME
          value: "main"
        - name: DESCRIBE_INTERVAL_HOURS
          value: "12"
        - name: FULL_DISCOVERY_INTERVAL_HOURS
          value: "48"
        - name: COST_DISCOVERY_INTERVAL_HOURS
          value: "24"
        - name: DESCRIBE_TIMEOUT_HOURS
          value: "12"
        - name: COMPLIANCE_INTERVAL_HOURS
          value: "24"
        - name: QUERY_VALIDATOR_ENABLED
          value: "false"
        - name: SERVERLESS_PROVIDER
          value: "local"
        - name: COMPLIANCEINTERVALHOURS
          value: "48"
        - name: COMPLIANCE_TIMEOUT_HOURS
          value: "1"
        - name: INSIGHT_INTERVAL_HOURS
          value: "12"
        - name: CHECKUP_INTERVAL_HOURS
          value: "2"
        - name: MUST_SUMMARIZE_INTERVAL_HOURS
          value: "4"
        - name: CORE_BASE_URL
          value: "http://core-service.opensecurity.svc.cluster.local:6251"
        - name: COMPLIANCE_BASE_URL
          value: "http://compliance-service.opensecurity.svc.cluster.local:7251"
        - name: INTEGRATION_BASE_URL
          value: "http://integration-service.opensecurity.svc.cluster.local:8000"
        - name: ESSINK_BASEURL
          value: "http://es-sink-service.opensecurity.svc.cluster.local:8000"
        - name: AUTH_GRPC_URI
          value: "auth-service.opensecurity.svc.cluster.local:50051"        
        - name: ELASTICSEARCH_ADDRESS
          value: "https://opensearch-cluster-master.opensecurity.svc.cluster.local:9200"
        - name: ELASTICSEARCH_USERNAME
          value: "admin"
        - name: ELASTICSEARCH_PASSWORD
          value: "myStrongPassword@123!"
        - name: ELASTICSEARCH_INGESTION_ENDPOINT
          value: ""
        - name: ELASTICSEARCH_ISONAKS
          value: "true"
        - name: DESCRIBE_JOB_ENDPOINT_LOCAL
          value: "scheduler.opensecurity.svc.cluster.local:5252"
        - name: DESCRIBE_DELIVER_ENDPOINT_LOCAL
          value: "es-sink-service.opensecurity.svc.cluster.local:5252"



        - name: KMS_ACCOUNT_REGION
          value: "us-east-2"
          
        - name: VAULT_PROVIDER
          value: "hashicorp-vault"
        - name: VAULT_HASHICORP_ADDRESS
          value: "http://opensecurity-vault-internal.opensecurity.svc.cluster.local:8200"
        - name: VAULT_KEY_ID
          value: workspace-creds

        - name: DO_DELETE_OLD_RESOURCES
          value: "true"
        - name: DO_PROCESS_RECEIVED_MSGS
          value: "true"
        - name: OPERATION_MODE_CONFIG
          value: "scheduler"
        - name: JAEGER_SERVICE_NAME
          value: "scheduler"
        - name: JAEGER_AGENT_HOST
          valueFrom:
            fieldRef:
              fieldPath: status.hostIP
        - name: JAEGER_SAMPLE_RATE
          value: "0.005"
        - name: COMPLIANCE_ENABLED
          value: "true"
---
# Source: opensecurity/templates/task-service/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: task-service
  namespace: opensecurity
  labels:
    app: task-service
spec:
  minReadySeconds: 10
  replicas: 1
  selector:
    matchLabels:
      app: task-service
  template:
    metadata:
      labels:
        app: task-service
    spec:
      serviceAccountName: task
      containers:
      - name: task-service
        image: "ghcr.io/opengovern/task-service:v2.76.13"
        command: ["/task-service"]
        imagePullPolicy: Always
        env:
        - name: TASKS_POSTGRES__HOST
          value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
        - name: TASKS_POSTGRES__PORT
          value: "5432"
        - name: TASKS_POSTGRES__DB
          value: "task"
        - name: TASKS_POSTGRES__USERNAME
          value: "postgres"
        - name: TASKS_POSTGRES__PASSWORD
          valueFrom:
            secretKeyRef:
              name: postgres-secret
              key: postgres-password
        - name: TASKS_POSTGRES__SSLMODE
          value: "disable"
        - name: TASKS_HTTP__ADDRESS
          value: "0.0.0.0:8001"
        - name: TASKS_CORE__BASE_URL
          value: "http://core-service.opensecurity.svc.cluster.local:6251"
        - name: TASKS_VAULT__PROVIDER
          value: "hashicorp-vault"
        - name: TASKS_VAULT__HASHICORP__ADDRESS
          value: "http://opensecurity-vault-internal.opensecurity.svc.cluster.local:8200"
        - name: TASKS_VAULT__KEY_ID
          value: workspace-creds        
        - name: ELASTICSEARCH_ADDRESS
          value: "https://opensearch-cluster-master.opensecurity.svc.cluster.local:9200"
        - name: ELASTICSEARCH_USERNAME
          value: "admin"
        - name: ELASTICSEARCH_PASSWORD
          value: "myStrongPassword@123!"
        - name: ELASTICSEARCH_INGESTION_ENDPOINT
          value: ""
        - name: ELASTICSEARCH_ISONAKS
          value: "true"

        - name: TASKS_ESSINK_ENDPOINT
          value: "es-sink-service.opensecurity.svc.cluster.local:5252"

        - name: CURRENT_NAMESPACE
          value: "opensecurity"
        - name: KEDA_ENABLED
          value: "true"
        - name: TASKS_NATS__URL
          value: "opensecurity-nats.opensecurity.svc.cluster.local:4222"
        - name: SCALED_OBJECT_NATS_URL
          value: "opensecurity-nats-headless.opensecurity.svc.cluster.local:8222"
        - name: CORE_BASEURL
          value: "http://core-service.opensecurity.svc.cluster.local:6251"
        - name: NATS_URL
          value: "opensecurity-nats.opensecurity.svc.cluster.local:4222"
---
# Source: opensecurity/templates/web-ui-service/web-ui-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: web-ui
  namespace: opensecurity
  labels:
    app: web-ui
spec:
  replicas: 1
  selector:
    matchLabels:
      app: web-ui
  template:
    metadata:
      labels:
        app: web-ui
    spec:
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 1
              preference:
                matchExpressions:
                  - key: opencomply-node
                    operator: In
                    values:
                      - app
      containers:
      - name: web-ui
        image: "ghcr.io/opengovern/web-ui:v2.74.26"
        imagePullPolicy: Always
        resources:
          limits:
            cpu: 100m
            memory: 300Mi
          requests:
            cpu: 50m
            memory: 100Mi
        ports:
          - containerPort: 7298
        env:
          - name: REACT_APP_SHOW_COMPLIANCE
            value: "true"

        volumeMounts:
          - mountPath: /build/env-config.js
            name: web-ui-env
            subPath: env-config.js
            
      volumes:
        - name: web-ui-env
          configMap:
            name: web-ui-env
            items:
              - key: env-config.js
                path: env-config.js
---
# Source: opensecurity/charts/nats/templates/stateful-set.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  annotations:
    karpenter.sh/do-not-disrupt: "true"
  labels:
    app: job-queue
    app.kubernetes.io/component: nats
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: nats
    app.kubernetes.io/version: 2.10.18
    helm.sh/chart: nats-1.2.2
  name: opensecurity-nats
spec:
  podManagementPolicy: Parallel
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/component: nats
      app.kubernetes.io/instance: opensecurity
      app.kubernetes.io/name: nats
  serviceName: opensecurity-nats-headless
  template:
    metadata:
      annotations:
        checksum/config: a7cdd3d8428c0badaf48e206877c0908f800ce9c3a66c26908230f11c58edd74
      labels:
        app: job-queue
        app.kubernetes.io/component: nats
        app.kubernetes.io/instance: opensecurity
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: nats
        app.kubernetes.io/version: 2.10.18
        helm.sh/chart: nats-1.2.2
    spec:
      containers:
      - args:
        - --config
        - /etc/nats-config/nats.conf
        env:
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: SERVER_NAME
          value: $(POD_NAME)
        image: nats:2.10.18-alpine
        lifecycle:
          preStop:
            exec:
              command:
              - nats-server
              - -sl=ldm=/var/run/nats/nats.pid
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /healthz?js-enabled-only=true
            port: monitor
          initialDelaySeconds: 10
          periodSeconds: 30
          successThreshold: 1
          timeoutSeconds: 5
        name: nats
        ports:
        - containerPort: 4222
          name: nats
        - containerPort: 8222
          name: monitor
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /healthz?js-server-only=true
            port: monitor
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 2500m
            memory: 6Gi
          requests:
            cpu: 200m
            memory: 3Gi
        startupProbe:
          failureThreshold: 90
          httpGet:
            path: /healthz
            port: monitor
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 5
        volumeMounts:
        - mountPath: /etc/nats-config
          name: config
        - mountPath: /var/run/nats
          name: pid
        - mountPath: /data
          name: opensecurity-nats-js
      - args:
        - -pid
        - /var/run/nats/nats.pid
        - -config
        - /etc/nats-config/nats.conf
        image: natsio/nats-server-config-reloader:0.15.0
        name: reloader
        volumeMounts:
        - mountPath: /var/run/nats
          name: pid
        - mountPath: /etc/nats-config
          name: config
      - args:
        - -port=7777
        - -connz
        - -routez
        - -subz
        - -varz
        - -prefix=nats
        - -use_internal_server_id
        - -jsz=all
        - http://localhost:8222/
        image: natsio/prometheus-nats-exporter:0.15.0
        name: prom-exporter
        ports:
        - containerPort: 7777
          name: prom-metrics
      enableServiceLinks: false
      shareProcessNamespace: true
      volumes:
      - configMap:
          name: opensecurity-nats-config
        name: config
      - emptyDir: {}
        name: pid
  volumeClaimTemplates:
  - metadata:
      name: opensecurity-nats-js
    spec:
      accessModes:
      - ReadWriteOnce
      resources:
        requests:
          storage: 25Gi
---
# Source: opensecurity/charts/opensearch/templates/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: opensearch-cluster-master
  labels:
    helm.sh/chart: opensearch-2.22.0
    app.kubernetes.io/name: opensearch
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/version: "2.16.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: opensearch-cluster-master
  annotations:
    majorVersion: "2"
spec:
  serviceName: opensearch-cluster-master-headless
  selector:
    matchLabels:
      app.kubernetes.io/name: opensearch
      app.kubernetes.io/instance: opensecurity
  replicas: 1
  podManagementPolicy: Parallel
  updateStrategy:
    type: RollingUpdate
  volumeClaimTemplates:
  - metadata:
      name: opensearch-cluster-master
    spec:
      accessModes:
      - "ReadWriteOnce"
      resources:
        requests:
          storage: "25Gi"
  template:
    metadata:
      name: "opensearch-cluster-master"
      labels:
        helm.sh/chart: opensearch-2.22.0
        app.kubernetes.io/name: opensearch
        app.kubernetes.io/instance: opensecurity
        app.kubernetes.io/version: "2.16.0"
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/component: opensearch-cluster-master
      annotations:
        configchecksum: 3634b923e0a8c3d336096b06ce8799c1dbee3ab6e34ecb330eb376d0a9675f1
    spec:
      securityContext:
        fsGroup: 1000
        runAsUser: 1000
      automountServiceAccountToken: false
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 1
            podAffinityTerm:
              topologyKey: kubernetes.io/hostname
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/instance
                  operator: In
                  values:
                  - opensecurity
                - key: app.kubernetes.io/name
                  operator: In
                  values:
                  - opensearch
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - preference:
              matchExpressions:
              - key: opencomply-node
                operator: In
                values:
                - opensearch
            weight: 1
      terminationGracePeriodSeconds: 120
      volumes:
      - name: config
        configMap:
          name: opensearch-cluster-master-config
      - emptyDir: {}
        name: config-emptydir
      enableServiceLinks: true
      initContainers:
      - name: fsgroup-volume
        image: "busybox:latest"
        imagePullPolicy: "IfNotPresent"
        command: ['sh', '-c']
        args:
          - 'chown -R 1000:1000 /usr/share/opensearch/data'
        securityContext:
          runAsUser: 0
        resources:
          {}
        volumeMounts:
          - name: "opensearch-cluster-master"
            mountPath: /usr/share/opensearch/data
      - name: sysctl
        image: "busybox:latest"
        imagePullPolicy: "IfNotPresent"
        command:
        - sh
        - -c
        - |
          set -xe
          DESIRED="262144"
          CURRENT=$(sysctl -n vm.max_map_count)
          if [ "$DESIRED" -gt "$CURRENT" ]; then
            sysctl -w vm.max_map_count=$DESIRED
          fi
        securityContext:
          runAsUser: 0
          privileged: true
        resources:
          {}
      - name: configfile
        image: "opensearchproject/opensearch:2.16.0"
        imagePullPolicy: "IfNotPresent"
        command:
        - sh
        - -c
        - |
          #!/usr/bin/env bash
          cp -r /tmp/configfolder/*  /tmp/config/
        resources:
          {}
        volumeMounts:
          - mountPath: /tmp/config/
            name: config-emptydir
          - name: config
            mountPath: /tmp/configfolder/opensearch.yml
            subPath: opensearch.yml
      containers:
      - name: "opensearch"
        securityContext:
          capabilities:
            drop:
            - ALL
          runAsNonRoot: true
          runAsUser: 1000

        image: "opensearchproject/opensearch:2.16.0"
        imagePullPolicy: "IfNotPresent"
        readinessProbe:
          failureThreshold: 3
          periodSeconds: 5
          tcpSocket:
            port: 9200
          timeoutSeconds: 3
        startupProbe:
          failureThreshold: 30
          initialDelaySeconds: 5
          periodSeconds: 10
          tcpSocket:
            port: 9200
          timeoutSeconds: 3
        ports:
        - name: http
          containerPort: 9200
        - name: transport
          containerPort: 9300
        - name: metrics
          containerPort: 9600
        resources:
          limits:
            cpu: 500m
            memory: 7000Mi
          requests:
            cpu: 500m
            memory: 4000Mi
        env:
        - name: node.name
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: cluster.initial_master_nodes
          value: "opensearch-cluster-master-0,"
        - name: discovery.seed_hosts
          value: "opensearch-cluster-master-headless"
        - name: cluster.name
          value: "opensearch-cluster"
        - name: network.host
          value: "0.0.0.0"
        - name: OPENSEARCH_JAVA_OPTS
          value: "-Xms3072M -Xmx3072M -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/usr/share/opensearch/heap-dump.hprof"
        - name: node.roles
          value: "master,ingest,data,remote_cluster_client,"
        - name: OPENSEARCH_INITIAL_ADMIN_PASSWORD
          value: myStrongPassword@123!
        - name: AWS_REGION
          value: us-east-2
        volumeMounts:
        - name: "opensearch-cluster-master"
          mountPath: /usr/share/opensearch/data
        - name: config-emptydir
          mountPath: /usr/share/opensearch/config/opensearch.yml
          subPath: opensearch.yml
---
# Source: opensecurity/charts/postgresql/templates/primary/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: opensecurity-postgresql-primary
  namespace: "opensecurity"
  labels:
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: 16.4.0
    helm.sh/chart: postgresql-15.5.21
    app.kubernetes.io/component: primary
spec:
  replicas: 1
  serviceName: opensecurity-postgresql-primary-hl
  updateStrategy:
    rollingUpdate: {}
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/instance: opensecurity
      app.kubernetes.io/name: postgresql
      app.kubernetes.io/component: primary
  template:
    metadata:
      name: opensecurity-postgresql-primary
      labels:
        app.kubernetes.io/instance: opensecurity
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: postgresql
        app.kubernetes.io/version: 16.4.0
        helm.sh/chart: postgresql-15.5.21
        app.kubernetes.io/component: primary
      annotations:
        checksum/configuration: 2048ab32b4cc456cc62eeed1bdc72167e532b1b76692b6c1802f4f3c3afa14b3
    spec:
      serviceAccountName: opensecurity-postgresql
      
      automountServiceAccountToken: false
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/instance: opensecurity
                    app.kubernetes.io/name: postgresql
                    app.kubernetes.io/component: primary
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      securityContext:
        fsGroup: 1001
        fsGroupChangePolicy: Always
        supplementalGroups: []
        sysctls: []
      hostNetwork: false
      hostIPC: false
      containers:
        - name: postgresql
          image: ghcr.io/opengovern/postgres:v2.76.0
          imagePullPolicy: "Always"
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            readOnlyRootFilesystem: true
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seLinuxOptions: {}
            seccompProfile:
              type: RuntimeDefault
          env:
            - name: BITNAMI_DEBUG
              value: "false"
            - name: POSTGRESQL_PORT_NUMBER
              value: "5432"
            - name: POSTGRESQL_VOLUME_DIR
              value: "/bitnami/postgresql"
            - name: PGDATA
              value: "/bitnami/postgresql/data"
            # Authentication
            - name: POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: postgres-secret
                  key: postgres-password
            # Replication
            - name: POSTGRES_REPLICATION_MODE
              value: "master"
            - name: POSTGRES_REPLICATION_USER
              value: "repl_user"
            - name: POSTGRES_REPLICATION_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: postgres-secret
                  key: replication-password
            - name: POSTGRES_CLUSTER_APP_NAME
              value: my_application
            - name: POSTGRES_INITSCRIPTS_USERNAME
              value: postgres
            # LDAP
            - name: POSTGRESQL_ENABLE_LDAP
              value: "no"
            # TLS
            - name: POSTGRESQL_ENABLE_TLS
              value: "no"
            # Audit
            - name: POSTGRESQL_LOG_HOSTNAME
              value: "false"
            - name: POSTGRESQL_LOG_CONNECTIONS
              value: "false"
            - name: POSTGRESQL_LOG_DISCONNECTIONS
              value: "false"
            - name: POSTGRESQL_PGAUDIT_LOG_CATALOG
              value: "off"
            # Others
            - name: POSTGRESQL_CLIENT_MIN_MESSAGES
              value: "error"
            - name: POSTGRESQL_SHARED_PRELOAD_LIBRARIES
              value: "pgaudit"
            - name: POSTGRES_WORKSPACE_DB_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: workspaceServiceUserPassword
                  name: postgres-secret
            - name: POSTGRES_AUTH_DB_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: authServiceUserPassword
                  name: postgres-secret
            - name: POSTGRES_SUBSCRIPTION_DB_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: subscriptionUserPassword
                  name: postgres-secret
            - name: POSTGRES_INFORMATION_DB_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: informationUserPassword
                  name: postgres-secret
            - name: DEX_DB_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: dexServiceUserPassword
                  name: postgres-secret
            - name: POSTGRES_DESCRIBE_DB_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: schedulerUserPassword
                  name: postgres-secret
            - name: POSTGRES_POLICY_DB_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: policyServiceUserPassword
                  name: postgres-secret
            - name: POSTGRES_ASSISTANT_DB_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: assistantServiceUserPassword
                  name: postgres-secret
            - name: POSTGRES_COMPLIANCE_DB_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: complianceServiceUserPassword
                  name: postgres-secret
            - name: POSTGRES_CORE_DB_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: coreServiceUserPassword
                  name: postgres-secret
            - name: POSTGRES_REPORTER_DB_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: reporterServiceUserPassword
                  name: postgres-secret
            - name: POSTGRES_MIGRATOR_DB_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: migratorServiceUserPassword
                  name: postgres-secret
            - name: POSTGRES_EXPORTER_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: postgresExporterUserPassword
                  name: postgres-secret
            - name: POSTGRES_STEAMPIPE_USER_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: steampipeUserPassword
                  name: postgres-secret
            - name: POSTGRES_ALERTING_DB_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: alertingServiceUserPassword
                  name: postgres-secret
            - name: POSTGRES_INTEGRATION_DB_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: integrationServiceUserPassword
                  name: postgres-secret
            - name: POSTGRES_TASK_DB_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: taskServiceUserPassword
                  name: postgres-secret
          ports:
            - name: tcp-postgresql
              containerPort: 5432
          livenessProbe:
            failureThreshold: 6
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - exec pg_isready -U "postgres" -h 127.0.0.1 -p 5432
          readinessProbe:
            failureThreshold: 6
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - -e
                - |
                  exec pg_isready -U "postgres" -h 127.0.0.1 -p 5432
          resources:
            limits:
              cpu: "4"
              memory: 8Gi
            requests:
              cpu: "2"
              memory: 2Gi
          volumeMounts:
            - name: empty-dir
              mountPath: /tmp
              subPath: tmp-dir
            - name: empty-dir
              mountPath: /opt/bitnami/postgresql/conf
              subPath: app-conf-dir
            - name: empty-dir
              mountPath: /opt/bitnami/postgresql/tmp
              subPath: app-tmp-dir
            - name: custom-init-scripts
              mountPath: /docker-entrypoint-initdb.d/
            - name: dshm
              mountPath: /dev/shm
            - name: data
              mountPath: /bitnami/postgresql
            - name: postgresql-config
              mountPath: /bitnami/postgresql/conf
      volumes:
        - name: empty-dir
          emptyDir: {}
        - name: postgresql-config
          configMap:
            name: opensecurity-postgresql-primary-configuration
        - name: custom-init-scripts
          configMap:
            name: opensecurity-postgresql-primary-init-scripts
        - name: dshm
          emptyDir:
            medium: Memory
  volumeClaimTemplates:
    - apiVersion: v1
      kind: PersistentVolumeClaim
      metadata:
        name: data
      spec:
        accessModes:
          - "ReadWriteOnce"
        resources:
          requests:
            storage: "10Gi"
---
# Source: opensecurity/charts/postgresql/templates/read/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: opensecurity-postgresql-read
  namespace: "opensecurity"
  labels:
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: 16.4.0
    helm.sh/chart: postgresql-15.5.21
    app.kubernetes.io/component: read
spec:
  replicas: 0
  serviceName: opensecurity-postgresql-read-hl
  updateStrategy:
    rollingUpdate: {}
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/instance: opensecurity
      app.kubernetes.io/name: postgresql
      app.kubernetes.io/component: read
  template:
    metadata:
      name: opensecurity-postgresql-read
      labels:
        app.kubernetes.io/instance: opensecurity
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: postgresql
        app.kubernetes.io/version: 16.4.0
        helm.sh/chart: postgresql-15.5.21
        app.kubernetes.io/component: read
    spec:
      serviceAccountName: opensecurity-postgresql
      
      automountServiceAccountToken: false
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/instance: opensecurity
                    app.kubernetes.io/name: postgresql
                    app.kubernetes.io/component: read
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      securityContext:
        fsGroup: 1001
        fsGroupChangePolicy: Always
        supplementalGroups: []
        sysctls: []
      hostNetwork: false
      hostIPC: false
      containers:
        - name: postgresql
          image: ghcr.io/opengovern/postgres:v2.76.0
          imagePullPolicy: "Always"
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            readOnlyRootFilesystem: true
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seLinuxOptions: {}
            seccompProfile:
              type: RuntimeDefault
          env:
            - name: BITNAMI_DEBUG
              value: "false"
            - name: POSTGRESQL_PORT_NUMBER
              value: "5432"
            - name: POSTGRESQL_VOLUME_DIR
              value: "/bitnami/postgresql"
            - name: PGDATA
              value: "/bitnami/postgresql/data"
            # Authentication
            - name: POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: postgres-secret
                  key: postgres-password
            # Replication
            - name: POSTGRES_REPLICATION_MODE
              value: "slave"
            - name: POSTGRES_REPLICATION_USER
              value: "repl_user"
            - name: POSTGRES_REPLICATION_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: postgres-secret
                  key: replication-password
            - name: POSTGRES_CLUSTER_APP_NAME
              value: my_application
            - name: POSTGRES_MASTER_HOST
              value: opensecurity-postgresql-primary
            - name: POSTGRES_MASTER_PORT_NUMBER
              value: "5432"
            # TLS
            - name: POSTGRESQL_ENABLE_TLS
              value: "no"
            # Audit
            - name: POSTGRESQL_LOG_HOSTNAME
              value: "false"
            - name: POSTGRESQL_LOG_CONNECTIONS
              value: "false"
            - name: POSTGRESQL_LOG_DISCONNECTIONS
              value: "false"
            - name: POSTGRESQL_PGAUDIT_LOG_CATALOG
              value: "off"
            # Others
            - name: POSTGRESQL_CLIENT_MIN_MESSAGES
              value: "error"
            - name: POSTGRESQL_SHARED_PRELOAD_LIBRARIES
              value: "pgaudit"
          ports:
            - name: tcp-postgresql
              containerPort: 5432
          livenessProbe:
            failureThreshold: 6
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - exec pg_isready -U "postgres" -h 127.0.0.1 -p 5432
          readinessProbe:
            failureThreshold: 6
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - -e
                - |
                  exec pg_isready -U "postgres" -h 127.0.0.1 -p 5432
          resources:
            limits:
              cpu: 150m
              ephemeral-storage: 2Gi
              memory: 192Mi
            requests:
              cpu: 100m
              ephemeral-storage: 50Mi
              memory: 128Mi
          volumeMounts:
            - name: empty-dir
              mountPath: /tmp
              subPath: tmp-dir
            - name: empty-dir
              mountPath: /opt/bitnami/postgresql/conf
              subPath: app-conf-dir
            - name: empty-dir
              mountPath: /opt/bitnami/postgresql/tmp
              subPath: app-tmp-dir
            - name: dshm
              mountPath: /dev/shm
            - name: data
              mountPath: /bitnami/postgresql
      volumes:
        - name: dshm
          emptyDir:
            medium: Memory
        - name: empty-dir
          emptyDir: {}
  volumeClaimTemplates:
    - apiVersion: v1
      kind: PersistentVolumeClaim
      metadata:
        name: data
      spec:
        accessModes:
          - "ReadWriteOnce"
        resources:
          requests:
            storage: "8Gi"
---
# Source: opensecurity/charts/vault/templates/server-statefulset.yaml
# StatefulSet to run the actual vault server cluster.
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: opensecurity-vault
  namespace: opensecurity
  labels:
    app.kubernetes.io/name: vault
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
spec:
  serviceName: opensecurity-vault-internal
  podManagementPolicy: Parallel
  replicas: 1
  updateStrategy:
    type: OnDelete
  selector:
    matchLabels:
      app.kubernetes.io/name: vault
      app.kubernetes.io/instance: opensecurity
      component: server
  template:
    metadata:
      labels:
        helm.sh/chart: vault-0.28.1
        app.kubernetes.io/name: vault
        app.kubernetes.io/instance: opensecurity
        component: server
      annotations:
    spec:
      
      affinity:
        podAntiAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchLabels:
                  app.kubernetes.io/name: vault
                  app.kubernetes.io/instance: "opensecurity"
                  component: server
              topologyKey: kubernetes.io/hostname
  
      
      
      
      terminationGracePeriodSeconds: 10
      serviceAccountName: opensecurity-vault
      
      securityContext:
        runAsNonRoot: true
        runAsGroup: 1000
        runAsUser: 100
        fsGroup: 1000
      hostNetwork: false
      volumes:
        
        - name: config
          configMap:
            name: opensecurity-vault-config
  
        - name: home
          emptyDir: {}
      containers:
        - name: vault
          
          image: hashicorp/vault:1.17.2
          imagePullPolicy: IfNotPresent
          command:
          - "/bin/sh"
          - "-ec"
          args: 
          - |
            cp /vault/config/extraconfig-from-values.hcl /tmp/storageconfig.hcl;
            [ -n "${HOST_IP}" ] && sed -Ei "s|HOST_IP|${HOST_IP?}|g" /tmp/storageconfig.hcl;
            [ -n "${POD_IP}" ] && sed -Ei "s|POD_IP|${POD_IP?}|g" /tmp/storageconfig.hcl;
            [ -n "${HOSTNAME}" ] && sed -Ei "s|HOSTNAME|${HOSTNAME?}|g" /tmp/storageconfig.hcl;
            [ -n "${API_ADDR}" ] && sed -Ei "s|API_ADDR|${API_ADDR?}|g" /tmp/storageconfig.hcl;
            [ -n "${TRANSIT_ADDR}" ] && sed -Ei "s|TRANSIT_ADDR|${TRANSIT_ADDR?}|g" /tmp/storageconfig.hcl;
            [ -n "${RAFT_ADDR}" ] && sed -Ei "s|RAFT_ADDR|${RAFT_ADDR?}|g" /tmp/storageconfig.hcl;
            /usr/local/bin/docker-entrypoint.sh vault server -config=/tmp/storageconfig.hcl 
   
          securityContext:
            allowPrivilegeEscalation: false
          env:
            - name: HOST_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: POD_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.podIP
            - name: VAULT_K8S_POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: VAULT_K8S_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
            - name: VAULT_ADDR
              value: "http://127.0.0.1:8200"
            - name: VAULT_API_ADDR
              value: "http://$(POD_IP):8200"
            - name: SKIP_CHOWN
              value: "true"
            - name: SKIP_SETCAP
              value: "true"
            - name: HOSTNAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: VAULT_CLUSTER_ADDR
              value: "https://$(HOSTNAME).opensecurity-vault-internal:8201"
            - name: HOME
              value: "/home/vault"
            
            
            
          volumeMounts:
          
  
    
            - name: data
              mountPath: /vault/data
    
  
  
            - name: config
              mountPath: /vault/config
  
            - name: home
              mountPath: /home/vault
          ports:
            - containerPort: 8200
              name: http
            - containerPort: 8201
              name: https-internal
            - containerPort: 8202
              name: http-rep
          readinessProbe:
            # Check status; unsealed vault servers return 0
            # The exit code reflects the seal status:
            #   0 - unsealed
            #   1 - error
            #   2 - sealed
            exec:
              command: ["/bin/sh", "-ec", "vault status -tls-skip-verify"]
            failureThreshold: 2
            initialDelaySeconds: 5
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 3
          lifecycle:
            # Vault container doesn't receive SIGTERM from Kubernetes
            # and after the grace period ends, Kube sends SIGKILL.  This
            # causes issues with graceful shutdowns such as deregistering itself
            # from Consul (zombie services).
            preStop:
              exec:
                command: [
                  "/bin/sh", "-c",
                  # Adding a sleep here to give the pod eviction a
                  # chance to propagate, so requests will not be made
                  # to this pod while it's terminating
                  "sleep 5 && kill -SIGTERM $(pidof vault)",
                ]
      
  
  volumeClaimTemplates:
    - metadata:
        name: data
      
      
      spec:
        accessModes:
          - ReadWriteOnce
        resources:
          requests:
            storage: 10Gi
---
# Source: opensecurity/templates/demo-import/job.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: import-es-demo-data
  namespace: opensecurity
  annotations:
    "app.kubernetes.io/managed-by": "Helm"
    "meta.helm.sh/release-name": opensecurity
    "meta.helm.sh/release-namespace": opensecurity
    helm.sh/resource-policy: keep
spec:
  suspend: true
  template:
    spec:
      containers:
        - name: import-es-demo-data
          image: "ghcr.io/opengovern/demo-importer-job:v2.76.13"
          command: ["/demo-importer-job"]
          env:            
            - name: ELASTICSEARCH_ADDRESS
              value: "https://opensearch-cluster-master.opensecurity.svc.cluster.local:9200"
            - name: ELASTICSEARCH_USERNAME
              value: "admin"
            - name: ELASTICSEARCH_PASSWORD
              value: "myStrongPassword@123!"
            - name: ELASTICSEARCH_INGESTION_ENDPOINT
              value: ""
            - name: ELASTICSEARCH_ISONAKS
              value: "true"
            - name: POSTGRESQL_USERNAME
              value: "postgres"
            - name: POSTGRESQL_PASSWORD
              value: ""
            - name: POSTGRESQL_HOST
              value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
            - name: POSTGRESQL_PORT
              value: "5432"
            - name: DEMO_DATA_S3_URL
              value: "https://demo-data.opencomply.io/v2/demo_data.tar.gz.enc"
            - name: OPENSSL_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: import-demo-data-secret
                  key: openSslPassword
      restartPolicy: Never
  backoffLimit: 4
---
# Source: opensecurity/templates/demo-import/job.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: import-psql-demo-data
  namespace: opensecurity
  annotations:
    "app.kubernetes.io/managed-by": "Helm"
    "meta.helm.sh/release-name": opensecurity
    "meta.helm.sh/release-namespace": opensecurity
    helm.sh/resource-policy: keep
spec:
  suspend: true
  template:
    spec:
      containers:
        - name: import-psql-demo-data
          image: "ghcr.io/opengovern/import-data-script:v2.60.0"
          command: ["/bin/bash", "-c", "/usr/local/bin/import_psql_data.sh"]
          env:            
            - name: ELASTICSEARCH_ADDRESS
              value: "https://opensearch-cluster-master.opensecurity.svc.cluster.local:9200"
            - name: ELASTICSEARCH_USERNAME
              value: "admin"
            - name: ELASTICSEARCH_PASSWORD
              value: "myStrongPassword@123!"
            - name: ELASTICSEARCH_INGESTION_ENDPOINT
              value: ""
            - name: ELASTICSEARCH_ISONAKS
              value: "true"
            - name: POSTGRESQL_USERNAME
              value: "postgres"
            - name: POSTGRESQL_PASSWORD
              value: ""
            - name: POSTGRESQL_HOST
              value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
            - name: POSTGRESQL_PORT
              value: "5432"
            - name: DEMO_DATA_GIT_URL
              value: "https://github.com/kaytu-io/demo-data"
            - name: DEMO_DATA_S3_URL
              value: "https://demo-data.opencomply.io/v2/demo_data.tar.gz.enc"
            - name: OPENSSL_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: import-demo-data-secret
                  key: openSslPassword
      restartPolicy: Never
  backoffLimit: 4
---
# Source: opensecurity/charts/keda/templates/metrics-server/apiservice.yaml
apiVersion: apiregistration.k8s.io/v1
kind: APIService
metadata:
  labels:
    app.kubernetes.io/name: v1beta1.external.metrics.k8s.io    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  name: v1beta1.external.metrics.k8s.io
spec:
  service:
    name: keda-operator-metrics-apiserver
    namespace: opensecurity
    port: 443
  group: external.metrics.k8s.io
  version: v1beta1
  groupPriorityMinimum: 100
  versionPriority: 100
---
# Source: opensecurity/charts/vault/templates/injector-mutating-webhook.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: opensecurity-vault-agent-injector-cfg
  labels:
    app.kubernetes.io/name: vault-agent-injector
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/managed-by: Helm
webhooks:
  - name: vault.hashicorp.com
    failurePolicy: Ignore
    matchPolicy: Exact
    sideEffects: None
    timeoutSeconds: 30
    admissionReviewVersions: ["v1", "v1beta1"]
    clientConfig:
      service:
        name: opensecurity-vault-agent-injector-svc
        namespace: opensecurity
        path: "/mutate"
      caBundle: ""
    rules:
      - operations: ["CREATE"]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
        scope: "Namespaced"
    objectSelector:
      matchExpressions:
      - key: app.kubernetes.io/name
        operator: NotIn
        values:
        - vault-agent-injector
---
# Source: opensecurity/charts/keda/templates/webhooks/validatingconfiguration.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  labels:
    app.kubernetes.io/name: keda-admission-webhooks    
    helm.sh/chart: keda-2.15.1
    app.kubernetes.io/component: operator
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/part-of: keda-operator
    app.kubernetes.io/version: 2.15.1
    app.kubernetes.io/instance: opensecurity
  name: keda-admission
webhooks:
- admissionReviewVersions:
  - v1
  clientConfig:
    service:
      name: keda-admission-webhooks
      namespace: opensecurity
      path: /validate-keda-sh-v1alpha1-scaledobject
  failurePolicy: Ignore
  matchPolicy: Equivalent
  name: vscaledobject.kb.io
  namespaceSelector: {}
  objectSelector: {}
  rules:
  - apiGroups:
    - keda.sh
    apiVersions:
    - v1alpha1
    operations:
    - CREATE
    - UPDATE
    resources:
    - scaledobjects
  sideEffects: None
  timeoutSeconds: 10
- admissionReviewVersions:
  - v1
  clientConfig:
    service:
      name: keda-admission-webhooks
      namespace: opensecurity
      path: /validate-keda-sh-v1alpha1-triggerauthentication
  failurePolicy: Ignore
  matchPolicy: Equivalent
  name: vstriggerauthentication.kb.io
  namespaceSelector: {}
  objectSelector: {}
  rules:
  - apiGroups:
    - keda.sh
    apiVersions:
    - v1alpha1
    operations:
    - CREATE
    - UPDATE
    resources:
    - triggerauthentications
  sideEffects: None
  timeoutSeconds: 10
- admissionReviewVersions:
  - v1
  clientConfig:
    service:
      name: keda-admission-webhooks
      namespace: opensecurity
      path: /validate-keda-sh-v1alpha1-clustertriggerauthentication
  failurePolicy: Ignore
  matchPolicy: Equivalent
  name: vsclustertriggerauthentication.kb.io
  namespaceSelector: {}
  objectSelector: {}
  rules:
  - apiGroups:
    - keda.sh
    apiVersions:
    - v1alpha1
    operations:
    - CREATE
    - UPDATE
    resources:
    - clustertriggerauthentications
  sideEffects: None
  timeoutSeconds: 10
---
# Source: opensecurity/charts/dex/templates/tests/no-config-secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: opensecurity-dex-test-no-create
  labels:
    helm.sh/chart: dex-0.19.1
    app.kubernetes.io/name: dex
    app.kubernetes.io/instance: opensecurity
    app.kubernetes.io/version: "2.41.1"
    app.kubernetes.io/managed-by: Helm
  annotations:
    "helm.sh/hook": test
type: Opaque
data:
  config.yaml: "Y29ubmVjdG9yczogW10KZW5hYmxlUGFzc3dvcmREQjogdHJ1ZQpleHBpcnk6CiAgZGV2aWNlUmVxdWVzdHM6IDVtCiAgaWRUb2tlbnM6IDI0aAogIHJlZnJlc2hUb2tlbnM6CiAgICBhYnNvbHV0ZUxpZmV0aW1lOiAzOTYwaAogICAgcmV1c2VJbnRlcnZhbDogM3MKICAgIHZhbGlkSWZOb3RVc2VkRm9yOiAyMTYwaAogIHNpZ25pbmdLZXlzOiA2aApncnBjOgogIGFkZHI6IGxvY2FsaG9zdDo1NTU3CiAgcmVmbGVjdGlvbjogdHJ1ZQpsb2dnZXI6CiAgZm9ybWF0OiB0ZXh0CiAgbGV2ZWw6IGRlYnVnCm9hdXRoMjoKICBhbHdheXNTaG93TG9naW5TY3JlZW46IGZhbHNlCiAgcGFzc3dvcmRDb25uZWN0b3I6IGxvY2FsCiAgc2tpcEFwcHJvdmFsU2NyZWVuOiB0cnVlCnN0b3JhZ2U6CiAgY29uZmlnOgogICAgZGF0YWJhc2U6IGRleAogICAgaG9zdDogb3BlbnNlY3VyaXR5LXBvc3RncmVzcWwtcHJpbWFyeS5vcGVuc2VjdXJpdHkuc3ZjLmNsdXN0ZXIubG9jYWwKICAgIHBhc3N3b3JkOiBwYXNzd29yZAogICAgcG9ydDogNTQzMgogICAgc3NsOgogICAgICBtb2RlOiBkaXNhYmxlCiAgICB1c2VyOiBkZXhfc2VydmljZQogIHR5cGU6IHBvc3RncmVz"
---
# Source: opensecurity/charts/vault/templates/tests/server-test.yaml
apiVersion: v1
kind: Pod
metadata:
  name: opensecurity-vault-server-test
  namespace: opensecurity
  annotations:
    "helm.sh/hook": test
spec:
  
  containers:
    - name: opensecurity-server-test
      image: hashicorp/vault:1.17.2
      imagePullPolicy: IfNotPresent
      env:
        - name: VAULT_ADDR
          value: http://opensecurity-vault.opensecurity.svc:8200
        
      command:
        - /bin/sh
        - -c
        - |
          echo "Checking for sealed info in 'vault status' output"
          ATTEMPTS=10
          n=0
          until [ "$n" -ge $ATTEMPTS ]
          do
            echo "Attempt" $n...
            vault status -format yaml | grep -E '^sealed: (true|false)' && break
            n=$((n+1))
            sleep 5
          done
          if [ $n -ge $ATTEMPTS ]; then
            echo "timed out looking for sealed info in 'vault status' output"
            exit 1
          fi

          exit 0
      volumeMounts:
  volumes:
  restartPolicy: Never
---
# Source: opensecurity/templates/keda-wait-job/job.yaml
# Job to wait for the CRD to exist
apiVersion: batch/v1
kind: Job
metadata:
  name: wait-for-crd
  namespace: "opensecurity"
  labels:
    app: "opensecurity-wait-for-crd"
  annotations:
    "helm.sh/hook": post-install
    "helm.sh/hook-weight": "0"
spec:
  backoffLimit: 6
  template:
    spec:
      restartPolicy: OnFailure
      serviceAccountName: wait-for-crd-sa
      containers:
        - name: wait-for-crd
          image: bitnami/kubectl:latest
          command:
            - /bin/sh
            - -c
            - |
              echo "Waiting for the ScaledObject CRD to be available..."
              until kubectl get crd scaledobjects.keda.sh; do
                echo "ScaledObject CRD not found, retrying in 10 seconds..."
                sleep 10
              done
              echo "ScaledObject CRD found, proceeding with the deployment."
---
# Source: opensecurity/templates/post-install-configuration/job.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: post-install-configuration
  namespace: opensecurity
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "0"
    # Add hook-delete-policy if you want Helm to clean up successful jobs
    "helm.sh/hook-delete-policy": hook-succeeded
spec:
  template:
    spec:
      serviceAccountName: configuration # Ensure this ServiceAccount exists
      restartPolicy: OnFailure
      containers:
        - name: post-install-configuration
          image: "ghcr.io/opengovern/post-install-job:v2.76.13"
          command: ["/post-install-job"]
          imagePullPolicy: Always
          resources:
            limits:
              cpu: 500m
              memory: 4000Mi
            requests:
              cpu: 500m
              memory: 2000Mi
          env:
            # Assumes 'elastic.envs' helper template is defined in _helpers.tpl            
            - name: ELASTICSEARCH_ADDRESS
              value: "https://opensearch-cluster-master.opensecurity.svc.cluster.local:9200"
            - name: ELASTICSEARCH_USERNAME
              value: "admin"
            - name: ELASTICSEARCH_PASSWORD
              value: "myStrongPassword@123!"
            - name: ELASTICSEARCH_INGESTION_ENDPOINT
              value: ""
            - name: ELASTICSEARCH_ISONAKS
              value: "true"
            # --- PostgreSQL Connection (for Migrator) ---
            - name: POSTGRESQL_HOST
              # Assumes 'postgres.endpoint' helper template exists
              value: "opensecurity-postgresql-primary.opensecurity.svc.cluster.local"
            - name: POSTGRESQL_PORT
              # Assumes 'postgres.port' helper template exists
              value: "5432"
            - name: POSTGRESQL_DB
              value: "migrator" # Job connects to 'migrator' DB
            - name: POSTGRESQL_USERNAME
              value: "migrator_worker" # Job connects as 'migrator_worker'
            - name: POSTGRESQL_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: postgres-secret # Assumes password is in this secret
                  key: migratorServiceUserPassword # Under this key
            - name: POSTGRESQL_SSLMODE
              # Assumes 'postgres.sslMode' helper template exists
              value: "disable"
            # --- Steampipe Connection ---
            - name: STEAMPIPE_HOST
              # Assumes 'cloudql-service' exists
              value: cloudql-service.opensecurity.svc.cluster.local
            - name: STEAMPIPE_PORT
              value: "9193"
            - name: STEAMPIPE_DB
              value: "steampipe"
            - name: STEAMPIPE_USERNAME
              value: "steampipe"
            - name: STEAMPIPE_PASSWORD # TODO: Avoid hardcoding passwords
              value: "abcd"
            - name: STEAMPIPE_SSLMODE
              value: "disable"
            # --- Other Config ---
            - name: HTTP_ADDRESS
              value: "0.0.0.0:6251" # Likely internal port for the job itself
            - name: ANALYTICS_GIT_URL
              value: "https://github.com/opengovern/platform-configuration"
            - name: CORE_BASEURL
              value: "http://core-service.opensecurity.svc.cluster.local:6251"
            - name: INTEGRATION_BASEURL
              value: "http://integration-service.opensecurity.svc.cluster.local:8000"
            - name: GITHUB_TOKEN
              # Reads token from values file - ensure it's set if needed
              value: ""
            - name: PROMETHEUS_PUSH_ADDRESS
              # Assumes prometheus pushgateway exists at this address
              value: "prom-system-prometheus-pushgateway.prom-system.svc.cluster.local:9091"
            - name: IS_MANUAL
              value: "false"
            - name: JAEGER_AGENT_HOST # For tracing
              valueFrom:
                fieldRef:
                  fieldPath: status.hostIP
            - name: JAEGER_SERVICE_NAME
              value: "migrator"
            # --- Dex Defaults (used by job logic?) ---
            - name: DEX_GRPC_ADDRESS
              value: "opensecurity-dex.opensecurity.svc.cluster.local:5557" # Use .Release.Name here
            - name: DEFAULT_DEX_USER_ID
              value: "08a8684b-db88-4b73-90a9-3cd1661f5466" # Hardcoded default ID
            - name: DEFAULT_DEX_USER_NAME
              value: "admin" # Hardcoded default user
            - name: DEFAULT_DEX_USER_EMAIL
              value: "admin@clearcompass.so" # Hardcoded default email

            # --- MODIFIED LINE: Use password from the initial admin secret ---
            - name: DEFAULT_DEX_USER_PASSWORD
              valueFrom:
                secretKeyRef:
                  # Use the same name generated by initial-admin-password-secret.yaml
                  name: opensecurity-initial-admin-password
                  # Key within the secret holding the password
                  key: password
            # --- END MODIFIED LINE ---

            # --- Other Context ---
            - name: PLATFORM_NAMESPACE
              value: "opensecurity"
            - name: COMPLIANCE_ENABLED
              value: "true"
            - name: CURRENT_NAMESPACE
              value: "opensecurity"
            - name: NATS_URL
              value: "opensecurity-nats.opensecurity.svc.cluster.local:4222"

          volumeMounts:
            - name: elasticsearch-index-config
              mountPath: /elasticsearch-index-config
            - name: inventory-data-config
              mountPath: /inventory-data-config
            # Mounts for migrator-config
            - name: migrator-config
              mountPath: /core-migration/metadata.json
              subPath: metadata.json
            - name: migrator-config
              mountPath: /core-migration/query_parameters.json
              subPath: query_parameters.json
            - name: migrator-config
              mountPath: /core-migration/chat_prompt.txt
              subPath: chat_prompt.txt
            - name: migrator-config
              mountPath: /core-migration/main_prompt.txt
              subPath: main_prompt.txt
            - name: migrator-config
              mountPath: /core-migration/assets_chat_prompt.txt
              subPath: assets_chat_prompt.txt
            - name: migrator-config
              mountPath: /core-migration/assets_main_prompt.txt
              subPath: assets_main_prompt.txt
            - name: migrator-config
              mountPath: /core-migration/score_chat_prompt.txt
              subPath: score_chat_prompt.txt
            - name: migrator-config
              mountPath: /core-migration/score_main_prompt.txt
              subPath: score_main_prompt.txt
            - name: migrator-config
              mountPath: /core-migration/compliance_chat_prompt.txt
              subPath: compliance_chat_prompt.txt
            - name: migrator-config
              mountPath: /core-migration/compliance_main_prompt.txt
              subPath: compliance_main_prompt.txt
      volumes:
        - name: elasticsearch-index-config
          configMap:
            # Ensure this ConfigMap exists or is created by the chart
            name: elasticsearch-index-config
        - name: inventory-data-config
          configMap:
            # Ensure this ConfigMap exists or is created by the chart
            name: inventory-data-config
        - name: migrator-config
          configMap:
            # This ConfigMap is defined elsewhere (e.g., migrator-configmap.yaml)
            name: migrator-config
  backoffLimit: 10 # Number of retries for the job
---
# Source: opensecurity/templates/checkup-job/scaled-object.yaml
apiVersion: keda.sh/v1alpha1
kind: ScaledObject
metadata:
  name: checkup-worker-scaled-object
  namespace: "opensecurity"
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "1"
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: checkup-worker
    envSourceContainerName: checkup-worker
  pollingInterval: 30
  cooldownPeriod: 300
  idleReplicaCount: 0
  minReplicaCount: 1
  maxReplicaCount: 2
  triggers:
    - type: nats-jetstream
      metadata:
        natsServerMonitoringEndpoint: "opensecurity-nats-headless.opensecurity.svc.cluster.local:8222"
        account: "$G"
        stream: "checkup"
        consumer: "checkup-service-service"
        lagThreshold: "10"
        useHttps: "false"
---
# Source: opensecurity/templates/compliance-quick-job/scaled-object.yaml
apiVersion: keda.sh/v1alpha1
kind: ScaledObject
metadata:
  name: compliance-quick-worker-scaled-object
  namespace: opensecurity
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "1"
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: compliance-quick-worker
  pollingInterval: 30
  cooldownPeriod:  300
  minReplicaCount: 0
  maxReplicaCount: 5
  fallback:
    failureThreshold: 1
    replicas: 1
  triggers:
    - type: nats-jetstream
      metadata:
        natsServerMonitoringEndpoint: "opensecurity-nats-headless.opensecurity.svc.cluster.local:8222"
        account: "$G"
        stream: "compliance-quick-run"
        consumer: "compliance-quick-run-service"
        lagThreshold: "1"
        useHttps: "false"
---
# Source: opensecurity/templates/compliance-report-job/scaled-object.yaml
apiVersion: keda.sh/v1alpha1
kind: ScaledObject
metadata:
  name: compliance-worker-scaled-object
  namespace: opensecurity
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "1"
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: compliance-worker
  pollingInterval: 30
  cooldownPeriod:  300
  minReplicaCount: 0
  maxReplicaCount: 10
  fallback:
    failureThreshold: 1
    replicas: 1
  triggers:
    - type: nats-jetstream
      metadata:
        natsServerMonitoringEndpoint: "opensecurity-nats-headless.opensecurity.svc.cluster.local:8222"
        account: "$G"
        stream: "compliance-runner"
        consumer: "compliance-runner-service"
        lagThreshold: "50"
        useHttps: "false"
---
# Source: opensecurity/templates/compliance-report-job/scaled-object.yaml
apiVersion: keda.sh/v1alpha1
kind: ScaledObject
metadata:
  name: compliance-worker-manual-scaled-object
  namespace: opensecurity
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "1"
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: compliance-worker-manual
  pollingInterval: 5
  cooldownPeriod:  300
  minReplicaCount: 0
  maxReplicaCount: 10
  fallback:
    failureThreshold: 1
    replicas: 1
  triggers:
    - type: nats-jetstream
      metadata:
        natsServerMonitoringEndpoint: "opensecurity-nats-headless.opensecurity.svc.cluster.local:8222"
        account: "$G"
        stream: "compliance-runner"
        consumer: "compliance-runner-manuals-service"
        lagThreshold: "50"
        useHttps: "false"
